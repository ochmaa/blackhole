if(window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype.getImageData){var defaultOffsets={destX:0,destY:0,sourceX:0,sourceY:0,width:"auto",height:"auto"};CanvasRenderingContext2D.prototype.blendOnto=function(a,d,c){var b={};for(var e in defaultOffsets)if(defaultOffsets.hasOwnProperty(e))b[e]=c&&c[e]||defaultOffsets[e];if(b.width=="auto")b.width=this.canvas.width;if(b.height=="auto")b.height=this.canvas.height;b.width=Math.min(b.width,this.canvas.width-b.sourceX,a.canvas.width-b.destX);
b.height=Math.min(b.height,this.canvas.height-b.sourceY,a.canvas.height-b.destY);e=this.getImageData(b.sourceX,b.sourceY,b.width,b.height);c=a.getImageData(b.destX,b.destY,b.width,b.height);e=e.data;for(var f=c.data,g,h,j=f.length,l,k,m,o,p,q,v,r,n=0;n<j;n+=4){g=e[n+3]/255;h=f[n+3]/255;v=g+h-g*h;f[n+3]=v*255;l=e[n]/255*g;o=f[n]/255*h;k=e[n+1]/255*g;p=f[n+1]/255*h;m=e[n+2]/255*g;q=f[n+2]/255*h;r=255/v;switch(d){case "normal":case "src-over":f[n]=(l+o-o*g)*r;f[n+1]=(k+p-p*g)*r;f[n+2]=(m+q-q*g)*r;break;
case "screen":f[n]=(l+o-l*o)*r;f[n+1]=(k+p-k*p)*r;f[n+2]=(m+q-m*q)*r;break;case "multiply":f[n]=(l*o+l*(1-h)+o*(1-g))*r;f[n+1]=(k*p+k*(1-h)+p*(1-g))*r;f[n+2]=(m*q+m*(1-h)+q*(1-g))*r;break;case "difference":f[n]=(l+o-2*Math.min(l*h,o*g))*r;f[n+1]=(k+p-2*Math.min(k*h,p*g))*r;f[n+2]=(m+q-2*Math.min(m*h,q*g))*r;break;case "src-in":v=g*h;r=255/v;f[n+3]=v*255;f[n]=l*h*r;f[n+1]=k*h*r;f[n+2]=m*h*r;break;case "plus":case "add":v=Math.min(1,g+h);f[n+3]=v*255;r=255/v;f[n]=Math.min(l+o,1)*r;f[n+1]=Math.min(k+
p,1)*r;f[n+2]=Math.min(m+q,1)*r;break;case "overlay":f[n]=o<=0.5?2*e[n]*o/h:255-(2-2*o/h)*(255-e[n]);f[n+1]=p<=0.5?2*e[n+1]*p/h:255-(2-2*p/h)*(255-e[n+1]);f[n+2]=q<=0.5?2*e[n+2]*q/h:255-(2-2*q/h)*(255-e[n+2]);break;case "hardlight":f[n]=l<=0.5?2*f[n]*l/h:255-(2-2*l/g)*(255-f[n]);f[n+1]=k<=0.5?2*f[n+1]*k/h:255-(2-2*k/g)*(255-f[n+1]);f[n+2]=m<=0.5?2*f[n+2]*m/h:255-(2-2*m/g)*(255-f[n+2]);break;case "colordodge":case "dodge":f[n]=e[n]==255&&o==0?255:Math.min(255,f[n]/(255-e[n]))*r;f[n+1]=e[n+1]==255&&
p==0?255:Math.min(255,f[n+1]/(255-e[n+1]))*r;f[n+2]=e[n+2]==255&&q==0?255:Math.min(255,f[n+2]/(255-e[n+2]))*r;break;case "colorburn":case "burn":f[n]=e[n]==0&&o==0?0:(1-Math.min(1,(1-o)/l))*r;f[n+1]=e[n+1]==0&&p==0?0:(1-Math.min(1,(1-p)/k))*r;f[n+2]=e[n+2]==0&&q==0?0:(1-Math.min(1,(1-q)/m))*r;break;case "darken":case "darker":f[n]=(l>o?o:l)*r;f[n+1]=(k>p?p:k)*r;f[n+2]=(m>q?q:m)*r;break;case "lighten":case "lighter":f[n]=(l<o?o:l)*r;f[n+1]=(k<p?p:k)*r;f[n+2]=(m<q?q:m)*r;break;case "exclusion":f[n]=
(o+l-2*o*l)*r;f[n+1]=(p+k-2*p*k)*r;f[n+2]=(q+m-2*q*m)*r;break;default:f[n]=f[n+3]=255;f[n+1]=n%8==0?255:0;f[n+2]=n%8==0?0:255}}a.putImageData(c,b.destX,b.destY)};for(var modes=CanvasRenderingContext2D.prototype.blendOnto.supportedBlendModes="normal src-over screen multiply difference src-in plus add overlay hardlight colordodge dodge colorburn burn darken lighten exclusion".split(" "),supports=CanvasRenderingContext2D.prototype.blendOnto.supports={},i=0,len=modes.length;i<len;++i)supports[modes[i]]=
true};(function(a){a.fn.autoResize=function(d){var c=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},d);this.filter("textarea").each(function(){var b=a(this),e=0,f=function(){var j=["height","width","lineHeight","textDecoration","letterSpacing"],l={};a.each(j,function(k,m){l[m]=b.css(m)});return b.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(l).attr("tabIndex","-1").insertBefore(b)}(),
g=null;function h(){f.height(0).val(a(this).val()).scrollTop(10000);if(e==0)e=b.height();var j=Math.max(f.scrollTop()+c.extraSpace,e),l=a(this).add(f);if(g!==j){g=j;if(j>=c.limit)a(this).css("overflow-y","");else{c.onResize.call(this);c.animate&&b.css("display")==="block"?l.stop().animate({height:j},c.animateDuration,c.animateCallback):l.height(j)}}}b.unbind(".dynSiz").bind("resize.dynSiz",h)});return this}})(jQuery);(function(a){a.fn.extend({autocomplete:function(d,c){var b=typeof d=="string";c=a.extend({},a.Autocompleter.defaults,{url:b?d:null,data:b?null:d,delay:b?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c);c.highlight=c.highlight||function(e){return e};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(d){return this.bind("result",d)},search:function(d){return this.trigger("search",[d])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(d){return this.trigger("setOptions",[d])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(d,c){var b={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},e=a(d).attr("autocomplete","off").addClass(c.inputClass),f,g="",h=a.Autocompleter.Cache(c),j=0,l,k={mouseDownOnSelect:false},m=a.Autocompleter.Select(c,d,p,k),o;a.browser.opera&&a(d.form).bind("submit.autocomplete",function(){if(o)return o=false});
e.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(u){j=1;l=u.keyCode;switch(u.keyCode){case b.UP:u.preventDefault();m.visible()?m.prev():q(0,true);break;case b.DOWN:u.preventDefault();m.visible()?m.next():q(0,true);break;case b.PAGEUP:u.preventDefault();m.visible()?m.pageUp():q(0,true);break;case b.PAGEDOWN:u.preventDefault();m.visible()?m.pageDown():q(0,true);break;case c.multiple&&a.trim(c.multipleSeparator)==","&&b.COMMA:case b.TAB:case b.RETURN:if(p()){u.preventDefault();
o=true;return false}break;case b.ESC:m.hide();break;default:clearTimeout(f);f=setTimeout(q,c.delay);break}}).focus(function(){j++}).blur(function(){j=0;k.mouseDownOnSelect||x()}).click(function(){j++>1&&!m.visible()&&q(0,true)}).bind("search",function(){var u=arguments.length>1?arguments[1]:null;function z(H,A){var C;if(A&&A.length)for(var B=0;B<A.length;B++)if(A[B].result.toLowerCase()==H.toLowerCase()){C=A[B];break}typeof u=="function"?u(C):e.trigger("result",C&&[C.data,C.value])}a.each(v(e.val()),
function(H,A){y(A,z,z)})}).bind("flushCache",function(){h.flush()}).bind("setOptions",function(u,z){a.extend(c,z);"data"in z&&h.populate()}).bind("unautocomplete",function(){m.unbind();e.unbind();a(d.form).unbind(".autocomplete")});function p(){var u=m.selected();if(!u)return false;var z=u.result;g=z;if(c.multiple){var H=v(e.val());if(H.length>1){var A=c.multipleSeparator.length,C=a(d).selection().start,B,D=0;a.each(H,function(E,I){D+=I.length;if(C<=D){B=E;return false}D+=A});H[B]=z;z=H.join(c.multipleSeparator)}z+=
c.multipleSeparator}e.val(z);F();e.trigger("result",[u.data,u.value]);return true}function q(u,z){if(l==b.DEL)m.hide();else{u=e.val();if(!(!z&&u==g)){g=u;u=r(u);if(u.length>=c.minChars){e.addClass(c.loadingClass);c.matchCase||(u=u.toLowerCase());y(u,K,F)}else{G();m.hide()}}}}function v(u){if(!u)return[""];if(!c.multiple)return[a.trim(u)];return a.map(u.split(c.multipleSeparator),function(z){return a.trim(u).length?a.trim(z):null})}function r(u){if(!c.multiple)return u;var z=v(u);if(z.length==1)return z[0];
z=a(d).selection().start;z=z==u.length?v(u):v(u.replace(u.substring(z),""));return z[z.length-1]}function n(u,z){if(c.autoFill&&r(e.val()).toLowerCase()==u.toLowerCase()&&l!=b.BACKSPACE){e.val(e.val()+z.substring(r(g).length));a(d).selection(g.length,g.length+z.length)}}function s(u,z){if(c.autoResult&&z.length){u=z[0];var H=u.result;if(r(e.val()).toLowerCase()==H.toLowerCase()){e.trigger("result",[u.data,u.value]);z.length==1&&x()}}}var t=false;function x(){clearTimeout(f);f=setTimeout(F,200);t=
true}function F(){m.visible();m.hide();clearTimeout(f);G();c.mustMatch&&e.search(function(u){if(!u)if(c.multiple){u=v(e.val()).slice(0,-1);e.val(u.join(c.multipleSeparator)+(u.length?c.multipleSeparator:""))}else{e.val("");e.trigger("result",null)}})}function K(u,z){if(z&&z.length&&j){G();t=false;m.display(z,u);n(u,z[0].value);s(u,z);t||m.show()}else F()}function y(u,z,H){c.matchCase||(u=u.toLowerCase());var A=h.load(u);if(A&&A.length)z(u,A);else if(typeof c.url=="string"&&c.url.length>0){var C={timestamp:+new Date};
a.each(c.extraParams,function(B,D){C[B]=typeof D=="function"?D():D});a.ajax({mode:"abort",port:"autocomplete"+d.name,dataType:c.dataType,url:c.url,data:a.extend({q:r(u),limit:c.max},C),success:function(B){B=c.parse&&c.parse(B)||w(B);h.add(u,B);z(u,B)}})}else{m.emptyList();H(u)}}function w(u){var z=[];u=u.split("\n");for(var H=0;H<u.length;H++){var A=a.trim(u[H]);if(A){A=A.split("|");z[z.length]={data:A,value:A[0],result:c.formatResult&&c.formatResult(A,A[0])||A[0]}}}return z}function G(){e.removeClass(c.loadingClass)}
};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(d){return d[0]},formatMatch:null,autoFill:false,autoResult:true,width:0,multiple:false,multipleSeparator:", ",highlight:function(d,c){return d.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+c.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,
"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};a.Autocompleter.Cache=function(d){var c={},b=0;function e(j,l){d.matchCase||(j=j.toLowerCase());var k=j.indexOf(l);if(d.matchContains=="word")k=j.toLowerCase().search("\\b"+l.toLowerCase());if(k==-1)return false;return k==0||d.matchContains}function f(j,l){b>d.cacheLength&&h();c[j]||b++;c[j]=l}function g(){if(!d.data)return false;var j={},l=0;if(!d.url)d.cacheLength=1;j[""]=[];for(var k=0,m=d.data.length;k<
m;k++){var o=d.data[k];o=typeof o=="string"?[o]:o;var p=d.formatMatch(o,k+1,d.data.length);if(p!==false){var q=p.charAt(0).toLowerCase();j[q]||(j[q]=[]);o={value:p,data:o,result:d.formatResult&&d.formatResult(o)||p};j[q].push(o);l++<d.max&&j[""].push(o)}}a.each(j,function(v,r){d.cacheLength++;f(v,r)})}setTimeout(g,25);function h(){c={};b=0}return{flush:h,add:f,populate:g,load:function(j){if(!d.cacheLength||!b)return null;if(!d.url&&d.matchContains){var l=[];for(var k in c)if(k.length>0){var m=c[k];
a.each(m,function(o,p){e(p.value,j)&&l.push(p)})}return l}else if(c[j])return c[j];else if(d.matchSubset)for(k=j.length-1;k>=d.minChars;k--)if(m=c[j.substr(0,k)]){l=[];a.each(m,function(o,p){if(e(p.value,j))l[l.length]=p});return l}return null}}};a.Autocompleter.Select=function(d,c,b,e){var f={ACTIVE:"ac_over"},g,h=-1,j,l="",k=true,m,o;function p(){if(k){m=a("<div/>").hide().addClass(d.resultsClass).css("position","absolute").appendTo(document.body);o=a("<ul/>").appendTo(m).mouseover(function(t){if(q(t).nodeName&&
q(t).nodeName.toUpperCase()=="LI"){h=a("li",o).removeClass(f.ACTIVE).index(q(t));a(q(t)).addClass(f.ACTIVE)}}).click(function(t){a(q(t)).addClass(f.ACTIVE);b();c.focus();return false}).mousedown(function(){e.mouseDownOnSelect=true}).mouseup(function(){e.mouseDownOnSelect=false});d.width>0&&m.css("width",d.width);k=false}}function q(t){for(t=t.target;t&&t.tagName!="LI";)t=t.parentNode;if(!t)return[];return t}function v(t){g.slice(h,h+1).removeClass(f.ACTIVE);r(t);t=g.slice(h,h+1).addClass(f.ACTIVE);
if(d.scroll){var x=0;g.slice(0,h).each(function(){x+=this.offsetHeight});if(x+t[0].offsetHeight-o.scrollTop()>o[0].clientHeight)o.scrollTop(x+t[0].offsetHeight-o.innerHeight());else x<o.scrollTop()&&o.scrollTop(x)}}function r(t){h+=t;if(h<0)h=g.size()-1;else if(h>=g.size())h=0}function n(t){return d.max&&d.max<t?d.max:t}function s(){o.empty();for(var t=n(j.length),x=0;x<t;x++)if(j[x]){var F=d.formatItem(j[x].data,x+1,t,j[x].value,l);if(F!==false){F=a("<li/>").html(d.highlight(F,l)).addClass(x%2==
0?"ac_even":"ac_odd").appendTo(o)[0];a.data(F,"ac_data",j[x])}}g=o.find("li");if(d.selectFirst){g.slice(0,1).addClass(f.ACTIVE);h=0}a.fn.bgiframe&&o.bgiframe()}return{display:function(t,x){p();j=t;l=x;s()},next:function(){v(1)},prev:function(){v(-1)},pageUp:function(){h!=0&&h-8<0?v(-h):v(-8)},pageDown:function(){h!=g.size()-1&&h+8>g.size()?v(g.size()-1-h):v(8)},hide:function(){m&&m.hide();g&&g.removeClass(f.ACTIVE);h=-1},visible:function(){return m&&m.is(":visible")},current:function(){return this.visible()&&
(g.filter("."+f.ACTIVE)[0]||d.selectFirst&&g[0])},show:function(){var t=a(c).offset();m.css({width:typeof d.width=="string"||d.width>0?d.width:a(c).width(),top:t.top+c.offsetHeight,left:t.left}).show();if(d.scroll){o.scrollTop(0);o.css({maxHeight:d.scrollHeight,overflow:"auto"});if(a.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var x=0;g.each(function(){x+=this.offsetHeight});t=x>d.scrollHeight;o.css("height",t?d.scrollHeight:x);t||g.width(o.width()-parseInt(g.css("padding-left"))-
parseInt(g.css("padding-right")))}}},selected:function(){var t=g&&g.filter("."+f.ACTIVE).removeClass(f.ACTIVE);return t&&t.length&&a.data(t[0],"ac_data")},emptyList:function(){o&&o.empty()},unbind:function(){m&&m.remove()}}};a.fn.selection=function(d,c){if(d!==undefined)return this.each(function(){if(this.createTextRange){var j=this.createTextRange();if(c===undefined||d==c)j.move("character",d);else{j.collapse(true);j.moveStart("character",d);j.moveEnd("character",c)}j.select()}else if(this.setSelectionRange)this.setSelectionRange(d,
c);else if(this.selectionStart){this.selectionStart=d;this.selectionEnd=c}});var b=this[0];if(b.createTextRange){var e=document.selection.createRange(),f=b.value,g="<->",h=e.text.length;e.text=g;e=b.value.indexOf(g);b.value=f;this.selection(e,e+h);return{start:e,end:e+h}}else if(b.selectionStart!==undefined)return{start:b.selectionStart,end:b.selectionEnd}}})(jQuery);(function(a){a.fn.autocompleteField=function(d){var c=a.extend({searchVar:"q",url:null,delay:250,useCache:false,extraParams:{},autoClearResults:true,dataType:"html",minLength:1},d);return a(this).each(function(){var b=a(this),e,f,g,h={};function j(k){e&&e.readyState<4&&e.abort();if(c.useCache&&h[k])b.trigger("autocomplete.finish",h[k]);else{var m={};m[c.searchVar]=k;m=a.extend(true,c.extraParams,m);b.trigger("autocomplete.beforesend");e=a.get(c.url,m,function(o){if(c.useCache)h[k]=o;b.val()===k&&
b.trigger("autocomplete.finish",o)},c.dataType)}}function l(k){if(k.length>=c.minLength){if(g!=k){j(k);g=k}}else b.trigger("autocomplete.clear")}if(c.url!=null){b.attr("autocomplete","off");b.keyup(function(k){k.preventDefault();clearTimeout(f);f=setTimeout(function(){clearTimeout(f);l(b.val())},c.delay)});b.blur(function(){g=null})}})}})(jQuery);(function(a){a.fn.autosaveField=function(d){var c=a.extend({},a.fn.autosaveField.defaults,d);return this.each(function(){var b=a(this),e=b.attr("data-field-type")||":text",f=b.find(e),g=b.find(".error"),h=b.find(".success"),j=b.attr("data-action"),l=b.attr("data-name"),k=f.val();function m(){f.spin();a.ajax({url:j,type:"POST",data:{_method:c.method,field:l,value:f.val()},success:function(){f.stopSpin();h.show();k=f.val()},error:function(){f.stopSpin();b.attr("data-reset-on-error")&&f.val(k);g.show()}})}
if(e==":text"){f.blur(function(){a(this).val()!=k&&m()});f.keyup(function(){g.hide();h.hide()})}else e=="input[type=checkbox]"&&f.change(function(){g.hide();h.hide();m()})})};a.fn.autosaveField.defaults={method:"put"}})(jQuery);(function(a){BaconPlayer={sound:null,playing:false,sm2:"/js/soundmanager2.js",flashURL:"/flash/",playOrPause:function(b){this.initSound(b,function(){this.playing?this.pause():this.play()})},play:function(){if(this.sound){this.playing=true;this.sound.play();a(".baconplayer .play, .baconplayer .pause").toggle();return"playing"}},pause:function(){if(this.sound){this.playing=false;this.sound.pause();a(".baconplayer .play, .baconplayer .pause").toggle();return"paused"}},initSound:function(b,e){if(!window.soundManager)return a.getScript(this.sm2,
function(){soundManager.url=BaconPlayer.flashURL;soundManager.debugMode=false;soundManager.onready(function(){BaconPlayer.initSound(b,e)})});this.sound=soundManager.createSound({id:"baconplayer",url:b,whileplaying:function(){BaconPlayer.moveProgressBar(this);BaconPlayer.setPositionTiming(this)},whileloading:function(){BaconPlayer.moveLoadingBar(this);BaconPlayer.setDurationTiming(this)},onload:function(){BaconPlayer.setDurationTiming(this,true)}});e.call(this)},moveProgressBar:function(b){b=b.position/
b.durationEstimate;a(".baconplayer .inner-progress").width(this.progressBar().width()*b)},moveLoadingBar:function(b){b=b.bytesLoaded/b.bytesTotal;a(".baconplayer .loading-progress").width(this.progressBar().width()*b)},setPositionTiming:function(b){b=d(b.position);a(".baconplayer .position").text(b)},setDurationTiming:function(b,e){if(!(!e&&this.durationTimingTimer)){this.durationTimingTimer=setTimeout(function(){BaconPlayer.setDurationTiming(b);BaconPlayer.durationTimingTimer=null},2000);e=d(b.durationEstimate);
a(".baconplayer .duration").text(e)}},progressBar:function(){return a(".baconplayer .progress")},setPosition:function(b){var e=this.progressBar()[0],f=this.sound;b=parseInt(b.clientX);e=Math.floor((b-c(e)-4)/e.offsetWidth*f.durationEstimate);isNaN(e)||(e=Math.min(e,f.duration));isNaN(e)||f.setPosition(e)},startDrag:function(b){if(!(this.dragging||!this.sound)){this.attachDragHandlers();this.dragging=true;this.pause();this.setPosition(b)}},drag:function(b){this.setPosition(b)},stopDrag:function(b){this.removeDragHandlers();
this.dragging=false;this.setPosition(b);this.play()},attachDragHandlers:function(){a(document).bind("mousemove.baconplayer",function(b){BaconPlayer.drag(b)});a(document).bind("mouseup.baconplayer",function(b){BaconPlayer.stopDrag(b)})},removeDragHandlers:function(){a(document).unbind("mousemove.baconplayer");a(document).unbind("mouseup.baconplayer")}};function d(b){b=Math.floor(b/1000);var e=Math.floor(b/60);b%=60;b=b<10?"0"+b:b;return e+":"+b}function c(b){var e=0;if(b.offsetParent)for(;b.offsetParent;){e+=
b.offsetLeft;b=b.offsetParent}else if(b.x)e+=b.x;return e}a(function(){a(".baconplayer .play, .baconplayer .pause").click(function(){BaconPlayer.playOrPause(this.href);return false});a(".baconplayer .progress").mousedown(function(b){BaconPlayer.startDrag(b)})})})(jQuery);(function(a){a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(e,f){a.fx.step[f]=function(g){if(g.state==0){g.start=c(g.elem,f);g.end=d(g.end)}g.elem.style[f]="rgb("+[Math.max(Math.min(parseInt(g.pos*(g.end[0]-g.start[0])+g.start[0]),255),0),Math.max(Math.min(parseInt(g.pos*(g.end[1]-g.start[1])+g.start[1]),255),0),Math.max(Math.min(parseInt(g.pos*(g.end[2]-g.start[2])+g.start[2]),255),0)].join(",")+")"}});function d(e){var f;
if(e&&e.constructor==Array&&e.length==3)return e;if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])];if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55];if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)];if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return[parseInt(f[1]+
f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)];return b[a.trim(e).toLowerCase()]}function c(e,f){var g;do{g=a.curCSS(e,f);if(g!=""&&g!="transparent"||a.nodeName(e,"body"))break;f="backgroundColor"}while(e=e.parentNode);return d(g)}var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,
107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],
violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);jQuery.cookie=function(a,d,c){if(typeof d!="undefined"){c=c||{};if(d===null){d="";c.expires=-1}var b="";if(c.expires&&(typeof c.expires=="number"||c.expires.toUTCString)){if(typeof c.expires=="number"){b=new Date;b.setTime(b.getTime()+c.expires*24*60*60*1000)}else b=c.expires;b="; expires="+b.toUTCString()}var e=c.path?"; path="+c.path:"",f=c.domain?"; domain="+c.domain:"";c=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(d),b,e,f,c].join("")}else{d=null;if(document.cookie&&document.cookie!=
""){c=document.cookie.split(";");for(b=0;b<c.length;b++){e=jQuery.trim(c[b]);if(e.substring(0,a.length+1)==a+"="){d=decodeURIComponent(e.substring(a.length+1));break}}}return d}};DateInput=function(a){function d(c,b){if(typeof b!="object")b={};a.extend(this,d.DEFAULT_OPTS,b);this.input=a(c);this.bindMethodsToObj("show","hide","hideIfClickOutside","keydownHandler","selectDate");this.build();this.selectDate();this.hide();this.input.data("datePicker",this)}d.DEFAULT_OPTS={month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],short_month_names:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov",
"Dec"],short_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],start_of_week:1};d.prototype={build:function(){var c=a('<p class="month_nav"><span class="button prev" title="[Page-Up]">&#171;</span> <span class="month_name"></span> <span class="button next" title="[Page-Down]">&#187;</span></p>');this.monthNameSpan=a(".month_name",c);a(".prev",c).click(this.bindToObj(function(){this.moveMonthBy(-1)}));a(".next",c).click(this.bindToObj(function(){this.moveMonthBy(1)}));var b=a('<p class="year_nav"><span class="button prev" title="[Ctrl+Page-Up]">&#171;</span> <span class="year_name"></span> <span class="button next" title="[Ctrl+Page-Down]">&#187;</span></p>');
this.yearNameSpan=a(".year_name",b);a(".prev",b).click(this.bindToObj(function(){this.moveMonthBy(-12)}));a(".next",b).click(this.bindToObj(function(){this.moveMonthBy(12)}));c=a('<div class="nav"></div>').append(c,b);var e="<table><thead><tr>";a(this.adjustDays(this.short_day_names)).each(function(){e+="<th>"+this+"</th>"});e+="</tr></thead><tbody></tbody></table>";this.dateSelector=this.rootLayers=a('<div class="date_selector"></div>').append(c,e).insertAfter(this.input);if(a.browser.msie&&a.browser.version<
7){this.ieframe=a('<iframe class="date_selector_ieframe" frameborder="0" src="#"></iframe>').insertBefore(this.dateSelector);this.rootLayers=this.rootLayers.add(this.ieframe);a(".button",c).mouseover(function(){a(this).addClass("hover")});a(".button",c).mouseout(function(){a(this).removeClass("hover")})}this.tbody=a("tbody",this.dateSelector);this.input.change(this.bindToObj(function(){this.selectDate()}));this.selectDate()},selectMonth:function(c){var b=new Date(c.getFullYear(),c.getMonth(),1);if(!this.currentMonth||
!(this.currentMonth.getFullYear()==b.getFullYear()&&this.currentMonth.getMonth()==b.getMonth())){this.currentMonth=b;b=this.rangeStart(c);var e=this.rangeEnd(c);e=this.daysBetween(b,e);for(var f="",g=0;g<=e;g++){var h=new Date(b.getFullYear(),b.getMonth(),b.getDate()+g,12,0);if(this.isFirstDayOfWeek(h))f+="<tr>";f+=h.getMonth()==c.getMonth()?'<td class="selectable_day" date="'+this.dateToString(h)+'">'+h.getDate()+"</td>":'<td class="unselected_month" date="'+this.dateToString(h)+'">'+h.getDate()+
"</td>";if(this.isLastDayOfWeek(h))f+="</tr>"}this.tbody.empty().append(f);this.monthNameSpan.empty().append(this.monthName(c));this.yearNameSpan.empty().append(this.currentMonth.getFullYear());a(".selectable_day",this.tbody).click(this.bindToObj(function(j){this.changeInput(a(j.target).attr("date"))}));a("td[date="+this.dateToString(new Date)+"]",this.tbody).addClass("today");a("td.selectable_day",this.tbody).mouseover(function(){a(this).addClass("hover")});a("td.selectable_day",this.tbody).mouseout(function(){a(this).removeClass("hover")})}a(".selected",
this.tbody).removeClass("selected");a("td[date="+this.selectedDateString+"]",this.tbody).addClass("selected")},selectDate:function(c){if(typeof c=="undefined")c=this.stringToDate(this.input.val());c||(c=new Date);this.selectedDate=c;this.selectedDateString=this.dateToString(this.selectedDate);this.selectMonth(this.selectedDate)},changeInput:function(c){this.input.val(c).change();this.hide()},show:function(){this.rootLayers.css("display","block");a([window,document.body]).click(this.hideIfClickOutside);
this.input.unbind("focus",this.show);this.rootLayers.keydown(this.keydownHandler);this.setPosition()},hide:function(){this.rootLayers.css("display","none");a([window,document.body]).unbind("click",this.hideIfClickOutside);this.input.focus(this.show);this.rootLayers.unbind("keydown",this.keydownHandler)},hideIfClickOutside:function(c){c.target!=this.input[0]&&!this.insideSelector(c)&&this.hide()},insideSelector:function(c){var b=this.dateSelector.position();b.right=b.left+this.dateSelector.outerWidth();
b.bottom=b.top+this.dateSelector.outerHeight();return c.pageY<b.bottom&&c.pageY>b.top&&c.pageX<b.right&&c.pageX>b.left},keydownHandler:function(c){switch(c.keyCode){case 9:case 27:this.hide();return;case 13:this.changeInput(this.selectedDateString);break;case 33:this.moveDateMonthBy(c.ctrlKey?-12:-1);break;case 34:this.moveDateMonthBy(c.ctrlKey?12:1);break;case 38:this.moveDateBy(-7);break;case 40:this.moveDateBy(7);break;case 37:this.moveDateBy(-1);break;case 39:this.moveDateBy(1);break;default:return}c.preventDefault()},
stringToDate:function(c){var b;return(b=c.match(/^(\d{1,2}) ([^\s]+) (\d{4,4})$/))?new Date(b[3],this.shortMonthNum(b[2]),b[1],12,0):null},dateToString:function(c){return c.getDate()+" "+this.short_month_names[c.getMonth()]+" "+c.getFullYear()},setPosition:function(){var c=this.input.offset();this.rootLayers.css({top:c.top+this.input.outerHeight(),left:c.left});this.ieframe&&this.ieframe.css({width:this.dateSelector.outerWidth(),height:this.dateSelector.outerHeight()})},moveDateBy:function(c){c=new Date(this.selectedDate.getFullYear(),
this.selectedDate.getMonth(),this.selectedDate.getDate()+c);this.selectDate(c)},moveDateMonthBy:function(c){var b=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+c,this.selectedDate.getDate());b.getMonth()==this.selectedDate.getMonth()+c+1&&b.setDate(0);this.selectDate(b)},moveMonthBy:function(c){c=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+c,this.currentMonth.getDate());this.selectMonth(c)},monthName:function(c){return this.month_names[c.getMonth()]},
bindToObj:function(c){var b=this;return function(){return c.apply(b,arguments)}},bindMethodsToObj:function(){for(var c=0;c<arguments.length;c++)this[arguments[c]]=this.bindToObj(this[arguments[c]])},indexFor:function(c,b){for(var e=0;e<c.length;e++)if(b==c[e])return e},monthNum:function(c){return this.indexFor(this.month_names,c)},shortMonthNum:function(c){return this.indexFor(this.short_month_names,c)},shortDayNum:function(c){return this.indexFor(this.short_day_names,c)},daysBetween:function(c,b){c=
Date.UTC(c.getFullYear(),c.getMonth(),c.getDate());b=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return(b-c)/86400000},changeDayTo:function(c,b,e){c=e*(Math.abs(b.getDay()-c-e*7)%7);return new Date(b.getFullYear(),b.getMonth(),b.getDate()+c)},rangeStart:function(c){return this.changeDayTo(this.start_of_week,new Date(c.getFullYear(),c.getMonth()),-1)},rangeEnd:function(c){return this.changeDayTo((this.start_of_week-1)%7,new Date(c.getFullYear(),c.getMonth()+1,0),1)},isFirstDayOfWeek:function(c){return c.getDay()==
this.start_of_week},isLastDayOfWeek:function(c){return c.getDay()==(this.start_of_week-1)%7},adjustDays:function(c){for(var b=[],e=0;e<c.length;e++)b[e]=c[(e+this.start_of_week)%7];return b}};a.fn.date_input=function(c){return this.each(function(){new d(this,c)})};a.date_input={initialize:function(c){a("input.date_input").date_input(c)}};return d}(jQuery);jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,d,c,b,e){return jQuery.easing[jQuery.easing.def](a,d,c,b,e)},easeInQuad:function(a,d,c,b,e){return b*(d/=e)*d+c},easeOutQuad:function(a,d,c,b,e){return-b*(d/=e)*(d-2)+c},easeInOutQuad:function(a,d,c,b,e){if((d/=e/2)<1)return b/2*d*d+c;return-b/2*(--d*(d-2)-1)+c},easeInCubic:function(a,d,c,b,e){return b*(d/=e)*d*d+c},easeOutCubic:function(a,d,c,b,e){return b*((d=d/e-1)*d*d+1)+c},easeInOutCubic:function(a,d,c,b,e){if((d/=e/2)<1)return b/
2*d*d*d+c;return b/2*((d-=2)*d*d+2)+c},easeInQuart:function(a,d,c,b,e){return b*(d/=e)*d*d*d+c},easeOutQuart:function(a,d,c,b,e){return-b*((d=d/e-1)*d*d*d-1)+c},easeInOutQuart:function(a,d,c,b,e){if((d/=e/2)<1)return b/2*d*d*d*d+c;return-b/2*((d-=2)*d*d*d-2)+c},easeInQuint:function(a,d,c,b,e){return b*(d/=e)*d*d*d*d+c},easeOutQuint:function(a,d,c,b,e){return b*((d=d/e-1)*d*d*d*d+1)+c},easeInOutQuint:function(a,d,c,b,e){if((d/=e/2)<1)return b/2*d*d*d*d*d+c;return b/2*((d-=2)*d*d*d*d+2)+c},easeInSine:function(a,
d,c,b,e){return-b*Math.cos(d/e*(Math.PI/2))+b+c},easeOutSine:function(a,d,c,b,e){return b*Math.sin(d/e*(Math.PI/2))+c},easeInOutSine:function(a,d,c,b,e){return-b/2*(Math.cos(Math.PI*d/e)-1)+c},easeInExpo:function(a,d,c,b,e){return d==0?c:b*Math.pow(2,10*(d/e-1))+c},easeOutExpo:function(a,d,c,b,e){return d==e?c+b:b*(-Math.pow(2,-10*d/e)+1)+c},easeInOutExpo:function(a,d,c,b,e){if(d==0)return c;if(d==e)return c+b;if((d/=e/2)<1)return b/2*Math.pow(2,10*(d-1))+c;return b/2*(-Math.pow(2,-10*--d)+2)+c},
easeInCirc:function(a,d,c,b,e){return-b*(Math.sqrt(1-(d/=e)*d)-1)+c},easeOutCirc:function(a,d,c,b,e){return b*Math.sqrt(1-(d=d/e-1)*d)+c},easeInOutCirc:function(a,d,c,b,e){if((d/=e/2)<1)return-b/2*(Math.sqrt(1-d*d)-1)+c;return b/2*(Math.sqrt(1-(d-=2)*d)+1)+c},easeInElastic:function(a,d,c,b,e){a=1.70158;var f=0,g=b;if(d==0)return c;if((d/=e)==1)return c+b;f||(f=e*0.3);if(g<Math.abs(b)){g=b;a=f/4}else a=f/(2*Math.PI)*Math.asin(b/g);return-(g*Math.pow(2,10*(d-=1))*Math.sin((d*e-a)*2*Math.PI/f))+c},easeOutElastic:function(a,
d,c,b,e){a=1.70158;var f=0,g=b;if(d==0)return c;if((d/=e)==1)return c+b;f||(f=e*0.3);if(g<Math.abs(b)){g=b;a=f/4}else a=f/(2*Math.PI)*Math.asin(b/g);return g*Math.pow(2,-10*d)*Math.sin((d*e-a)*2*Math.PI/f)+b+c},easeInOutElastic:function(a,d,c,b,e){a=1.70158;var f=0,g=b;if(d==0)return c;if((d/=e/2)==2)return c+b;f||(f=e*0.3*1.5);if(g<Math.abs(b)){g=b;a=f/4}else a=f/(2*Math.PI)*Math.asin(b/g);if(d<1)return-0.5*g*Math.pow(2,10*(d-=1))*Math.sin((d*e-a)*2*Math.PI/f)+c;return g*Math.pow(2,-10*(d-=1))*Math.sin((d*
e-a)*2*Math.PI/f)*0.5+b+c},easeInBack:function(a,d,c,b,e,f){if(f==undefined)f=1.70158;return b*(d/=e)*d*((f+1)*d-f)+c},easeOutBack:function(a,d,c,b,e,f){if(f==undefined)f=1.70158;return b*((d=d/e-1)*d*((f+1)*d+f)+1)+c},easeInOutBack:function(a,d,c,b,e,f){if(f==undefined)f=1.70158;if((d/=e/2)<1)return b/2*d*d*(((f*=1.525)+1)*d-f)+c;return b/2*((d-=2)*d*(((f*=1.525)+1)*d+f)+2)+c},easeInBounce:function(a,d,c,b,e){return b-jQuery.easing.easeOutBounce(a,e-d,0,b,e)+c},easeOutBounce:function(a,d,c,b,e){return(d/=
e)<1/2.75?b*7.5625*d*d+c:d<2/2.75?b*(7.5625*(d-=1.5/2.75)*d+0.75)+c:d<2.5/2.75?b*(7.5625*(d-=2.25/2.75)*d+0.9375)+c:b*(7.5625*(d-=2.625/2.75)*d+0.984375)+c},easeInOutBounce:function(a,d,c,b,e){if(d<e/2)return jQuery.easing.easeInBounce(a,d*2,0,b,e)*0.5+c;return jQuery.easing.easeOutBounce(a,d*2-e,0,b,e)*0.5+b*0.5+c}});(function(a){a.fn.enhancedField=function(d){a.extend({},a.fn.enhancedField.defaults,d);var c="placeholder"in document.createElement("input");return this.each(function(){var b=a(this);c||b.addClass("notnative");b.bind("blur keyup",function(){a(this).val()==""?a(this).addClass("placeholder"):a(this).removeClass("placeholder")}).blur();b.focus(function(){a(this).removeClass("placeholder")})})};a.fn.enhancedField.defaults={}})(jQuery);(function(a){a.facebox=function(m,o){a.facebox.loading();if(m.ajax)h(m.ajax,o);else if(m.image)g(m.image,o);else if(m.div)f(m.div,o);else a.isFunction(m)?m.call(a):a.facebox.reveal(m,o)};a.extend(a.facebox,{settings:{opacity:0.2,overlay:true,loadingImage:"/facebox/loading.gif",closeImage:"/facebox/closelabel.png",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <div class="content">         </div>         <a href="#" class="close"></a>       </div>     </div>'},
loading:function(){d();if(a("#facebox .loading").length==1)return true;l();a("#facebox .content").empty().append('<div class="loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>');a("#facebox").show().css({top:c()[1]+b()/10,left:a(window).width()/2-a("#facebox .popup").outerWidth()/2});a(document).bind("keydown.facebox",function(m){m.keyCode==27&&a.facebox.close();return true});a(document).trigger("loading.facebox")},reveal:function(m,o){a(document).trigger("beforeReveal.facebox");o&&
a("#facebox .content").addClass(o);a("#facebox .content").append(m);a("#facebox .loading").remove();a("#facebox .popup").children().fadeIn("normal");a("#facebox").css("left",a(window).width()/2-a("#facebox .popup").outerWidth()/2);a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){a(document).trigger("close.facebox");return false}});a.fn.facebox=function(m){if(a(this).length!=0){function o(){a.facebox.loading(true);var p=this.rel.match(/facebox\[?\.(\w+)\]?/);if(p)p=
p[1];f(this.href,p);return false}d(m);return this.bind("click.facebox",o)}};function d(m){if(a.facebox.settings.inited)return true;else a.facebox.settings.inited=true;a(document).trigger("init.facebox");e();var o=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=new RegExp(".("+o+")$","i");m&&a.extend(a.facebox.settings,m);a("body").append(a.facebox.settings.faceboxHtml);var p=[new Image,new Image];p[0].src=a.facebox.settings.closeImage;p[1].src=a.facebox.settings.loadingImage;
a("#facebox").find(".b:first, .bl").each(function(){p.push(new Image);p.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,"$1")});a("#facebox .close").click(a.facebox.close).append('<img src="'+a.facebox.settings.closeImage+'" class="close_image" title="close">')}function c(){var m,o;if(self.pageYOffset){o=self.pageYOffset;m=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){o=document.documentElement.scrollTop;m=document.documentElement.scrollLeft}else if(document.body){o=
document.body.scrollTop;m=document.body.scrollLeft}return new Array(m,o)}function b(){var m;if(self.innerHeight)m=self.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)m=document.documentElement.clientHeight;else if(document.body)m=document.body.clientHeight;return m}function e(){var m=a.facebox.settings;m.loadingImage=m.loading_image||m.loadingImage;m.closeImage=m.close_image||m.closeImage;m.imageTypes=m.image_types||m.imageTypes;m.faceboxHtml=m.facebox_html||m.faceboxHtml}
function f(m,o){if(m.match(/#/)){var p=window.location.href.split("#")[0];m=m.replace(p,"");m!="#"&&a.facebox.reveal(a(m).html(),o)}else m.match(a.facebox.settings.imageTypesRegexp)?g(m,o):h(m,o)}function g(m,o){var p=new Image;p.onload=function(){a.facebox.reveal('<div class="image"><img src="'+p.src+'" /></div>',o)};p.src=m}function h(m,o){a.get(m,function(p){a.facebox.reveal(p,o)})}function j(){return a.facebox.settings.overlay==false||a.facebox.settings.opacity===null}function l(){if(!j()){a("#facebox_overlay").length==
0&&a("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');a("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",a.facebox.settings.opacity).click(function(){a(document).trigger("close.facebox")}).fadeIn(200);return false}}function k(){if(!j()){a("#facebox_overlay").fadeOut(200,function(){a("#facebox_overlay").removeClass("facebox_overlayBG");a("#facebox_overlay").addClass("facebox_hide");a("#facebox_overlay").remove()});return false}}a(document).bind("close.facebox",
function(){a(document).unbind("keydown.facebox");a("#facebox").fadeOut(function(){a("#facebox .content").removeClass().addClass("content");a("#facebox .loading").remove();a(document).trigger("afterClose.facebox")});k()})})(jQuery);(function(a){a.fn.ajaxSubmit=function(b){if(typeof b=="function")b={success:b};b=a.extend({url:this.attr("action")||window.location.toString(),type:this.attr("method")||"GET"},b||{});var e={};a.event.trigger("form.pre.serialize",[this,b,e]);if(e.veto)return this;var f=this.formToArray(b.semantic);if(b.data)for(var g in b.data)f.push({name:g,value:b.data[g]});if(b.beforeSubmit&&b.beforeSubmit(f,this,b)===false)return this;a.event.trigger("form.submit.validate",[f,this,b,e]);if(e.veto)return this;e=
a.param(f);if(b.type.toUpperCase()=="GET"){b.url+=(b.url.indexOf("?")>=0?"&":"?")+e;b.data=null}else b.data=e;var h=this,j=[];b.resetForm&&j.push(function(){h.resetForm()});b.clearForm&&j.push(function(){h.clearForm()});if(!b.dataType&&b.target){var l=b.success||function(){};j.push(function(m){this.evalScripts?a(b.target).attr("innerHTML",m).evalScripts().each(l,arguments):a(b.target).html(m).each(l,arguments)})}else b.success&&j.push(b.success);b.success=function(m,o){for(var p=0,q=j.length;p<q;p++)j[p](m,
o,h)};e=a("input:file",this).fieldValue();f=false;for(g=0;g<e.length;g++)if(e[g])f=true;if(b.iframe||f)a.browser.safari&&b.closeKeepAlive?a.get(b.closeKeepAlive,k):k();else a.ajax(b);a.event.trigger("form.submit.notify",[this,b]);return this;function k(){var m=h[0],o=a.extend({},a.ajaxSettings,b),p="jqFormIO"+a.fn.ajaxSubmit.counter++,q=a('<iframe id="'+p+'" name="'+p+'" />'),v=q[0],r=a.browser.opera&&window.opera.version()<9;if(a.browser.msie||r)v.src='javascript:false;document.write("");';q.css({position:"absolute",
top:"-1000px",left:"-1000px"});var n={responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}},s=o.global;s&&!a.active++&&a.event.trigger("ajaxStart");s&&a.event.trigger("ajaxSend",[n,o]);var t=0,x=0;setTimeout(function(){var y=m.encoding?"encoding":"enctype",w=h.attr("target"),G=h.attr("action");h.attr({target:p,method:"POST",action:o.url});m[y]="multipart/form-data";o.timeout&&setTimeout(function(){x=
true;F()},o.timeout);q.appendTo("body");v.attachEvent?v.attachEvent("onload",F):v.addEventListener("load",F,false);m.submit();h.attr({action:G,target:w})},10);function F(){if(!t++){v.detachEvent?v.detachEvent("onload",F):v.removeEventListener("load",F,false);var y=true;try{if(x)throw"timeout";var w,G;G=v.contentWindow?v.contentWindow.document:v.contentDocument?v.contentDocument:v.document;n.responseText=G.body?G.body.innerHTML:null;n.responseXML=G.XMLDocument?G.XMLDocument:G;if(o.dataType=="json"||
o.dataType=="script"){var u=G.getElementsByTagName("textarea")[0];w=u?u.value:n.responseText;o.dataType=="json"?eval("data = "+w):a.globalEval(w)}else if(o.dataType=="xml"){w=n.responseXML;if(!w&&n.responseText!=null)w=K(n.responseText)}else w=n.responseText}catch(z){y=false;a.handleError(o,n,"error",z)}if(y){o.success(w,"success");s&&a.event.trigger("ajaxSuccess",[n,o])}s&&a.event.trigger("ajaxComplete",[n,o]);s&&!--a.active&&a.event.trigger("ajaxStop");if(o.complete)o.complete(n,y?"success":"error");
setTimeout(function(){q.remove();n.responseXML=null},100)}}function K(y,w){if(window.ActiveXObject){w=new ActiveXObject("Microsoft.XMLDOM");w.async="false";w.loadXML(y)}else w=(new DOMParser).parseFromString(y,"text/xml");return w&&w.documentElement&&w.documentElement.tagName!="parsererror"?w:null}}};a.fn.ajaxSubmit.counter=0;a.fn.ajaxForm=function(b){return this.ajaxFormUnbind().submit(c).each(function(){this.formPluginId=a.fn.ajaxForm.counter++;a.fn.ajaxForm.optionHash[this.formPluginId]=b;a(":submit,input:image",
this).click(d)})};a.fn.ajaxForm.counter=1;a.fn.ajaxForm.optionHash={};function d(b){var e=this.form;e.clk=this;if(this.type=="image")if(b.offsetX!=undefined){e.clk_x=b.offsetX;e.clk_y=b.offsetY}else if(typeof a.fn.offset=="function"){var f=a(this).offset();e.clk_x=b.pageX-f.left;e.clk_y=b.pageY-f.top}else{e.clk_x=b.pageX-this.offsetLeft;e.clk_y=b.pageY-this.offsetTop}setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},10)}function c(){var b=this.formPluginId;b=a.fn.ajaxForm.optionHash[b];a(this).ajaxSubmit(b);
return false}a.fn.ajaxFormUnbind=function(){this.unbind("submit",c);return this.each(function(){a(":submit,input:image",this).unbind("click",d)})};a.fn.formToArray=function(b){var e=[];if(this.length==0)return e;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return e;for(var h=0,j=g.length;h<j;h++){var l=g[h],k=l.name;if(k)if(b&&f.clk&&l.type=="image")!l.disabled&&f.clk==l&&e.push({name:k+".x",value:f.clk_x},{name:k+".y",value:f.clk_y});else if((l=a.fieldValue(l,true))&&l.constructor==
Array)for(var m=0,o=l.length;m<o;m++)e.push({name:k,value:l[m]});else l!==null&&typeof l!="undefined"&&e.push({name:k,value:l})}if(!b&&f.clk){b=f.getElementsByTagName("input");h=0;for(j=b.length;h<j;h++){g=b[h];(k=g.name)&&!g.disabled&&g.type=="image"&&f.clk==g&&e.push({name:k+".x",value:f.clk_x},{name:k+".y",value:f.clk_y})}}return e};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var e=[];this.each(function(){var f=this.name;if(f){var g=a.fieldValue(this,
b);if(g&&g.constructor==Array)for(var h=0,j=g.length;h<j;h++)e.push({name:f,value:g[h]});else g!==null&&typeof g!="undefined"&&e.push({name:this.name,value:g})}});return a.param(e)};a.fn.fieldValue=function(b){for(var e=[],f=0,g=this.length;f<g;f++){var h=this[f];h=a.fieldValue(h,b);h===null||typeof h=="undefined"||h.constructor==Array&&!h.length||(h.constructor==Array?a.merge(e,h):e.push(h))}return e};a.fieldValue=function(b,e){var f=b.name,g=b.type,h=b.tagName.toLowerCase();if(typeof e=="undefined")e=
true;if(e&&(!f||b.disabled||g=="reset"||g=="button"||(g=="checkbox"||g=="radio")&&!b.checked||(g=="submit"||g=="image")&&b.form&&b.form.clk!=b||h=="select"&&b.selectedIndex==-1))return null;if(h=="select"){h=b.selectedIndex;if(h<0)return null;e=[];b=b.options;f=(g=g=="select-one")?h+1:b.length;for(h=g?h:0;h<f;h++){var j=b[h];if(j.selected){j=a.browser.msie&&!j.attributes.value.specified?j.text:j.value;if(g)return j;e.push(j)}}return e}return b.value};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",
this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var b=this.type,e=this.tagName.toLowerCase();if(b=="text"||b=="password"||e=="textarea")this.value="";else if(b=="checkbox"||b=="radio")this.checked=false;else if(e=="select")this.selectedIndex=-1})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};a.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=
!b})};a.fn.select=function(b){if(b==undefined)b=true;return this.each(function(){var e=this.type;if(e=="checkbox"||e=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option"){e=a(this).parent("select");b&&e[0]&&e[0].type=="select-one"&&e.find("option").select(false);this.selected=b}})}})(jQuery);(function(a){a.fn.gfmPreview=function(d){d=d||{};var c=a("<div>").attr("class","gfm-preview").text("Preview goes here"),b=this;b.after(c);var e=false;b.keyup(function(){e=true});setInterval(function(){if(e){e=false;var f=b.val();a.post("/preview",{text:f},function(g){c.html(g)})}},2000)}})(jQuery);
(function(a){a.fn.gfmPreview=function(d){var c=a.extend({},a.fn.gfmPreview.defaults,d);return this.each(function(){var b=false,e=a(this),f=a("<div>").attr("class","gfm-preview").text("Preview goes here"),g=c.outputContainer||f;c.outputContainer==null&&e.after(f);var h=false;e.keyup(function(){h=true;if(!b){c.onInit.call(this);b=true}});setInterval(function(){if(h){h=false;var j=e.val();a.post("/preview",{text:j},function(l){g.html(l)})}},c.refresh)})};a.fn.gfmPreview.defaults={outputContainer:null,
refresh:2000,onInit:function(){}}})(jQuery);(function(a){a.fn.assigneeFilter=function(d){var c=this,b=c.find("li"),e=b.map(function(){return a(this).text().toLowerCase()});c.find(".js-assignee-filter-submit").live("click",function(g){d(g);g.preventDefault()});c.find(".js-assignee-filter").keydown(function(g){switch(g.which){case 9:case 38:case 40:return false;case 13:d(g);return false}}).keyup(function(g){c.find(".selected").removeClass("selected");var h=c.find(".current:visible"),j=null;switch(g.which){case 9:case 16:case 17:case 18:case 91:case 93:case 13:c.find(".current label").trigger("click");
return false;case 38:case 40:if(h.length==0){f(c.find("li:visible:first"));return false}j=g.which==38?h.prevAll(":visible:first"):h.nextAll(":visible:first");j.length&&f(j);return false}var l=a.trim(a(this).val().toLowerCase()),k=[];if(!l){c.find(".current").removeClass("current");return b.show()}b.hide();e.each(function(m){var o=this.score(l);o>0&&k.push([o,m])});a.each(k.sort(function(m,o){return o[0]-m[0]}),function(){a(b[this[1]]).show()});c.find(".current:visible").length==0&&f(c.find("li:visible:first"))});
function f(g){c.find(".current").removeClass("current");c.find(":checked").removeAttr("checked");g.addClass("current");g.find(":radio").attr("checked","checked")}return c}})(jQuery);(function(a){a.fn.cardsSelect=function(d){a.extend({},a.fn.cardsSelect.defaults,d);return this.each(function(){var c=a(this),b=c.next("dl.form").find("input[type=text]"),e=c.find(".card"),f=c.find("input[name='billing[type]']");function g(h){e.each(function(){var j=a(this);j.attr("data-name")==h?j.removeClass("disabled"):j.addClass("disabled");f.val(h)})}b.bind("keyup blur",function(){var h=a(this).val();if(h.match(/^5[1-5]/))g("master");else if(h.match(/^4/))g("visa");else if(h.match(/^3(4|7)/))g("american_express");
else if(h.match(/^6011/))g("discover");else if(h.match(/^(3|2131|1800)/))g("jcb");else if(h.match(/^(30[0-5]|36|38)/))g("diners");else{e.removeClass("disabled");f.val("")}}).keyup()})};a.fn.cardsSelect.defaults={}})(jQuery);$.fn.contextButton=function(a,d){return $(this).delegate(a,"click",function(){var c=$(this),b=$.extend({contextPaneSelector:c.attr("data-context-pane"),anchorTo:"left"},d),e=$(b.contextPaneSelector);function f(){$(document).unbind("keydown.context-button");$("#context-overlay").remove();e.hide();c.removeClass("selected")}if(e.is(":visible"))f();else{var g=c.offset(),h;if(b.anchorTo=="left")h={left:g.left,top:g.top+c.outerHeight(true)+5};else if(b.anchorTo=="right")h={left:g.left-(e.outerWidth(true)-
c.outerWidth(true)),top:g.top+c.outerHeight(true)+5};e.css(h);$(document).bind("keydown.context-button",function(j){j.keyCode==27&&c.click()});$("body").append('<div id="context-overlay"></div>');$("#context-overlay").click(f).css("position","fixed").css("top",0).css("left",0).css("height","100%").css("width","100%");e.show();c.addClass("selected");c.trigger("show.context-button")}e.find("a.close").live("click",f);e.bind("close.context-button",f)})};$(document).contextButton(".js-context-button");(function(a,d){function c(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.10",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(b,e){return typeof b==="number"?this.each(function(){var f=this;setTimeout(function(){a(f).focus();e&&e.call(f)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(b){if(b!==d)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var e;b.length&&b[0]!==document;){e=b.css("position");
if(e==="absolute"||e==="relative"||e==="fixed"){e=parseInt(b.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}b=b.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(b,e){function f(l,k,m,o){a.each(g,function(){k-=parseFloat(a.curCSS(l,"padding"+this,true))||0;if(m)k-=parseFloat(a.curCSS(l,
"border"+this+"Width",true))||0;if(o)k-=parseFloat(a.curCSS(l,"margin"+this,true))||0});return k}var g=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+e]=function(l){if(l===d)return j["inner"+e].call(this);return this.each(function(){a(this).css(h,f(this,l)+"px")})};a.fn["outer"+e]=function(l,k){if(typeof l!=="number")return j["outer"+e].call(this,l);return this.each(function(){a(this).css(h,
f(this,l,true,k)+"px")})}});a.extend(a.expr[":"],{data:function(b,e,f){return!!a.data(b,f[3])},focusable:function(b){var e=b.nodeName.toLowerCase(),f=a.attr(b,"tabindex");if("area"===e){e=b.parentNode;f=e.name;if(!b.href||!f||e.nodeName.toLowerCase()!=="map")return false;b=a("img[usemap=#"+f+"]")[0];return!!b&&c(b)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||!isNaN(f):!isNaN(f))&&c(b)},tabbable:function(b){var e=a.attr(b,"tabindex");return(isNaN(e)||e>=0)&&a(b).is(":focusable")}});
a(function(){var b=document.body,e=b.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart"in e;b.removeChild(e).style.display="none"});a.extend(a.ui,{plugin:{add:function(b,e,f){b=a.ui[b].prototype;for(var g in f){b.plugins[g]=b.plugins[g]||[];b.plugins[g].push([e,f[g]])}},call:function(b,e,f){if((e=b.plugins[e])&&b.element[0].parentNode)for(var g=0;g<e.length;g++)b.options[e[g][0]]&&
e[g][1].apply(b.element,f)}},contains:function(b,e){return document.compareDocumentPosition?b.compareDocumentPosition(e)&16:b!==e&&b.contains(e)},hasScroll:function(b,e){if(a(b).css("overflow")==="hidden")return false;e=e&&e==="left"?"scrollLeft":"scrollTop";var f=false;if(b[e]>0)return true;b[e]=1;f=b[e]>0;b[e]=0;return f},isOverAxis:function(b,e,f){return b>e&&b<e+f},isOver:function(b,e,f,g,h,j){return a.ui.isOverAxis(b,f,h)&&a.ui.isOverAxis(e,g,j)}})}})(jQuery);
(function(a,d){if(a.cleanData){var c=a.cleanData;a.cleanData=function(e){for(var f=0,g;(g=e[f])!=null;f++)a(g).triggerHandler("remove");c(e)}}else{var b=a.fn.remove;a.fn.remove=function(e,f){return this.each(function(){if(!f)if(!e||a.filter(e,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return b.call(a(this),e,f)})}}a.widget=function(e,f,g){var h=e.split(".")[0],j;e=e.split(".")[1];j=h+"-"+e;if(!g){g=f;f=a.Widget}a.expr[":"][j]=function(l){return!!a.data(l,
e)};a[h]=a[h]||{};a[h][e]=function(l,k){arguments.length&&this._createWidget(l,k)};f=new f;f.options=a.extend(true,{},f.options);a[h][e].prototype=a.extend(true,f,{namespace:h,widgetName:e,widgetEventPrefix:a[h][e].prototype.widgetEventPrefix||e,widgetBaseClass:j},g);a.widget.bridge(e,a[h][e])};a.widget.bridge=function(e,f){a.fn[e]=function(g){var h=typeof g==="string",j=Array.prototype.slice.call(arguments,1),l=this;g=!h&&j.length?a.extend.apply(null,[true,g].concat(j)):g;if(h&&g.charAt(0)==="_")return l;
h?this.each(function(){var k=a.data(this,e),m=k&&a.isFunction(k[g])?k[g].apply(k,j):k;if(m!==k&&m!==d){l=m;return false}}):this.each(function(){var k=a.data(this,e);k?k.option(g||{})._init():a.data(this,e,new f(g,this))});return l}};a.Widget=function(e,f){arguments.length&&this._createWidget(e,f)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(e,f){a.data(f,this.widgetName,this);this.element=a(f);this.options=a.extend(true,{},this.options,
this._getCreateOptions(),e);var g=this;this.element.bind("remove."+this.widgetName,function(){g.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(e,f){var g=e;if(arguments.length===0)return a.extend({},this.options);if(typeof e==="string"){if(f===d)return this.options[e];g={};g[e]=f}this._setOptions(g);return this},_setOptions:function(e){var f=this;a.each(e,function(g,h){f._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled")this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(e,f,g){var h=this.options[e];f=a.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();g=g||{};if(f.originalEvent){e=a.event.props.length;for(var j;e;){j=a.event.props[--e];f[j]=f.originalEvent[j]}}this.element.trigger(f,g);return!(a.isFunction(h)&&h.call(this.element[0],f,g)===false||f.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(c){return d._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(true===a.data(c.target,d.widgetName+".preventClickEvent")){a.removeData(c.target,d.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(d){d.originalEvent=
d.originalEvent||{};if(!d.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,b=d.which==1,e=typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false;if(!b||e||!this._mouseCapture(d))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=
this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();return true}}this._mouseMoveDelegate=function(f){return c._mouseMove(f)};this._mouseUpDelegate=function(f){return c._mouseUp(f)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return d.originalEvent.mouseHandled=true}},_mouseMove:function(d){if(a.browser.msie&&!(document.documentMode>=9)&&!d.button)return this._mouseUp(d);if(this._mouseStarted){this._mouseDrag(d);
return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==false)?this._mouseDrag(d):this._mouseUp(d);return!this._mouseStarted},_mouseUp:function(d){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;d.target==this._mouseDownEvent.target&&a.data(d.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var d=/left|center|right/,c=/top|center|bottom/,b=a.fn.position,e=a.fn.offset;a.fn.position=function(f){if(!f||!f.of)return b.apply(this,arguments);f=a.extend({},f);var g=a(f.of),h=g[0],j=(f.collision||"flip").split(" "),l=f.offset?f.offset.split(" "):[0,0],k,m,o;if(h.nodeType===9){k=g.width();m=g.height();o={top:0,left:0}}else if(h.setTimeout){k=g.width();m=g.height();o={top:g.scrollTop(),left:g.scrollLeft()}}else if(h.preventDefault){f.at="left top";k=m=0;o={top:f.of.pageY,
left:f.of.pageX}}else{k=g.outerWidth();m=g.outerHeight();o=g.offset()}a.each(["my","at"],function(){var p=(f[this]||"").split(" ");if(p.length===1)p=d.test(p[0])?p.concat(["center"]):c.test(p[0])?["center"].concat(p):["center","center"];p[0]=d.test(p[0])?p[0]:"center";p[1]=c.test(p[1])?p[1]:"center";f[this]=p});if(j.length===1)j[1]=j[0];l[0]=parseInt(l[0],10)||0;if(l.length===1)l[1]=l[0];l[1]=parseInt(l[1],10)||0;if(f.at[0]==="right")o.left+=k;else if(f.at[0]==="center")o.left+=k/2;if(f.at[1]==="bottom")o.top+=
m;else if(f.at[1]==="center")o.top+=m/2;o.left+=l[0];o.top+=l[1];return this.each(function(){var p=a(this),q=p.outerWidth(),v=p.outerHeight(),r=parseInt(a.curCSS(this,"marginLeft",true))||0,n=parseInt(a.curCSS(this,"marginTop",true))||0,s=q+r+(parseInt(a.curCSS(this,"marginRight",true))||0),t=v+n+(parseInt(a.curCSS(this,"marginBottom",true))||0),x=a.extend({},o),F;if(f.my[0]==="right")x.left-=q;else if(f.my[0]==="center")x.left-=q/2;if(f.my[1]==="bottom")x.top-=v;else if(f.my[1]==="center")x.top-=
v/2;x.left=Math.round(x.left);x.top=Math.round(x.top);F={left:x.left-r,top:x.top-n};a.each(["left","top"],function(K,y){a.ui.position[j[K]]&&a.ui.position[j[K]][y](x,{targetWidth:k,targetHeight:m,elemWidth:q,elemHeight:v,collisionPosition:F,collisionWidth:s,collisionHeight:t,offset:l,my:f.my,at:f.at})});a.fn.bgiframe&&p.bgiframe();p.offset(a.extend(x,{using:f.using}))})};a.ui.position={fit:{left:function(f,g){var h=a(window);h=g.collisionPosition.left+g.collisionWidth-h.width()-h.scrollLeft();f.left=
h>0?f.left-h:Math.max(f.left-g.collisionPosition.left,f.left)},top:function(f,g){var h=a(window);h=g.collisionPosition.top+g.collisionHeight-h.height()-h.scrollTop();f.top=h>0?f.top-h:Math.max(f.top-g.collisionPosition.top,f.top)}},flip:{left:function(f,g){if(g.at[0]!=="center"){var h=a(window);h=g.collisionPosition.left+g.collisionWidth-h.width()-h.scrollLeft();var j=g.my[0]==="left"?-g.elemWidth:g.my[0]==="right"?g.elemWidth:0,l=g.at[0]==="left"?g.targetWidth:-g.targetWidth,k=-2*g.offset[0];f.left+=
g.collisionPosition.left<0?j+l+k:h>0?j+l+k:0}},top:function(f,g){if(g.at[1]!=="center"){var h=a(window);h=g.collisionPosition.top+g.collisionHeight-h.height()-h.scrollTop();var j=g.my[1]==="top"?-g.elemHeight:g.my[1]==="bottom"?g.elemHeight:0,l=g.at[1]==="top"?g.targetHeight:-g.targetHeight,k=-2*g.offset[1];f.top+=g.collisionPosition.top<0?j+l+k:h>0?j+l+k:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(f,g){if(/static/.test(a.curCSS(f,"position")))f.style.position="relative";var h=a(f),
j=h.offset(),l=parseInt(a.curCSS(f,"top",true),10)||0,k=parseInt(a.curCSS(f,"left",true),10)||0;j={top:g.top-j.top+l,left:g.left-j.left+k};"using"in g?g.using.call(f,j):h.css(j)};a.fn.offset=function(f){var g=this[0];if(!g||!g.ownerDocument)return null;if(f)return this.each(function(){a.offset.setOffset(this,f)});return e.call(this)}}})(jQuery);
(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(d){var c=
this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(d);if(!this.handle)return false;return true},_mouseStart:function(d){var c=this.options;this.helper=this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();
a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true},_mouseDrag:function(d,c){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false},_mouseStop:function(d){var c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour)c=a.ui.ddmanager.drop(this,d);if(this.dropped){c=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===true||a.isFunction(this.options.revert)&&
this.options.revert.call(this.element,c)){var b=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){b._trigger("stop",d)!==false&&b._clear()})}else this._trigger("stop",d)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
d.target)c=true});return c},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone():this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string")d=d.split(" ");if(a.isArray(d))d={left:+d[0],top:+d[1]||
0};if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=d.top+this.margins.top;if("bottom"in d)this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)d={top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=this.element.position();return{top:d.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment==
"parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[(d.containment=="document"?0:a(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(d.containment=="document"?0:a(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(d.containment=="document"?0:a(window).scrollLeft())+a(d.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d.containment=="document"?
0:a(window).scrollTop())+(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)&&d.containment.constructor!=Array){var c=a(d.containment)[0];if(c){d=a(d.containment).offset();var b=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),
10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(d.containment.constructor==
Array)this.containment=d.containment},_convertPositionTo:function(d,c){if(!c)c=this.position;d=d=="absolute"?1:-1;var b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(b[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
e?0:b.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:b.scrollLeft())*d)}},_generatePosition:function(d){var c=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(b[0].tagName),f=d.pageX,g=d.pageY;
if(this.originalPosition){if(this.containment){if(d.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+this.offset.click.left;if(d.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(d.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(d.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(c.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/
c.grid[1])*c.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-c.grid[1]:g+c.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-c.grid[0]:f+c.grid[0]:f}}return{top:g-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:b.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:b.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=
this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,c,b){b=b||this._uiHash();a.ui.plugin.call(this,d,[c,b]);if(d=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,d,c,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.10"});a.ui.plugin.add("draggable",
"connectToSortable",{start:function(d,c){var b=a(this).data("draggable"),e=b.options,f=a.extend({},c,{item:b.element});b.sortables=[];a(e.connectToSortable).each(function(){var g=a.data(this,"sortable");if(g&&!g.options.disabled){b.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",d,f)}})},stop:function(d,c){var b=a(this).data("draggable"),e=a.extend({},c,{item:b.element});a.each(b.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;b.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;b.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,e)}})},drag:function(d,c){var b=a(this).data("draggable"),e=this;a.each(b.sortables,function(){this.instance.positionAbs=
b.positionAbs;this.instance.helperProportions=b.helperProportions;this.instance.offset.click=b.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(e).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return c.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,
true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=b.offset.click.top;this.instance.offset.click.left=b.offset.click.left;this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top;b._trigger("toSortable",d);b.dropped=this.instance.element;b.currentItem=b.element;this.instance.fromOutside=b}this.instance.currentItem&&this.instance._mouseDrag(d)}else if(this.instance.isOver){this.instance.isOver=
0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();b._trigger("fromSortable",d);b.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;if(d.css("cursor"))c._cursor=
d.css("cursor");d.css("cursor",c.cursor)},stop:function(){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}});a.ui.plugin.add("draggable","iframeFix",{start:function(){var d=a(this).data("draggable").options;a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")})},
stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("opacity"))c._opacity=d.css("opacity");d.css("opacity",c.opacity)},stop:function(d,c){d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var d=a(this).data("draggable");if(d.scrollParent[0]!=
document&&d.scrollParent[0].tagName!="HTML")d.overflowOffset=d.scrollParent.offset()},drag:function(d){var c=a(this).data("draggable"),b=c.options,e=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!b.axis||b.axis!="x")if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-d.pageY<b.scrollSensitivity)c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+b.scrollSpeed;else if(d.pageY-c.overflowOffset.top<b.scrollSensitivity)c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-
b.scrollSpeed;if(!b.axis||b.axis!="y")if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-d.pageX<b.scrollSensitivity)c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+b.scrollSpeed;else if(d.pageX-c.overflowOffset.left<b.scrollSensitivity)c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(!b.axis||b.axis!="x")if(d.pageY-a(document).scrollTop()<b.scrollSensitivity)e=a(document).scrollTop(a(document).scrollTop()-b.scrollSpeed);else if(a(window).height()-
(d.pageY-a(document).scrollTop())<b.scrollSensitivity)e=a(document).scrollTop(a(document).scrollTop()+b.scrollSpeed);if(!b.axis||b.axis!="y")if(d.pageX-a(document).scrollLeft()<b.scrollSensitivity)e=a(document).scrollLeft(a(document).scrollLeft()-b.scrollSpeed);else if(a(window).width()-(d.pageX-a(document).scrollLeft())<b.scrollSensitivity)e=a(document).scrollLeft(a(document).scrollLeft()+b.scrollSpeed)}e!==false&&a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,d)}});a.ui.plugin.add("draggable",
"snap",{start:function(){var d=a(this).data("draggable"),c=d.options;d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var b=a(this),e=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:e.top,left:e.left})})},drag:function(d,c){for(var b=a(this).data("draggable"),e=b.options,f=e.snapTolerance,g=c.offset.left,h=g+b.helperProportions.width,j=c.offset.top,l=j+b.helperProportions.height,k=
b.snapElements.length-1;k>=0;k--){var m=b.snapElements[k].left,o=m+b.snapElements[k].width,p=b.snapElements[k].top,q=p+b.snapElements[k].height;if(m-f<g&&g<o+f&&p-f<j&&j<q+f||m-f<g&&g<o+f&&p-f<l&&l<q+f||m-f<h&&h<o+f&&p-f<j&&j<q+f||m-f<h&&h<o+f&&p-f<l&&l<q+f){if(e.snapMode!="inner"){var v=Math.abs(p-l)<=f,r=Math.abs(q-j)<=f,n=Math.abs(m-h)<=f,s=Math.abs(o-g)<=f;if(v)c.position.top=b._convertPositionTo("relative",{top:p-b.helperProportions.height,left:0}).top-b.margins.top;if(r)c.position.top=b._convertPositionTo("relative",
{top:q,left:0}).top-b.margins.top;if(n)c.position.left=b._convertPositionTo("relative",{top:0,left:m-b.helperProportions.width}).left-b.margins.left;if(s)c.position.left=b._convertPositionTo("relative",{top:0,left:o}).left-b.margins.left}var t=v||r||n||s;if(e.snapMode!="outer"){v=Math.abs(p-j)<=f;r=Math.abs(q-l)<=f;n=Math.abs(m-g)<=f;s=Math.abs(o-h)<=f;if(v)c.position.top=b._convertPositionTo("relative",{top:p,left:0}).top-b.margins.top;if(r)c.position.top=b._convertPositionTo("relative",{top:q-b.helperProportions.height,
left:0}).top-b.margins.top;if(n)c.position.left=b._convertPositionTo("relative",{top:0,left:m}).left-b.margins.left;if(s)c.position.left=b._convertPositionTo("relative",{top:0,left:o-b.helperProportions.width}).left-b.margins.left}if(!b.snapElements[k].snapping&&(v||r||n||s||t))b.options.snap.snap&&b.options.snap.snap.call(b.element,d,a.extend(b._uiHash(),{snapItem:b.snapElements[k].item}));b.snapElements[k].snapping=v||r||n||s||t}else{b.snapElements[k].snapping&&b.options.snap.release&&b.options.snap.release.call(b.element,
d,a.extend(b._uiHash(),{snapItem:b.snapElements[k].item}));b.snapElements[k].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;d=a.makeArray(a(d.stack)).sort(function(b,e){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(e).css("zIndex"),10)||0)});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+d.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(d,
c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("zIndex"))c._zIndex=d.css("zIndex");d.css("zIndex",c.zIndex)},stop:function(d,c){d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(b){return b.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);
d.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var d=a.ui.ddmanager.droppables[this.options.scope],c=0;c<d.length;c++)d[c]==this&&d.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(d,c){if(d=="accept")this.accept=a.isFunction(c)?c:function(b){return b.is(c)};a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);c&&this._trigger("activate",d,this.ui(c))},_deactivate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",d,this.ui(c))},_over:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",d,this.ui(c))}},_out:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",d,this.ui(c))}},_drop:function(d,c){var b=c||a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0])return false;var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=
a.data(this,"droppable");if(f.options.greedy&&!f.options.disabled&&f.options.scope==b.options.scope&&f.accept.call(f.element[0],b.currentItem||b.element)&&a.ui.intersect(b,a.extend(f,{offset:f.element.offset()}),f.options.tolerance)){e=true;return false}});if(e)return false;if(this.accept.call(this.element[0],b.currentItem||b.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
d,this.ui(b));return this.element}return false},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.10"});a.ui.intersect=function(d,c,b){if(!c.offset)return false;var e=(d.positionAbs||d.position.absolute).left,f=e+d.helperProportions.width,g=(d.positionAbs||d.position.absolute).top,h=g+d.helperProportions.height,j=c.offset.left,l=j+c.proportions.width,k=c.offset.top,m=k+c.proportions.height;switch(b){case "fit":return j<=
e&&f<=l&&k<=g&&h<=m;case "intersect":return j<e+d.helperProportions.width/2&&f-d.helperProportions.width/2<l&&k<g+d.helperProportions.height/2&&h-d.helperProportions.height/2<m;case "pointer":return a.ui.isOver((d.positionAbs||d.position.absolute).top+(d.clickOffset||d.offset.click).top,(d.positionAbs||d.position.absolute).left+(d.clickOffset||d.offset.click).left,k,j,c.proportions.height,c.proportions.width);case "touch":return(g>=k&&g<=m||h>=k&&h<=m||g<k&&h>m)&&(e>=j&&e<=l||f>=j&&f<=l||e<j&&f>l);
default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(d,c){var b=a.ui.ddmanager.droppables[d.options.scope]||[],e=c?c.type:null,f=(d.currentItem||d.element).find(":data(droppable)").andSelf(),g=0;a:for(;g<b.length;g++)if(!(b[g].options.disabled||d&&!b[g].accept.call(b[g].element[0],d.currentItem||d.element))){for(var h=0;h<f.length;h++)if(f[h]==b[g].element[0]){b[g].proportions.height=0;continue a}b[g].visible=b[g].element.css("display")!="none";if(b[g].visible){b[g].offset=
b[g].element.offset();b[g].proportions={width:b[g].element[0].offsetWidth,height:b[g].element[0].offsetHeight};e=="mousedown"&&b[g]._activate.call(b[g],c)}}},drop:function(d,c){var b=false;a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(d,this,this.options.tolerance))b=b||this._drop.call(this,c);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||d.element)){this.isout=1;
this.isover=0;this._deactivate.call(this,c)}}});return b},drag:function(d,c){d.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(d,c);a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var b=a.ui.intersect(d,this,this.options.tolerance);if(b=!b&&this.isover==1?"isout":b&&this.isover==0?"isover":null){var e;if(this.options.greedy){var f=this.element.parents(":data(droppable):eq(0)");if(f.length){e=a.data(f[0],"droppable");
e.greedyChild=b=="isover"?1:0}}if(e&&b=="isover"){e.isover=0;e.isout=1;e._out.call(e,c)}this[b]=1;this[b=="isout"?"isover":"isout"]=0;this[b=="isover"?"_over":"_out"].call(this,c);if(e&&b=="isout"){e.isout=0;e.isover=1;e._over.call(e,c)}}}})}}})(jQuery);(function(a){a(".comment .edit-button").live("click",function(){var d=a(this).closest(".comment");d.addClass("editing");d.find(".js-autosize").trigger("resize.dynSiz");return false});a(".comment .delete-button").live("click",function(){var d=a(this).closest(".comment"),c=a(this).closest(".js-comment-container");c.length||(c=d);if(confirm("Are you sure you want to delete this?")){d.addClass("loading");d.find("button").attr("disabled",true);d.find(".minibutton").addClass("disabled");a.ajax({type:"DELETE",
url:d.find(".form-content form").attr("action"),complete:function(){d.removeClass("loading");d.find("button").removeAttr("disabled");d.find(".minibutton").removeClass("disabled")},success:function(){c.fadeOut(function(){d.removeClass("editing")})},error:function(){d.addClass("error")}})}return false});a(".comment .cancel").live("click",function(){a(this).closest(".comment").removeClass("editing");return false});a(".comment .form-content form").live("submit",function(){var d=a(this).closest(".comment");
d.addClass("loading");d.find("button").attr("disabled",true);d.find(".minibutton").addClass("disabled");a.ajax({type:"PUT",url:d.find(".form-content form").attr("action"),dataType:"json",data:a(this).serialize(),complete:function(){d.removeClass("loading");d.find("button").removeAttr("disabled");d.find(".minibutton").removeClass("disabled")},success:function(c){c.title&&d.find(".content-title").html(c.title);d.find(".formatted-content .content-body").html(c.body);d.removeClass("editing")},error:function(){d.addClass("error")}});
return false})})(jQuery);(function(a){a.fn.enticeToAction=function(d){var c=a.extend({},a.fn.enticeToAction.defaults,d);return this.each(function(){var b=a(this);b.addClass("entice");b.attr("title",c.title);switch(c.direction){case "downwards":var e="n";case "upwards":e="s";case "rightwards":e="w";case "leftwards":e="e"}b.tipsy({gravity:e});this.onclick=function(){return false}})};a.fn.enticeToAction.defaults={title:"You must be logged in to use this feature",direction:"downwards"}})(jQuery);(function(a){a.fn.errorify=function(d,c){a.extend({},a.fn.errorify.defaults,c);return this.each(function(){var b=a(this);b.addClass("error");b.find("p.note").hide();b.find("dd.error").remove();var e=a("<dd>").addClass("error").text(d);b.append(e)})};a.fn.errorify.defaults={};a.fn.unErrorify=function(d){a.extend({},a.fn.unErrorify.defaults,d);return this.each(function(){var c=a(this);c.removeClass("error");c.find("p.note").show();c.find("dd.error").remove()})};a.fn.unErrorify.defaults={}})(jQuery);$(document).ready(function(){$(document.body).trigger("pageUpdate")});$(document).bind("end.pjax",function(a){$(a.target).trigger("pageUpdate")});$.fn.pageUpdate=function(a){$(this).delegate("*","pageUpdate",a)};(function(a){a.fn.previewableCommentForm=function(d){var c=a.extend({},a.fn.previewableCommentForm.defaults,d);return this.each(function(){var b=a(this);if(!b.hasClass("previewable-comment-form-attached")){b.addClass("previewable-comment-form-attached");var e=b.find("textarea"),f=b.find(".content-body"),g=b.prev(".comment-form-error"),h=b.find(".form-actions button"),j=e.val(),l=b.attr("data-repository"),k=false,m=null,o=a.merge(b.find(".preview-dirty"),e);o.blur(function(){if(j!=e.val()){k=true;
j=e.val()}p()});var p=function(){if(k)if(a.trim(j)=="")f.html("<p>Nothing to preview</p>");else{f.html("<p>Loading preview&hellip;</p>");m&&m.abort();var q=a.extend({text:j,repository:l},c.previewOptions);m=a.post(c.previewUrl,q,function(v){f.html(v);c.onSuccess.call(f)})}};a.trim(j)==""&&f.html("<p>Nothing to preview</p>");g.length>0&&b.closest("form").submit(function(){g.hide();if(a.trim(e.val())==""){g.show();return false}h.attr("disabled","disabled")})}})};a.fn.previewableCommentForm.defaults=
{previewUrl:"/preview",previewOptions:{},onSuccess:function(){}}})(jQuery);(function(a){a.fn.redirector=function(d){var c=a.extend({},a.fn.redirector.defaults,d);this.length!=0&&a.smartPoller(c.time,function(b){a.getJSON(c.url,function(e){if(e)b();else window.location=c.to})})};a.fn.redirector.defaults={time:100,url:null,to:"/"}})(jQuery);(function(a){a.fn.repoInlineEdit=function(d){var c=a.extend({},a.fn.repoInlineEdit.defaults,d);return this.each(function(){var b=a(this),e=a("#"+b.attr("rel"));function f(){if(a.trim(b.text())=="")c.is_owner?b.html(a("#pl-"+c.name).html()):b.remove();else c.is_owner&&b.find("p:last-child").append(' <em class="placeholder edit-text">click to edit</em>')}f();if(c.is_owner){b.addClass("editable-text");b.click(function(g){if(!a(g.target).is("a")){b.hide();e.show().find("input").focus()}});e.find(".cancel").click(function(){b.show();
e.hide();return false});e.find("form").submit(function(){a.fn.repoInlineEdit.load();e.css({opacity:0.4});var g=a(this),h=g.serialize();a.post(g.attr("action"),h,function(j,l){if(l=="success"){if(c.name=="homepage"){l=j.match(/^https?:/)?j:"http://"+j;b.html(a('<a rel="nofollow"/>').attr("href",l).text(j))}else b.html(a.simpleFormat(j));f();e.hide();b.show();a.fn.repoInlineEdit.endLoad()}e.css({opacity:1})});return false})}})};a.fn.repoInlineEdit.defaults={is_owner:false,name:"description"};a.fn.repoInlineEdit.load=
function(){a("#repo_details_loader").show()};a.fn.repoInlineEdit.endLoad=function(){a("#repo_details_loader").hide()};a.simpleFormat=function(d){d=a("<div>").text(d).html();d=d.replace(/\r\n?/,"\n");d=d.replace(/\n\n+/,"</p>\n\n<p>");d=d.replace(/([^\n]\n)(?=[^\n])/,"<br />");return"<p>"+d+"</p>"}})(jQuery);(function(a){a.fn.repoList=function(d){var c=a.extend({},a.fn.repoList.defaults,d);return this.each(function(){var b=a(this),e=b.find(".repo_list"),f=b.find(".show-more"),g=b.find(".filter_input").val(""),h=g.val(),j=f.length==0?true:false,l=null,k=false;g[0]&&typeof g[0].onsearch=="object"&&g.addClass("native");f.click(function(){if(k)return false;var q=f.spin();k=true;a(c.selector).load(c.ajaxUrl,function(){j=true;q.parents(".repos").find(".filter_selected").click();q.stopSpin()});q.hide();return false});
function m(){var q=e.find("li");if(l){q.hide();e.find("li."+l).show()}else q.show();g.val()!=""&&q.filter(":not(:Contains('"+g.val()+"'))").hide()}b.find(".repo_filter").click(function(){var q=a(this);b.find(".repo_filterer a").removeClass("filter_selected");q.addClass("filter_selected");l=q.attr("rel");j?m():f.click();return false});var o="placeholder"in document.createElement("input");function p(){o||(g.val()==""?g.addClass("placeholder"):g.removeClass("placeholder"))}g.bind("keyup blur click",
function(){if(this.value!=h){h=this.value;j?m():f.click();p()}});p()})};a.fn.repoList.defaults={selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"}})(jQuery);$.fn.selectableList=function(a,d){return $(this).each(function(){var c=$(this),b=$.extend({toggleClassName:"selected",wrapperSelector:"a",mutuallyExclusive:false,itemParentSelector:"li",enableShiftSelect:false,ignoreLinks:false},d);c.delegate(a+" "+b.itemParentSelector+" "+b.wrapperSelector,"click",function(e){if(e.which>1||e.metaKey||b.ignoreLinks&&$(e.target).closest("a").length)return true;var f=$(this),g=f.find(":checkbox, :radio"),h=c.find(a+" ."+b.toggleClassName),j=c.find(a+" *[data-last]");
if(!f.is(":checkbox, :radio")&&e.target!=g[0])g.attr("checked")&&!g.is(":radio")?g.attr("checked",false):g.attr("checked",true);b.mutuallyExclusive&&h.removeClass(b.toggleClassName);f.toggleClass(b.toggleClassName);g.change();if(b.enableShiftSelect&&e.shiftKey&&h.length>0)if(j.length>0){e=j.offset().top;g=f.offset().top;h="#"+f.attr("id");var l=$,k=$,m=$;if(e>g)l=j.prevUntil(h);else if(e<g)l=j.nextUntil(h);k=l.find(":checkbox");m=l.find(":checked");if(m.length==k.length){l.removeClass(b.toggleClassName);
k.attr("checked",false)}else{l.addClass(b.toggleClassName);k.attr("checked",true)}}j.removeAttr("data-last");f.attr("data-last",true)});c.delegate(a+" li :checkbox,"+a+" li :radio","change",function(){var e=$(this);e=e.closest(b.wrapperSelector);b.mutuallyExclusive&&c.find(a+" ."+b.toggleClassName).removeClass(b.toggleClassName);$(this).attr("checked")?e.addClass(b.toggleClassName):e.removeClass(b.toggleClassName)});return c.find(a)})};$.fn.sortableHeader=function(a,d){return $(this).each(function(){var c=$(this),b=$.extend({itemSelector:"li",ascendingClass:"asc",descendingClass:"desc"},d);c.delegate(a+" "+b.itemSelector,"click",function(e){e.preventDefault();e=$(this);if(e.hasClass(b.ascendingClass)){e.removeClass(b.ascendingClass);e.addClass(b.descendingClass)}else if(e.hasClass(b.descendingClass)){e.removeClass(b.descendingClass);e.addClass(b.ascendingClass)}else{e.parent().find("."+b.ascendingClass+", ."+b.descendingClass).removeClass(b.ascendingClass+
" "+b.descendingClass);e.addClass(b.descendingClass)}})})};(function(a){a.fn.hardTabs=function(d){var c=a.extend({},a.fn.hardTabs.defaults,d);if(a(this).hasClass("js-large-data-tabs"))c.optimizeLargeContents=true;function b(f){if(c.optimizeLargeContents){if(f[0]==null)return a();f.is(":visible")&&!f[0].style.width&&f.css({width:f.width()+"px"});return f.css({position:"absolute",left:"-9999px"})}else return f.hide()}function e(f){if(c.optimizeLargeContents){if(f[0]==null)return a();f.is(":visible")||f.show();return f.css({position:"",left:""})}else return f.show()}
return this.each(function(){var f=a(this),g=a(),h=a();f.find("a.selected").length==0&&a(f.find("a")[0]).addClass("selected");f.find("a").each(function(){var j=a(this),l=a.fn.hardTabs.findLastPathSegment(j.attr("href")),k=j.attr("data-container-id")?j.attr("data-container-id"):l,m=a("#"+k);b(m);function o(p){if(p.which==2||p.metaKey)return true;m=a("#"+k);if(m.length==0)return true;b(h);g.removeClass("selected");h=e(m);g=j.addClass("selected");"replaceState"in window.history&&p!="stop-url-change"&&
window.history.replaceState(null,document.title,j.attr("href"));f.trigger("tabChanged",{link:j});return false}j.click(o);a('.js-secondary-hard-link[href="'+j.attr("href")+'"]').click(o);j.hasClass("selected")&&o("stop-url-change")})})};a.fn.hardTabs.defaults={optimizeLargeContents:false};a.fn.hardTabs.findLastPathSegment=function(d){if(d==null)d=document.location.pathname;d=d.replace(/\?.+|#.+/,"");d=d.match(/[^\/]+\/?$/);d.length==0&&alert("Invalid tab link!");return d[0].replace("/","")}})(jQuery);(function(a){function d(e){return a.hotkeys.special[e]==null?e.charCodeAt(0):a.hotkeys.special[e]}a.hotkeys=function(e){for(key in e)a.hotkey(key,e[key]);return this};a.hotkey=function(e,f){a.hotkeys.cache[d(e)]=f;return this};function c(e,f){if(!(e.ctrlKey||e.altKey||e.metaKey)){var g=e.shiftKey?e.keyCode:e.keyCode+32;if(f=f[g])if(a.isFunction(f)){e=f.call(this,e);return this==document?false:e}else{window.location=f;return false}}}a.fn.hotkeys=function(e){var f={};for(key in e)f[d(key)]=e[key];return this.bind("keydown.hotkey",
function(g){return c.call(this,g,f)})};a.hotkeys.cache={};a.hotkeys.special={enter:45,esc:59,"?":191,"/":223,"\\":252,"`":224,up:70,down:72};if(a.browser.mozilla)a.hotkeys.special["?"]=0;a(document).bind("keydown.hotkey",function(e){if(!a(e.target).is(":input"))return c.call(this,e,a.hotkeys.cache)});a(function(){a("a[hotkey]").each(function(){a.hotkey(a(this).attr("hotkey"),a(this).attr("href"))})});var b;a("#facebox").live("focus",function(e){b=e.target}).live("blur",function(){b=null});a(document).bind("close.facebox",
function(){if(b)try{b.blur()}catch(e){}})})(jQuery);(function(a){a.fn.editable=function(d,c){var b={target:d,name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",submittype:"post",loaddata:{},submitdata:{}};c&&a.extend(b,c);var e=a.editable.types[b.type].plugin||function(){},f=a.editable.types[b.type].submit||function(){},g=a.editable.types[b.type].buttons||a.editable.types.defaults.buttons,h=a.editable.types[b.type].content||a.editable.types.defaults.content,
j=a.editable.types[b.type].element||a.editable.types.defaults.element,l=b.callback||function(){};a.isFunction(a(this)[b.event])||(a.fn[b.event]=function(k){return k?this.bind(b.event,k):this.trigger(b.event)});a(this).attr("title",b.tooltip);b.autowidth="auto"==b.width;b.autoheight="auto"==b.height;return this.each(function(){a.trim(a(this).html())||a(this).html(b.placeholder);a(this)[b.event](function(){var k=this;if(!k.editing){function m(){a(k).html(k.revert);k.editing=false;a.trim(a(k).html())||
a(k).html(b.placeholder)}a(k).css("visibility","hidden");if(b.width!="none")b.width=b.autowidth?a(k).width():b.width;if(b.height!="none")b.height=b.autoheight?a(k).height():b.height;a(this).css("visibility","");a(this).html().toLowerCase().replace(/;/,"")==b.placeholder.toLowerCase().replace(/;/,"")&&a(this).html("");k.editing=true;k.revert=a(k).html();a(k).html("");var o=a("<form/>");if(b.cssclass)"inherit"==b.cssclass?o.attr("class",a(k).attr("class")):o.attr("class",b.cssclass);if(b.style)if("inherit"==
b.style){o.attr("style",a(k).attr("style"));o.css("display",a(k).css("display"))}else o.attr("style",b.style);var p=j.apply(o,[b,k]),q;if(b.loadurl){var v=setTimeout(function(){p.disabled=true;h.apply(o,[b.loadtext,b,k])},100),r={};r[b.id]=k.id;a.isFunction(b.loaddata)?a.extend(r,b.loaddata.apply(k,[k.revert,b])):a.extend(r,b.loaddata);a.ajax({type:b.loadtype,url:b.loadurl,data:r,async:false,success:function(n){window.clearTimeout(v);q=n;p.disabled=false}})}else if(b.data){q=b.data;if(a.isFunction(b.data))q=
b.data.apply(k,[k.revert,b])}else q=k.revert;h.apply(o,[q,b,k]);p.attr("name",b.name);g.apply(o,[b,k]);e.apply(o,[b,k]);a(k).append(o);a(":input:visible:enabled:first",o).focus();b.select&&p.select();p.keydown(function(n){if(n.keyCode==27){p.blur();n.preventDefault();m()}});if("cancel"==b.onblur)p.blur(function(){v=setTimeout(m,500)});else if("submit"==b.onblur)p.blur(function(){o.submit()});else a.isFunction(b.onblur)?p.blur(function(){b.onblur.apply(k,[p.val(),b])}):p.blur(function(){});o.submit(function(n){v&&
clearTimeout(v);n.preventDefault();f.apply(o,[b,k]);if(a.isFunction(b.target)){n=b.target.apply(k,[p.val(),b]);a(k).html(n);k.editing=false;l.apply(k,[k.innerHTML,b]);a.trim(a(k).html())||a(k).html(b.placeholder)}else{n={};n[b.name]=p.val();n[b.id]=k.id;a.isFunction(b.submitdata)?a.extend(n,b.submitdata.apply(k,[k.revert,b])):a.extend(n,b.submitdata);a(k).html(b.indicator);a.ajax({type:b.submittype,url:b.target,data:n,success:function(s){a(k).html(s);k.editing=false;l.apply(k,[k.innerHTML,b]);a.trim(a(k).html())||
a(k).html(b.placeholder)}})}return false});a(k).bind("reset",m)}})})};a.editable={types:{defaults:{element:function(){var d=a('<input type="hidden">');a(this).append(d);return d},content:function(d){a(":input:first",this).val(d)},buttons:function(d,c){if(d.submit){var b=a('<input type="submit">');b.val(d.submit);a(this).append(b)}if(d.cancel){b=a('<input type="button">');b.val(d.cancel);a(this).append(b);a(b).click(function(){a(c).html(c.revert);c.editing=false})}}},text:{element:function(d){var c=
a("<input>");d.width!="none"&&c.width(d.width);d.height!="none"&&c.height(d.height);c.attr("autocomplete","off");a(this).append(c);return c}},textarea:{element:function(d){var c=a("<textarea>");d.rows?c.attr("rows",d.rows):c.height(d.height);d.cols?c.attr("cols",d.cols):c.width(d.width);a(this).append(c);return c}},select:{element:function(){var d=a("<select>");a(this).append(d);return d},content:function(d){if(String==d.constructor){eval("var json = "+d);for(var c in json)if(json.hasOwnProperty(c))if("selected"!=
c){d=a("<option>").val(c).append(json[c]);a("select",this).append(d)}}a("select",this).children().each(function(){a(this).val()==json.selected&&a(this).attr("selected","selected")})}}},addInputType:function(d,c){a.editable.types[d]=c}}})(jQuery);(function(a){a.keys={escape:27,tab:9,space:32,enter:13,backspace:8,scroll:145,capslock:20,numlock:144,pause:19,insert:45,home:36,del:46,end:35,pageup:33,pagedown:34,left:37,up:38,right:39,down:40,"-":109,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"/":191}})(jQuery);(function(a){a(".js-oneclick").live("click",function(d){d.preventDefault();var c=a(this),b=c.attr("data-afterclick")||"Loading\u2026";if(c.attr("disabled"))return true;c.attr("disabled","disabled");setTimeout(function(){c.find("span").length>0?c.find("span").text(b):c.text(b)},50);a(this).parents("form").submit();return true})})(jQuery);(function(a){if(!window.history||!("pushState"in window.history)){a.pjax=a.noop;a.fn.pjax=function(){return this}}else{a.fn.pjax=function(f,g){if(g)g.container=f;else g=a.isPlainObject(f)?f:{container:f};return this.live("click",function(h){if(h.which>1||h.metaKey)return true;var j={url:this.href,container:a(this).attr("data-pjax")};a.pjax(a.extend({},j,g));h.preventDefault()})};var d=null,c=false;a.pjax=function(f){var g=a(f.container),h=f.success||a.noop;delete f.success;var j={timeout:650,push:true,
replace:false,data:{_pjax:true},type:"GET",dataType:"html",beforeSend:function(l){g.trigger("start.pjax");l.setRequestHeader("X-PJAX","true")},error:function(){window.location=f.url},complete:function(){g.trigger("end.pjax")},success:function(l){if(!a.trim(l)||/<html/i.test(l))return window.location=f.url;g.html(l);var k=document.title,m=a.trim(g.find("title").remove().text());if(m)document.title=m;m={pjax:typeof f.container=="object"?f.container.selector:f.container,timeout:f.timeout};var o=a.param(f.data);
if(o!="_pjax=true")m.url=f.url+(/\?/.test(f.url)?"&":"?")+o;if(f.replace)window.history.replaceState(m,document.title,f.url);else if(f.push){c||window.history.replaceState(jQuery.extend({},m,{url:null}),k);window.history.pushState(m,document.title,f.url);c=true}if((f.replace||f.push)&&window._gaq)_gaq.push(["_trackPageview"]);h.apply(this,arguments)}};f=a.extend(true,{},j,f);if(a.isFunction(f.url))f.url=f.url.call();if(d&&d.readyState<4){d.onreadystatechange=a.noop;d.abort()}d=a.ajax(f);a(document).trigger("pjax",
d,f);return d};var b="state"in window.history,e=location.href;a(window).bind("popstate",function(f){var g=!b&&location.href==e;b=true;if(!g)if((f=f.state)&&f.pjax){g=a(f.pjax+"");if(g.length)a.pjax({url:f.url||location.href,container:g,push:false,timeout:f.timeout});else window.location=location.href}});a.event.props.indexOf("state")<0&&a.event.props.push("state")}})(jQuery);function definePrimer(a){function d(c,b,e,f){this.container=c;this.width=b;this.height=e;this.primer=this;this.useGlobalMouseMove=f;this.actions=[];this.init();this.autoDraw=true}d.prototype={init:function(){a("html head").append("<style>.primer_text { position: absolute; margin: 0; padding: 0; line-height: normal; z-index: 0;}</style>");var c=a(this.container).eq(0);c.append('<div id="primer_text"></div>');var b=a("#primer_text",c).eq(0);b.css("position","relative");this.element=b;b=document.createElement("canvas");
b.width=this.width;b.height=this.height;b.style.zIndex="0";if(b.getContext)c.append(b);else window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(a(b).appendTo(c).get(0));c=a("canvas",c);var e=c[0];this.context=e.getContext("2d");this.root=new d.Layer;this.root.bind(this);this.setupExt();var f=this;this.useGlobalMouseMove?a("body").bind("mousemove",function(g){if(a(g.target).parents().find(this.container)){var h=a(e);h=h.offset();g.localX=g.pageX-h.left;g.localY=g.pageY-h.top;f.ghost(g)}else f.outOfBounds()}):
c.eq(0).bind("mousemove",function(g){var h=a(g.currentTarget).offset();g.localX=g.pageX-h.left;g.localY=g.pageY-h.top;f.ghost(g)})},getX:function(){return 0},getY:function(){return 0},getGlobalX:function(){return 0},getGlobalY:function(){return 0},addChild:function(c){c.bind(this);this.root.addChild(c);this.draw()},removeChild:function(c){this.root.removeChild(c);this.draw()},draw:function(c){if(c||this.autoDraw){this.context.clearRect(0,0,this.width,this.height);a(".primer_text",this.element).remove();
this.setupExt();this.root.draw()}},ghost:function(c){this.root.ghost(c);for(var b in this.actions){c=this.actions[b];c[0](c[1])}this.actions=[]},outOfBounds:function(){},setupExt:function(){this.context.ext={textAlign:"left",font:"10px sans-serif"}}};d.Layer=function(){this.element=this.context=this.primer=null;this.children=[];this.calls=[];this.yVal=this.xVal=0;this.visibleVal=true;this.mouseoverVal=function(){};this.mouseoutVal=function(){};this.mouseWithin=false};d.Layer.prototype={bind:function(c){this.parent=
c;this.primer=c.primer;this.context=this.primer.context;this.element=this.primer.element;for(var b in this.children)this.children[b].bind(this)},getX:function(){return this.xVal},setX:function(c){this.xVal=c;this.primer&&this.primer.draw()},getY:function(){return this.yVal},setY:function(c){this.yVal=c;this.primer&&this.primer.draw()},getGlobalX:function(){return this.getX()+this.parent.getGlobalX()},getGlobalY:function(){return this.getY()+this.parent.getGlobalY()},getVisible:function(){return this.visibleVal},
setVisible:function(c){this.visibleVal=c;this.primer&&this.primer.draw()},addChild:function(c){c.bind(this);this.children.push(c);this.primer&&this.primer.draw()},removeChild:function(c){for(var b=[],e=0;e<this.children.length;e++){var f=this.children[e];f!=c&&b.push(f)}this.children=b},mouseover:function(c){this.mouseoverVal=c},mouseout:function(c){this.mouseoutVal=c},setFillStyle:function(c){this.calls.push(["fillStyle",c])},setStrokeStyle:function(c){this.calls.push(["strokeStyle",c])},setLineWidth:function(c){this.calls.push(["lineWidth",
c])},beginPath:function(){this.calls.push(["beginPath"])},moveTo:function(c,b){this.calls.push(["moveTo",c,b])},lineTo:function(c,b){this.calls.push(["lineTo",c,b])},quadraticCurveTo:function(c,b,e,f){this.calls.push(["quadraticCurveTo",c,b,e,f])},arc:function(c,b,e,f,g,h){this.calls.push(["arc",c,b,e,f,g,h])},fill:function(){this.calls.push(["fill"])},stroke:function(){this.calls.push(["stroke"])},fillRect:function(c,b,e,f){this.calls.push(["fillRect",c,b,e,f])},fillText:function(c,b,e,f,g){this.calls.push(["fillText",
c,b,e,f,g])},setTextAlign:function(c){this.calls.push(["textAlign",c])},setFont:function(c){this.calls.push(["font",c])},rect:function(c,b,e,f){this.beginPath();this.moveTo(c,b);this.lineTo(c+e,b);this.lineTo(c+e,b+f);this.lineTo(c,b+f);this.lineTo(c,b)},roundedRect:function(c,b,e,f,g){this.beginPath();this.moveTo(c,b+g);this.lineTo(c,b+f-g);this.quadraticCurveTo(c,b+f,c+g,b+f);this.lineTo(c+e-g,b+f);this.quadraticCurveTo(c+e,b+f,c+e,b+f-g);this.lineTo(c+e,b+g);this.quadraticCurveTo(c+e,b,c+e-g,b);
this.lineTo(c+g,b);this.quadraticCurveTo(c,b,c,b+g)},fillRoundedRect:function(c,b,e,f,g){this.roundedRect(c,b,e,f,g);this.fill()},draw:function(){if(this.getVisible()){this.context.save();this.context.translate(this.getX(),this.getY());for(var c in this.calls){var b=this.calls[c];switch(b[0]){case "strokeStyle":this.context.strokeStyle=b[1];break;case "lineWidth":this.context.lineWidth=b[1];break;case "fillStyle":this.context.fillStyle=b[1];break;case "fillRect":this.context.fillRect(b[1],b[2],b[3],
b[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(b[1],b[2]);break;case "lineTo":this.context.lineTo(b[1],b[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(b[1],b[2],b[3],b[4]);break;case "arc":this.context.arc(b[1],b[2],b[3],b[4],b[5],b[6]);break;case "fill":this.context.fill();break;case "stroke":this.context.stroke();break;case "fillText":this.extFillText(b[1],b[2],b[3],b[4],b[5]);break;case "textAlign":this.context.ext.textAlign=b[1];
case "font":this.context.ext.font=b[1]}}for(c=0;c<this.children.length;c++)this.children[c].draw();this.context.restore()}},extFillText:function(c,b,e,f,g){var h="";h+="left: "+(this.getGlobalX()+b)+"px;";h+="top: "+(this.getGlobalY()+e)+"px;";h+="width: "+f+"px;";h+="text-align: "+this.context.ext.textAlign+";";h+="color: "+this.context.fillStyle+";";h+="font: "+this.context.ext.font+";";this.element.append('<p class="primer_text '+g+'" style="'+h+'">'+c+"</p>")},ghost:function(c){if(this.getVisible()){this.context.save();
this.context.translate(this.getX(),this.getY());for(var b in this.calls){var e=this.calls[b];switch(e[0]){case "fillRect":this.ghostFillRect(c,e[1],e[2],e[3],e[4]);break;case "beginPath":this.context.beginPath();break;case "moveTo":this.context.moveTo(e[1],e[2]);break;case "lineTo":this.context.lineTo(e[1],e[2]);break;case "quadraticCurveTo":this.context.quadraticCurveTo(e[1],e[2],e[3],e[4]);break;case "arc":this.context.arc(e[1],e[2],e[3],e[4],e[5],e[6]);break;case "fill":this.ghostFill(c);break}}if(!jQuery.browser.safari){c.localX-=
this.getX();c.localY-=this.getY()}for(b in this.children)this.children[b].ghost(c);if(!jQuery.browser.safari){c.localX+=this.getX();c.localY+=this.getY()}this.context.restore()}},ghostDetect:function(c){if(jQuery.browser.safari){testX=c.localX;testY=c.localY}else{testX=c.localX-this.getX();testY=c.localY-this.getY()}if(this.context.isPointInPath(testX,testY)){this.mouseWithin||this.primer.actions.push([this.mouseoverVal,c]);this.mouseWithin=true}else{this.mouseWithin&&this.primer.actions.push([this.mouseoutVal,
c]);this.mouseWithin=false}},ghostFillRect:function(c,b,e,f,g){this.context.beginPath();this.context.moveTo(b,e);this.context.lineTo(b+f,e);this.context.lineTo(b+f,e+g);this.context.lineTo(b,e+g);this.context.lineTo(b,e);this.ghostDetect(c)},ghostFill:function(c){this.ghostDetect(c)}};return d}var Primer=definePrimer(window.jQuery);(function(a){function d(c,b){c=c.find("a");if(c.length>1){var e=c.filter(".selected"),f=c.get().indexOf(e.get(0));f+=b;if(f>=c.length)f=0;else if(f<0)f=c.length-1;e.removeClass("selected");c.eq(f).addClass("selected");return true}}a.fn.quicksearch=function(c){var b=a.extend({url:null,delay:150,spinner:null,insertSpinner:null,loading:a(".quicksearch-loading")},c);if(b.insertSpinner&&!b.spinner)b.spinner=a('<img src="'+GitHub.Ajax.spinner+'" alt="" class="spinner" />');function e(f){return b.results.html(f).show()}
b.results.delegate("a","mouseover",function(){var f=a(this);if(!f.hasClass("selected")){b.results.find("a.selected").removeClass("selected");f.addClass("selected")}});return this.each(function(){var f=a(this);function g(){if(b.insertSpinner){b.spinner.parent().length||b.insertSpinner.call(f,b.spinner);b.spinner.show()}f.trigger("quicksearch.loading");b.loading&&e(b.loading.html())}function h(){b.insertSpinner&&b.spinner.hide();f.trigger("quicksearch.loaded")}f.autocompleteField({url:b.url||f.attr("data-url"),
dataType:b.dataType,delay:b.delay,useCache:true,minLength:2}).bind("keyup",function(j){j.which!=13&&f.val().length>=2&&b.results.is(":empty")&&g()}).bind("autocomplete.beforesend",function(){g()}).bind("autocomplete.finish",function(j,l){e(l||{});h()}).bind("autocomplete.clear",function(){b.results.html("").hide();h()}).bind("focus",function(){f.val()&&f.trigger("keyup")}).bind("blur",function(){setTimeout(function(){f.trigger("autocomplete.clear")},150)}).hotkeys({up:function(){if(d(b.results,-1))return false},
down:function(){if(d(b.results,1))return false},enter:function(){var j=b.results.find("a.selected");if(j.length){a(this).blur();if(j.hasClass("initial"))j.closest("form").submit();else window.location=j.attr("href");return false}else a(this).trigger("autocomplete.clear")},esc:function(){a(this).blur();return false}})})}})(jQuery);(function(a){a.fn.relatizeDate=function(){return a(this).each(function(){a(this).hasClass("relatized")||a(this).text(a.relatizeDate(this)).addClass("relatized")})};a.relatizeDate=function(d){d=a(d).text();var c=new Date(d);if(isNaN(c)){c=/(\d\d:\d\d:\d\d [+-]\d{4}) (\d{4})$/;c=new Date(d.replace(c,"$2 $1"));if(isNaN(c))return d}return a.relatizeDate.timeAgoInWords(c)};$r=a.relatizeDate;a.extend(a.relatizeDate,{shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],strftime:function(d,c){var b=d.getDay(),e=d.getMonth(),f=d.getHours(),g=d.getMinutes();function h(j){j=j.toString(10);return(new Array(2-j.length+1)).join("0")+j}return c.replace(/\%([aAbBcdHImMpSwyY])/g,function(j){switch(j.substr(1,1)){case "a":return $r.shortDays[b];
case "A":return $r.days[b];case "b":return $r.shortMonths[e];case "B":return $r.months[e];case "c":return d.toString();case "d":return h(d.getDate());case "H":return h(f);case "I":return h((f+12)%12);case "m":return h(e+1);case "M":return h(g);case "p":return f>12?"PM":"AM";case "S":return h(d.getSeconds());case "w":return b;case "y":return h(d.getFullYear()%100);case "Y":return d.getFullYear().toString()}})},timeAgoInWords:function(d,c){return $r.distanceOfTimeInWords(d,new Date,c)},distanceOfTimeInWords:function(d,
c,b){c=parseInt((c.getTime()-d.getTime())/1000);if(c<60)return"just now";else if(c<120)return"about a minute ago";else if(c<2700)return parseInt(c/60).toString()+" minutes ago";else if(c<7200)return"about an hour ago";else if(c<86400)return"about "+parseInt(c/3600).toString()+" hours ago";else if(c<172800)return"1 day ago";else{c=parseInt(c/86400).toString();if(c>5){c="%B %d, %Y";if(b)c+=" %I:%M %p";return $r.strftime(d,c)}else return c+" days ago"}}})})(jQuery);(function(a){a.put=function(d,c,b,e){var f=null;if(jQuery.isFunction(c)){b=c;c={}}if(jQuery.isPlainObject(b)){f=b.error;b=b.success}return jQuery.ajax({type:"PUT",url:d,data:c,success:b,error:f,dataType:e})};a.del=function(d,c,b,e){var f=null;if(jQuery.isFunction(c)){b=c;c={}}if(jQuery.isPlainObject(b)){f=b.error;b=b.success}return jQuery.ajax({type:"DELETE",url:d,data:c,success:b,error:f,dataType:e})}})(jQuery);(function(a){a.smartPoller=function(d,c){if(a.isFunction(d)){c=d;d=1000}(function b(){setTimeout(function(){c.call(this,b)},d);d*=1.1})()}})(jQuery);jQuery.fn.tabs=function(){function a(c){return/#([a-z][\w.:-]*)$/i.exec(c)[1]}var d=window.location.hash.substr(1);return this.each(function(){var c=null,b=null;$(this).find("li a").each(function(){var e=$("#"+a(this.href));if(e!=[]){e.hide();$(this).click(function(){var f=$(this);function g(){b&&b.hide();c&&c.removeClass("selected");c=f.addClass("selected");b=e.show().trigger("tabChanged",{link:c})}if(f.attr("ajax")){f.addClass("loading");$.ajax({url:f.attr("ajax"),success:function(h){e.html(h);
f.removeClass("loading");f[0].removeAttribute("ajax");g()},failure:function(){alert("An error occured, please reload the page")}})}else g();return false});$(this).hasClass("selected")&&$(this).click()}});$(this).find("li a[href='#"+d+"']").click();b==null&&$($(this).find("li a")[0]).click()})};(function(a){var d=function(){var c=typeof document.selection!=="undefined"&&typeof document.selection.createRange!=="undefined";return{getSelectionRange:function(b){var e,f,g;b.focus();if(typeof b.selectionStart!=="undefined"){e=b.selectionStart;f=b.selectionEnd}else if(c){e=document.selection.createRange();f=e.text.length;if(e.parentElement()!==b)throw"Unable to get selection range.";if(b.type==="textarea"){g=e.duplicate();g.moveToElementText(b);g.setEndPoint("EndToEnd",e);e=g.text.length-f}else{b=
b.createTextRange();b.setEndPoint("EndToStart",e);e=b.text.length}f=e+f}else throw"Unable to get selection range.";return{start:e,end:f}},getSelectionStart:function(b){return this.getSelectionRange(b).start},getSelectionEnd:function(b){return this.getSelectionRange(b).end},setSelectionRange:function(b,e,f){var g;b.focus();if(typeof f==="undefined")f=e;if(typeof b.selectionStart!=="undefined")b.setSelectionRange(e,f);else if(c){g=b.value;b=b.createTextRange();f-=e+g.slice(e+1,f).split("\n").length-
1;e-=g.slice(0,e).split("\n").length-1;b.move("character",e);b.moveEnd("character",f);b.select()}else throw"Unable to set selection range.";},getSelectedText:function(b){var e=this.getSelectionRange(b);return b.value.substring(e.start,e.end)},insertText:function(b,e,f,g,h){g=g||f;var j=e.length;j=f+j;var l=b.value.substring(0,f);g=b.value.substr(g);b.value=l+e+g;h===true?this.setSelectionRange(b,f,j):this.setSelectionRange(b,j)},replaceSelectedText:function(b,e,f){var g=this.getSelectionRange(b);
this.insertText(b,e,g.start,g.end,f)},wrapSelectedText:function(b,e,f,g){e=e+this.getSelectedText(b)+f;this.replaceSelectedText(b,e,g)}}}();window.Selection=d;a.fn.extend({getSelectionRange:function(){return d.getSelectionRange(this[0])},getSelectionStart:function(){return d.getSelectionStart(this[0])},getSelectionEnd:function(){return d.getSelectionEnd(this[0])},getSelectedText:function(){return d.getSelectedText(this[0])},setSelectionRange:function(c,b){return this.each(function(){d.setSelectionRange(this,
c,b)})},insertText:function(c,b,e,f){return this.each(function(){d.insertText(this,c,b,e,f)})},replaceSelectedText:function(c,b){return this.each(function(){d.replaceSelectedText(this,c,b)})},wrapSelectedText:function(c,b,e){return this.each(function(){d.wrapSelectedText(this,c,b,e)})}})})(jQuery);(function(a){a.fn.tipsy=function(d){d=a.extend({fade:false,gravity:"n",title:"title",fallback:""},d||{});this.hover(function(){a.data(this,"cancel.tipsy",true);var c=a.data(this,"active.tipsy");if(!c){c=a('<div class="tipsy"><div class="tipsy-inner"/></div>');c.css({position:"absolute",zIndex:100000});a.data(this,"active.tipsy",c)}if(this.hasAttribute("title")||!this.hasAttribute("original-title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var b;if(typeof d.title==
"string")b=a(this).attr(d.title=="title"?"original-title":d.title);else if(typeof d.title=="function")b=d.title.call(this);c.find(".tipsy-inner").html(b||d.fallback);b=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});c.get(0).className="tipsy";c.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var e=c[0].offsetWidth,f=c[0].offsetHeight,g=typeof d.gravity=="function"?d.gravity.call(this):d.gravity;switch(g.charAt(0)){case "n":c.css({top:b.top+
b.height,left:b.left+b.width/2-e/2}).addClass("tipsy-north");break;case "s":c.css({top:b.top-f,left:b.left+b.width/2-e/2}).addClass("tipsy-south");break;case "e":c.css({top:b.top+b.height/2-f/2,left:b.left-e}).addClass("tipsy-east");break;case "w":c.css({top:b.top+b.height/2-f/2,left:b.left+b.width}).addClass("tipsy-west");break}d.fade?c.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.8}):c.css({visibility:"visible"})},function(){a.data(this,"cancel.tipsy",false);var c=this;
setTimeout(function(){if(!a.data(this,"cancel.tipsy")){var b=a.data(c,"active.tipsy");d.fade?b.stop().fadeOut(function(){a(this).remove()}):b.remove()}},100)});this.bind("tipsy.reload",function(){if(this.hasAttribute("title"))a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");var c;if(typeof d.title=="string")c=a(this).attr(d.title=="title"?"original-title":d.title);else if(typeof d.title=="function")c=d.title.call(this);var b=a.data(this,"active.tipsy");b.find(".tipsy-inner").text(c||
d.fallback);c=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});var e=b[0].offsetWidth,f=b[0].offsetHeight,g=typeof d.gravity=="function"?d.gravity.call(this):d.gravity;switch(g.charAt(0)){case "n":b.css({top:c.top+c.height,left:c.left+c.width/2-e/2});break;case "s":b.css({top:c.top-f,left:c.left+c.width/2-e/2});break;case "e":b.css({top:c.top+c.height/2-f/2,left:c.left-e});break;case "w":b.css({top:c.top+c.height/2-f/2,left:c.left+c.width});break}})};a.fn.tipsy.autoNS=
function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"}})(jQuery);(function(a){try{window.document.createEvent("TouchEvent")}catch(d){return false}var c={},b;function e(f){return"tagName"in f?f:f.parentNode}a(document).ready(function(){a(document.body).bind("touchstart",function(f){var g=Date.now(),h=g-(c.last||g);c.target=e(f.originalEvent.touches[0].target);b&&clearTimeout(b);c.x1=f.originalEvent.touches[0].pageX;if(h>0&&h<=250)c.isDoubleTap=true;c.last=g}).bind("touchmove",function(f){c.x2=f.originalEvent.touches[0].pageX}).bind("touchend",function(){if(c.isDoubleTap){a(c.target).trigger("doubleTap");
c={}}else if(c.x2>0){Math.abs(c.x1-c.x2)>30&&a(c.target).trigger("swipe")&&a(c.target).trigger("swipe"+(c.x1-c.x2>0?"Left":"Right"));c.x1=c.x2=c.last=0}else if("last"in c)b=setTimeout(function(){b=null;a(c.target).trigger("tap");c={}},250)}).bind("touchcancel",function(){c={}})});["swipe","swipeLeft","swipeRight","doubleTap","tap"].forEach(function(f){a.fn[f]=function(g){return this.bind(f,g)}})})(jQuery);jQuery.fn.truncate=function(a,d){d=jQuery.extend({chars:/\s/,trail:["...",""]},d);var c={},b=$.browser.msie;function e(f){b&&f.style.removeAttribute("filter")}return this.each(function(){for(var f=jQuery(this),g=f.html().replace(/\r\n/gim,""),h=g,j=/<\/?[^<>]*\/?>/gim,l,k={},m=$("*").index(this);(l=j.exec(h))!=null;)k[l.index]=l[0];h=jQuery.trim(h.split(j).join(""));if(h.length>a){for(;a<h.length;){l=h.charAt(a);if(l.match(d.chars)){h=h.substring(0,a);break}a--}if(g.search(j)!=-1){j=0;for(eachEl in k){h=
[h.substring(0,eachEl),k[eachEl],h.substring(eachEl,h.length)].join("");if(eachEl<h.length)j=h.length}f.html([h.substring(0,j),h.substring(j,h.length).replace(/<(\w+)[^>]*>.*<\/\1>/gim,"").replace(/<(br|hr|img|input)[^<>]*\/?>/gim,"")].join(""))}else f.html(h);c[m]=g;f.html(["<div class='truncate_less'>",f.html(),d.trail[0],"</div>"].join("")).find(".truncate_show",this).click(function(){f.find(".truncate_more").length==0&&f.append(["<div class='truncate_more' style='display: none;'>",c[m],d.trail[1],
"</div>"].join("")).find(".truncate_hide").click(function(){f.find(".truncate_more").css("background","#fff").fadeOut("normal",function(){f.find(".truncate_less").css("background","#fff").fadeIn("normal",function(){e(this);$(this).css("background","none")});e(this)});return false});f.find(".truncate_less").fadeOut("normal",function(){f.find(".truncate_more").fadeIn("normal",function(){e(this)});e(this)});jQuery(".truncate_show",f).click(function(){f.find(".truncate_less").css("background","#fff").fadeOut("normal",
function(){f.find(".truncate_more").css("background","#fff").fadeIn("normal",function(){e(this);$(this).css("background","none")});e(this)});return false});return false})}})};String.prototype.score=function(a,d){var c=0,b=a.length,e=this,f=e.length,g,h=1;if(e==a)return 1;for(var j=0,l,k,m,o;j<b;++j){m=a[j];l=e.indexOf(m.toLowerCase());k=e.indexOf(m.toUpperCase());o=Math.min(l,k);k=o>-1?o:Math.max(l,k);if(k===-1)if(d){h+=1-d;break}else return 0;else l=0.1;if(e[k]===m)l+=0.1;if(k===0){l+=0.6;if(j===0)g=1}if(e.charAt(k-1)===" ")l+=0.8;e=e.substring(k+1,f);c+=l}a=c/b;b=(a*(b/f)+a)/2;b/=h;if(g&&b+0.15<1)b+=0.15;return b};GitHub.gravatar=function(a,d){d=d||35;var c=location.protocol=="https:"?"https://secure.gravatar.com":"http://gravatar.com",b=location.protocol=="https:"?"https":"http";return'<img src="'+c+"/avatar/"+a+"?s=140&d="+b+'%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-140.png" width="'+d+'" height="'+d+'" />'};function debug(a,d){if(GitHub.debug&&console&&console.log)d?console.log(a,d):console.log(a)}Function.prototype.delay=function(a){return setTimeout(this,a)};
String.prototype.capitalize=function(){return this.replace(/\w+/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};jQuery.expr[":"].Contains=function(a,d,c){return(a.textContent||a.innerText||"").toLowerCase().indexOf(c[3].toLowerCase())>=0};$.fn.scrollTo=function(a,d){var c;if(typeof a=="number"||!a){d=a;c=this;a="html,body"}else{c=a;a=this}c=$(c).offset().top-30;$(a).animate({scrollTop:c},d||1000);return this};
$.gitbox=function(a){$.facebox(function(){$.get(a,function(d){$.facebox(d);$("#facebox .footer").hide()})})};$.fn.spin=function(){return this.after('<img src="'+GitHub.Ajax.spinner+'" id="spinner"/>')};$.fn.stopSpin=function(){$("#spinner").remove();return this};$.fn.contextLoader=function(a){var d='<div class="context-loader">Sending Request&hellip;</div>';return this.after($(d).css("top",a))};GitHub.Ajax={};GitHub.Ajax.spinner=(GitHub.assetHost||"")+"/images/modules/ajax/indicator.gif";
GitHub.Ajax.error=(GitHub.assetHost||"")+"/images/modules/ajax/error.png";
$(function(){$(".previewable-comment-form").previewableCommentForm();$(".cards_select").cardsSelect();$(document).bind("reveal.facebox",function(){$(".cards_select").cardsSelect()});$(".js-entice").each(function(){$(this).enticeToAction({title:$(this).attr("data-entice")})});$("textarea.js-autosize").autoResize({animateDuration:300,extraSpace:10});$(".flash .close").click(function(){$(this).closest(".flash").fadeOut(300)});$(".tooltipped").each(function(){var l=$(this),k=l.hasClass("downwards")?"n":
"s";k=l.hasClass("rightwards")?"w":k;k=l.hasClass("leftwards")?"e":k;l.tipsy({gravity:k})});$(".toggle_link").click(function(){$($(this).attr("href")).toggle();return false});$(".hide_alert").live("click",function(){$("#site_alert").slideUp();$.cookie("hide_alert_vote","t",{expires:7,path:"/"});return false});$(".hide_div").click(function(){$(this).parents("div:first").fadeOut();return false});var a=$("#login_field");if(a.val())a.length&&$("#password").focus();else a.focus();$("#versions_select").change(function(){location.href=
this.value});$(document).bind("loading.facebox",function(){$(".clippy").hide()});$(document).bind("reveal.facebox",function(){$("#facebox .clippy").show()});$(document).bind("close.facebox",function(){$(".clippy").show()});$.fn.facebox&&$("a[rel*=facebox]").facebox();$(".pjax a").pjax(".site:first");$(".js-date-input").date_input();$.fn.truncate&&$(".truncate").bind("truncate",function(){$(this).truncate(50,{chars:/.*/})}).trigger("truncate");$.hotkeys({s:function(){c.focus()},"?":function(){$(document).one("reveal.facebox",
function(){$(".js-see-all-keyboard-shortcuts").click(function(){$(this).remove();$("#facebox :hidden").show();return false})});$.facebox({div:"#keyboard_shortcuts_pane"},"shortcuts")},m:function(){d()}});function d(){$("#facebox .cheatsheet:visible").length?$.facebox.close():$.facebox({div:"#markdown-help"},"cheatsheet")}$(".gfm-help").click(function(l){l.preventDefault();d()});var c=$(".topsearch input[name=q]").enhancedField();if("_auth_token"in window){a=window.location.pathname;var b=window._auth_token,
e="&request_uri="+encodeURIComponent(a)+"&authenticity_token="+encodeURIComponent(b);$.ajaxSetup({beforeSend:function(l,k){l.setRequestHeader("Accept","text/javascript");if(k.data)k.data+=e;else if(!k.data){k.data=e;l.setRequestHeader("Content-Type",k.contentType)}}})}else $.ajaxSetup({beforeSend:function(l){l.setRequestHeader("Accept","text/javascript")}});$("button, .minibutton").live("mousedown",function(){$(this).addClass("mousedown")}).live("mouseup mouseleave",function(){$(this).removeClass("mousedown")});
$("ul.inline-tabs").tabs();$(".js-hard-tabs").hardTabs();BaconPlayer.sm2="/javascripts/soundmanager/sm2.js";$(".js-all-locales").click(function(){$(".locales").addClass("showing-all-locales");$(document).scrollTop(9999);return false});var f=false,g=false,h=false;function j(){if(!h)if(f&&g){h=true;$(document.body).addClass("usingMouse")}}$(document).mousemove(function(){f=true;j()});$(document).mousedown(function(){g=true;j()});$("button.classy, a.button.classy").mousedown(function(){$(this).addClass("mousedown")}).bind("mouseup mouseleave",
function(){$(this).removeClass("mousedown")})});function clippyCopiedCallback(a){var d=$("#clippy_tooltip_"+a);if(d.length!=0){d.attr("title","copied!").trigger("tipsy.reload");setTimeout(function(){d.attr("title","copy to clipboard")},500)}}$.extend($.facebox.settings,{loadingImage:(GitHub.assetHost||"")+"/images/modules/facebox/loading.gif",closeImage:(GitHub.assetHost||"")+"/images/modules/facebox/closelabel.png"});$(document).pageUpdate(function(){$(this).find(".relatize").relatizeDate()});GitHub.Autocomplete=function(){};GitHub.Autocomplete.gravatars={};GitHub.Autocomplete.visibilities={};
GitHub.Autocomplete.acceptable=function(a){a.result(function(){var d=$(this);setTimeout(function(){if(d.val()){d.addClass("ac-accept");d.data("accept-val",d.val())}},30)});a.keypress(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.keydown(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.keyup(function(){$(this).data("accept-val")!=$(this).val()&&$(this).removeClass("ac-accept")});a.parents("form:first").submit(function(){$(this).removeClass("ac-accept")})};
GitHub.Autocomplete.prototype={usersURL:"/autocomplete/users",reposURL:"/autocomplete/repos",myReposURL:"/autocomplete/repos/mine",branchesURL:"/autocomplete/branches",settings:{},repos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;a=a.autocomplete(this.reposURL,$.extend({delay:10,width:210,minChars:2,selectFirst:false,formatItem:function(d){d=d[0].split(" ");var c=d[0];d=d[1];GitHub.Autocomplete.visibilities[c]=d;return c},formatResult:function(d){return d[0].split(" ")[0]},autoResult:true},
this.settings));GitHub.Autocomplete.acceptable(a);return a},myRepos:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;if(!github_user)return a;return a.autocomplete(this.myReposURL,$.extend({delay:10,width:210,selectFirst:false,formatItem:function(d){d=d[0].split(" ");var c=d[0];d=d[1];GitHub.Autocomplete.visibilities[c]=d;return c},formatResult:function(d){return d[0].split(" ")[0]}},this.settings)).result(function(d,c){window.location="/"+c[0].split(" ")[0];return false}).keydown(function(d){if(!/\//.test(a.val())&&
d.keyCode==9)if(d=$(".ac_results li:first").text()){a.val(d);window.location="/"+d;return false}}).end()},users:function(a){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;a=a.autocomplete(this.usersURL,$.extend({delay:10,minChars:1,formatItem:function(d){d=d[0].split(" ");var c=d[0];d=GitHub.gravatar(d[1],20);GitHub.Autocomplete.gravatars[c]=d;return d+" "+c},formatResult:function(d){return d[0].split(" ")[0]},autoResult:true},this.settings));GitHub.Autocomplete.acceptable(a);return a},branches:function(a,
d){a=$(a);if(!$.fn.autocomplete||a.length==0)return a;d||(d={});d=$.extend({extraParams:{repository:GitHub.nameWithOwner,current:GitHub.currentRef},matchCase:true,minChars:0,matchContains:true,selectFirst:true,autoResult:true},d);a=a.autocomplete(this.branchesURL,$.extend(this.settings,d));GitHub.Autocomplete.acceptable(a);return a}};$.userAutocomplete=function(){$(".autocompleter, .user-autocompleter").userAutocomplete()};$.fn.userAutocomplete=function(){return(new GitHub.Autocomplete).users(this)};
$.repoAutocomplete=function(){};$.fn.repoAutocomplete=function(){return(new GitHub.Autocomplete).repos(this)};$.myReposAutocomplete=function(){$(".my_repos_autocompleter").myReposAutocomplete()};$.fn.myReposAutocomplete=function(){return(new GitHub.Autocomplete).myRepos(this)};$.fn.branchesAutocomplete=function(a){return(new GitHub.Autocomplete).branches(this,a)};$(function(){$.userAutocomplete();$.myReposAutocomplete()});GitHub||(GitHub={});if(!GitHub.Blob)GitHub.Blob={};
GitHub.Blob.highlightLines=function(a){var d;$(".line").css("background-color","transparent");if(a){d=$(this).attr("rel");if(a.shiftKey)d=window.location.hash.replace(/-\d+/,"")+"-"+d.replace(/\D/g,"");window.location.hash=d}else d=window.location.hash;if(a=d.match(/#?(?:L|-)(\d+)/g)){a=$.map(a,function(c){return parseInt(c.replace(/\D/g,""))});if(a.length==1)return $("#LC"+a[0]).css("background-color","#ffc");for(d=a[0];d<=a[1];d++)$("#LC"+d).css("background-color","#ffc");$("#LC"+a[0]).scrollTo(1)}return false};
GitHub.Blob.scrollToHilightedLine=function(){var a;a=window.location.hash;if(a=a.match(/^#?(?:L|-)(\d+)$/g)){a=$.map(a,function(d){return parseInt(d.replace(/\D/g,""))});$("#L"+a[0]).scrollTo(1)}};
GitHub.Blob.show=function(){$.hotkeys({l:function(){$(document).one("reveal.facebox",function(){var c=$("#facebox").find(":text");c.focus();$("#facebox form").submit(function(){window.location="#L"+parseInt(c.val());GitHub.Blob.highlightLines();c.blur();$(document).trigger("close.facebox");return false})});$.facebox({div:"#jump-to-line"})}});if(!GitHub.loggedIn||!GitHub.currentRef)$(".file-edit-link").enticeToAction({title:"You must be logged in and on a branch to make or propose changes",direction:"leftwards"});
else if(GitHub.loggedIn&&GitHub.currentRef){var a=$(".file-edit-link"),d=a[0];if(d){d.href=d.href.replace("__current_ref__",GitHub.currentRef);if(!GitHub.hasWriteAccess){d=$(".file-edit-link > span");d.text("Fork and edit this file");a.attr("title","Clicking this button will automatically fork this project so you can edit the file");a.tipsy({gravity:"e"})}}}};
$(function(){if($(".page-blob").length>0){GitHub.Blob.scrollToHilightedLine();GitHub.Blob.highlightLines();GitHub.Blob.show()}$(".line_numbers span[rel]").live("mousedown",GitHub.Blob.highlightLines);$(".file-edit-link").live("click",function(){if($(this).hasClass("entice"))return false;return true});$("#cancel-blob-editing").live("click",function(){$(".blob-editor").remove();$("#readme").show();$("#files").children().show();return false});$(".file").delegate(".linkable-line-number","click",function(){document.location.hash=
this.id;return false})});$(function(){var a=2,d=7,c=30;$(".diverge-widget").each(function(){var b=$(this),e=new Date(b.attr("last-updated"));e=(new Date-e)/1000/3600/24;if(e<=a)b.addClass("hot");else if(e<=d)b.addClass("fresh");else e<=c?b.addClass("stale"):b.addClass("old")})});(function(a){a.hotkeys({y:function(){var d=a("link[rel='canonical']").attr("href"),c=a("title");if(d){d+=location.hash;if(window.history&&"pushState"in window.history)window.history.pushState({},c,d);else window.location.href=d}}})})(jQuery);Comment={enhanceAll:function(){$(".new-comments .comment .cmeta p.author").each(function(){var a=$(this).next(".info"),d=$(this).closest(".cmeta");$(this).width(d.width()-a.width()-10)})},enhanceEmailToggles:function(){$(".email-hidden-toggle").each(function(){var a=$(this),d=a.find("a"),c=a.next(".email-hidden-reply");d.click(function(){if(c.is(":visible")){c.hide();d.html("Show quoted text")}else{c.show();d.html("Hide quoted text")}return false})})}};$(Comment.enhanceAll);$(Comment.enhanceEmailToggles);GitHub.Commit={dumpEmptyClass:function(){$(this).removeClass("empty")},addEmptyClass:function(){!$(this).data("clicked")&&$(this).text()=="0"&&$(this).addClass("empty")},highlightLine:function(){$(this).parent().css("background","#ffc")},unhighlightLine:function(){$(this).data("clicked")||$(this).parent().css("background","")},jumpToHashFile:function(){if(window.location.hash){var a,d,c=window.location.hash.substr(1);if(!/^diff-\d+$/.test(c))if(c.match(/^r\d+$/)&&(d=$("#files #"+c)).length>0){console.log("jumping to review comment",
d);$(d).addClass("selected");$("html,body").animate({scrollTop:d.offset().top-200},1)}else if((a=c.match(/(.+)-P(\d+)$/)||c.match(/(.+)/))&&(d=GitHub.Commit.files[a[1]]))if(a[2]){d=$(d).closest(".file").find('tr[data-position="'+a[2]+'"] pre');if(d.length>0){d.scrollTo(1);setTimeout(function(){GitHub.Commit.highlightLine.call(d)},50)}}else $(d).closest(".file").scrollTo(1)}},onHashChange:function(){if(window.location.hash!=GitHub.Commit.oldHash){GitHub.Commit.oldHash=window.location.hash;GitHub.Commit.jumpToHashFile()}}};
$(function(){var a={};$("#files.diff-view > .file > .meta").each(function(){a[$(this).attr("data-path")]=this});GitHub.Commit.files=a;function d(b){b.find("ul.inline-tabs").tabs();b.find(".show-inline-comment-form a").click(function(){b.find(".inline-comment-form").show().find("textarea").focus();$(this).hide();return false});b.delegate(".close-form","click",function(){b.find(".inline-comment-form").hide();if(b.find(".commit-comment",".review-comment").length>0)b.find(".show-inline-comment-form a").show();
else{console.log(b);b.remove()}return false});var e=b.find(".previewable-comment-form").previewableCommentForm().closest("form");e.submit(function(){e.find(".ajaxindicator").show();e.find("button").attr("disabled","disabled");e.ajaxSubmit({success:function(f){var g=e.closest(".clipper"),h=g.find(".comment-holder");if(h.length==0)h=g.prepend($('<div class="inset comment-holder"></div>')).find(".comment-holder");f=$(f);h.append(f);f.trigger("pageUpdate");e.find("textarea").val("");e.find(".ajaxindicator").hide();
e.find("button").attr("disabled","");g.find(".inline-comment-form").hide();g.find(".show-inline-comment-form a").show();h=g.closest(".inline-comments").find(".comment-count .counter");h.text(parseInt(h.text().replace(",",""))+1);$(g.closest(".file-box, .file")).trigger("commentChange",f)}});return false})}if("onhashchange"in window){$(window).bind("hashchange",GitHub.Commit.onHashChange);GitHub.Commit.onHashChange()}else setInterval(GitHub.Commit.onHashChange,50);$(".inline-review-comment tr.inline-comments").each(function(){d($(this))});
$("#diff-comment-data > table").each(function(){var b=$(this).attr("data-path"),e=$(this).attr("data-position");b=$(a[b]).closest(".file");e=b.find('.data table tr[data-position="'+e+'"]');e.after($(this).find("tr").detach());d(e.next("tr.inline-comments"));b.find(".show-inline-comments-toggle").closest("li").show()});$("#diff-comment-data > div").each(function(){var b=$(this).attr("data-path");$(a[b]).closest(".file").find(".file-comments-place-holder").replaceWith($(this).detach())});function c(b){b.find(".inline-comment-form").show().find("textarea").focus();
b.find(".show-inline-comment-form a").hide()}$('.inline-comment-form div[id^="write_bucket_"]').live("tabChanged",function(){var b=$(this);setTimeout(function(){b.find("textarea").focus()},13)});$(".add-bubble").live("click",function(){var b=$(this).closest("tr"),e=b.next("tr.inline-comments");e.length>0?c(e):$.get($(this).attr("remote"),function(f){b.after(f);e=b.next("tr.inline-comments");d(e);c(e)})});$("#files .show-inline-comments-toggle").change(function(){this.checked?$(this).closest(".file").find("tr.inline-comments").show():
$(this).closest(".file").find("tr.inline-comments").hide()}).change();$("#inline_comments_toggle input").change(function(){this.checked?$("#comments").removeClass("only-commit-comments"):$("#comments").addClass("only-commit-comments")}).change();$(".js-show-suppressed-diff").click(function(){$(this).parent().next().show();$(this).parent().hide();return false})});
$(function(){if($("#files .image").length){var a=$("#files .file:has(.onion-skin)");$.each(a,function(d){var c=a.eq(d),b=c.find(".two-up").eq(0),e=c.find(".swipe").eq(0),f=c.find(".onion-skin").eq(0),g=c.find(".difference").eq(0);d=c.find(".deleted");var h=c.find(".added"),j=d.eq(0),l=h.eq(0),k=d.eq(1),m=h.eq(1),o=d.eq(2),p=h.eq(2),q=c.find("canvas.deleted").eq(0),v=c.find("canvas.added").eq(0),r,n,s=c.find("ul.menu"),t=c.find(".view"),x=0,F=c.find(".asset").length,K=0,y=new Image,w=new Image;if(q[0].getContext){r=
q[0].getContext("2d");n=v[0].getContext("2d")}else s.children().eq(3).addClass("hidden");c.find(".two-up").hide();c.find(".two-up p").removeClass("hidden");c.find(".progress").removeClass("hidden");c.find(".view-modes").removeClass("hidden");y.src=c.find(".deleted").first().attr("src");w.src=c.find(".added").first().attr("src");j.attr("src",y.src).load(function(){G()});l.attr("src",w.src).load(function(){G()});k.attr("src",y.src).load(function(){G()});m.attr("src",w.src).load(function(){G()});o.attr("src",
y.src).load(function(){G()});p.attr("src",w.src).load(function(){G()});s.children("li").click(function(){u($(this).index())});function G(){K++;H();if(K>=F){var A=c.find(".progress");if(A.is(":visible"))A.fadeOut(250,function(){z()});else{A.hide();z()}}}function u(A){var C=s.find(".active"),B=s.find(".active").first().index(),D=t.eq(B);B=s.children().eq(A);if(B.hasClass("active")==false&&B.hasClass("disabled")==false){C.removeClass("active");B.addClass("active");if(B.is(":visible")){C=B.position();
B=B.outerWidth();C=String(C.left+B/2)+"px 0px";s.css("background-image","url(/images/modules/commit/menu_arrow.gif)");s.animate({backgroundPosition:C},250,"easeOutQuart")}if(K>=2){actualHeight=D.css("height");animHeight=t.eq(A).css("height");D.animate({height:animHeight,opacity:"hide"},250,"easeOutQuart",function(){D.css("height",actualHeight);t.eq(A).fadeIn(250)})}}}function z(){var A=858,C=Math.max(y.width,w.width),B=Math.max(y.height,w.height),D=1,E=1,I=1,J=1;y.marginHoriz=Math.floor((C-y.width)/
2);y.marginVert=Math.floor((B-y.height)/2);w.marginHoriz=Math.floor((C-w.width)/2);w.marginVert=Math.floor((B-w.height)/2);if(C>(A-30)/2)D=(A-30)/2/C;j.attr({width:y.width*D,height:y.height*D});l.attr({width:w.width*D,height:w.height*D});b.find(".deleted-frame").css({margin:y.marginVert*D+"px "+y.marginHoriz*D+"px",width:y.width*D+2,height:y.height*D+2});b.find(".added-frame").css({margin:w.marginVert*D+"px "+w.marginHoriz*D+"px",width:w.width*D+2,height:w.height*D+2});b.find(".aWMeta").eq(0).text(w.width+
"px");b.find(".aHMeta").eq(0).text(w.height+"px");b.find(".dWMeta").eq(0).text(y.width+"px");b.find(".dHMeta").eq(0).text(y.height+"px");if(w.width!=y.width){b.find(".aWMeta").eq(0).addClass("a-green");b.find(".dWMeta").eq(0).addClass("d-red")}if(w.height!=y.height){b.find(".aHMeta").eq(0).addClass("a-green");b.find(".dHMeta").eq(0).addClass("d-red")}if(C>A-12)E=(A-12)/C;k.attr({width:y.width*E,height:y.height*E});m.attr({width:w.width*E,height:w.height*E});e.find(".deleted-frame").css({margin:y.marginVert*
E+"px "+y.marginHoriz*E+"px",width:y.width*E+2,height:y.height*E+2});e.find(".added-frame").css({margin:w.marginVert*E+"px "+w.marginHoriz*E+"px",width:w.width*E+2,height:w.height*E+2});e.find(".swipe-shell").css({width:C*E+3+"px",height:B*E+4+"px"});e.find(".swipe-frame").css({width:C*E+18+"px",height:B*E+30+"px"});e.find(".swipe-bar").draggable({axis:"x",containment:"parent",drag:function(L,M){L=Math.round(M.position.left/(parseInt(c.find(".swipe-frame").css("width"))-15)*10000)/10000;M=C*E+3;c.find(".swipe .swipe-shell").css("width",
M-M*L)}});if(C>A-12)I=(A-12)/C;o.attr({width:y.width*I,height:y.height*I});p.attr({width:w.width*I,height:w.height*I});f.find(".deleted-frame").css({margin:y.marginVert*I+"px "+y.marginHoriz*I+"px",width:y.width*I+2,height:y.height*I+2});f.find(".added-frame").css({margin:w.marginVert*I+"px "+w.marginHoriz*I+"px",width:w.width*I+2,height:w.height*I+2});f.find(".onion-skin-frame").css({width:C*I+4+"px",height:B*I+30+"px"});c.find(".dragger").css("left","262px");c.find(".dragger").draggable({axis:"x",
containment:"parent",drag:function(L,M){L=Math.round(M.position.left/262*100)/100;c.find(".onion-skin .added-frame").css("opacity",L);c.find(".onion-skin .added-frame img").css("opacity",L)}});if(C>A-4)J=(A-4)/C;if(q[0].getContext){q.attr({width:C*J,height:B*J});v.attr({width:C*J,height:B*J});g.find(".added-frame").css({width:C*J+2,height:B*J+2});g.find(".deleted-frame").css({width:C*J+2,height:B*J+2});r.drawImage(y,y.marginHoriz*J,y.marginVert*J,y.width*J,y.height*J);n.drawImage(w,w.marginHoriz*
J,w.marginVert*J,w.width*J,w.height*J);n.blendOnto(r,"difference")}b.css("height",B*D+30);e.css("height",B*E+30);f.css("height",B*E+30);g.css("height",B*E+30);s.children().removeClass("disabled");u(x)}function H(){var A=K/F*100+"%";c.find(".progress-bar").animate({width:A},250,"easeOutQuart")}})}});GitHub.Commits={elements:[],current:null,selected:function(){return $(this.elements).eq(this.current)},select:function(a){this.current=a;$(".selected").removeClass("selected");return this.elements.eq(a).addClass("selected")},next:function(){if(this.current!==null){if(this.elements.length-1!=this.current){var a=this.select(++this.current);a.offset().top-$(window).scrollTop()+50>$(window).height()&&a.scrollTo(200)}}else this.select(0)},prev:function(){if(!this.current){this.elements.eq(0).removeClass("selected");
return this.current=null}var a=this.select(--this.current);a.offset().top-$(window).scrollTop()<0&&a.scrollTo(200)},link:function(a){if(GitHub.Commits.current===null)return false;window.location=GitHub.Commits.selected().find("[hotkey="+a+"]").attr("href")}};
$(function(){GitHub.Commits.elements=$(".commit");$(".page-commits").length&&$.hotkeys({c:function(){GitHub.Commits.link("c")},enter:function(){GitHub.Commits.link("c")},o:function(){GitHub.Commits.link("c")},p:function(){GitHub.Commits.link("p")},t:function(){GitHub.Commits.link("t")},j:function(){GitHub.Commits.next()},k:function(){GitHub.Commits.prev()}})});$(function(){$("#imma_student").click(function(){$("#student_contact").slideToggle();return false});$("#imma_teacher").click(function(){$("#teacher_contact").slideToggle();return false});$("#imma_school_admin").click(function(){$("#school_admin_contact").slideToggle();return false})});$(function(){$(".contextswitch").each(function(){var a=$(this),d=a.find(".toggle");d.click(function(){a.hasClass("nochoices")||a.toggleClass("activated")})})});$(function(){$("#your_repos").repoList({selector:"#repo_listing",ajaxUrl:"/dashboard/ajax_your_repos"});$("#watched_repos").repoList({selector:"#watched_repo_listing",ajaxUrl:"/dashboard/ajax_watched_repos"});$("#org_your_repos").length>0&&$("#org_your_repos").repoList({selector:"#repo_listing",ajaxUrl:location.pathname+"/ajax_your_repos"});$(".reveal_commits, .hide_commits").live("click",function(){var a=$(this).parents(".details");a.find(".reveal, .hide_commits, .commits").toggle();return false});
$(".octofication .hide a").click(function(){$.post(this.href,null,function(){$(".octofication").fadeOut()});return false});$(".dashboard-notice .dismiss").click(function(){var a=$(this).closest(".dashboard-notice");$.del(this.href,null,function(){a.fadeOut()});return false});$(".js-dismiss-bootcamp").click(function(){var a=$(this).closest(".bootcamp");$.post(this.href,null,function(){a.fadeOut()});return false})});Date._isoRegexp=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;
Date.parseISO8601=function(a){a+="";if(typeof a!="string"||a.length===0)return null;a=a.match(Date._isoRegexp);if(typeof a=="undefined"||a===null)return null;var d,c,b,e,f,g,h;d=parseInt(a[1],10);if(typeof a[2]=="undefined"||a[2]==="")return new Date(d);c=parseInt(a[2],10)-1;b=parseInt(a[3],10);if(typeof a[4]=="undefined"||a[4]==="")return new Date(d,c,b);e=parseInt(a[4],10);f=parseInt(a[5],10);g=typeof a[6]!="undefined"&&a[6]!==""?parseInt(a[6],10):0;h=typeof a[7]!="undefined"&&a[7]!==""?Math.round(1000*
parseFloat("0."+a[7])):0;if((typeof a[8]=="undefined"||a[8]==="")&&(typeof a[9]=="undefined"||a[9]===""))return new Date(d,c,b,e,f,g,h);var j;if(typeof a[9]!="undefined"&&a[9]!==""){j=parseInt(a[10],10)*3600000;if(typeof a[11]!="undefined"&&a[11]!=="")j+=parseInt(a[11],10)*60000;if(a[9]=="-")j=-j}else j=0;return new Date(Date.UTC(d,c,b,e,f,g,h)-j)};$(function(){if($(".repohead").length!=0){$("#repo_details");var a=GitHub.hasAdminAccess,d=GitHub.watchingRepo,c=GitHub.hasForked,b=$("#repository_description"),e=$("#repository_homepage");$(".pledgie").length>0&&$("#repo_details").addClass("pledgified");$(".repohead input[type=search]").enhancedField();if(a){$(".editable-only").show();$(".for-owner").show()}c?$(".for-forked").show():$(".for-notforked").show();if(github_user)if(GitHub.hasForkOfRepo&&GitHub.hasForkOfRepo!=""){$(".for-hasfork").show();
$("#your_fork_button").attr("href","/"+GitHub.hasForkOfRepo);$("ul.repo-stats li.forks").addClass("forked").find("a").attr("title","Forks \u2014 You have a fork")}$("#download_button").attr("href",GitHub.downloadRepo);b.repoInlineEdit({name:"description",is_owner:a});e.repoInlineEdit({name:"homepage",is_owner:a});$(".subnav-bar").length!=0&&$(".repohead").removeClass("emptyrepohead");if(d){$("#unwatch_button").show();$("ul.repo-stats li.watchers").addClass("watching").find("a").attr("title","Watchers \u2014 You're Watching")}else $("#watch_button").show();
if(!github_user){$("#watch_button").enticeToAction();$("#fork_button").enticeToAction()}github_user&&GitHub.hasWriteAccess&&$("#pull_request_item").show()}});$(function(){var a=$("#url_box");if(a.length!=0){a=a.find("ul.clone-urls a");var d=$("#url_field"),c=$("#url_description strong"),b=$("#url_box_clippy"),e=$();a.click(function(){var f=$(this);d.val(f.attr("href"));b.text(f.attr("href"));c.text(f.attr("data-permissions"));e.removeClass("selected");e=f.parent("li").addClass("selected");return false});$(a[0]).click();d.mouseup(function(){this.select()})}});GitHub.Uploader={hasFlash:false,hasFileAPI:false,fallbackEnabled:true,fallbackFileSaved:false,uploadForm:null,defaultRow:null,files:{},init:function(){this.uploadForm=$("#upload_form");this.defaultRow=this.uploadForm.find("tr.default");this.uploadForm.submit(GitHub.Uploader.uploadFormSubmitted);GitHub.Uploader.Flash.init();GitHub.Uploader.File.init()},disableFallback:function(){if(this.fallbackEnabled){this.defaultRow.addClass("fallback-disabled");this.defaultRow.find("input[type=text]").attr("disabled",
"disabled");this.defaultRow.find("button").attr("disabled","disabled");this.fallbackEnabled=false}},uploadFormSubmitted:function(){var a=GitHub.Uploader;if(a.fallbackEnabled)if(a.fallbackFileSaved)return true;else{var d=a.uploadForm.find(".html-file-field").val();d=d.replace("C:\\fakepath\\","");if(d=="")return false;var c="application/octet-stream";if(typeof FileList!="undefined")c=a.uploadForm.find("input[type=file]")[0].files[0].type;d=new GitHub.UploadFile({name:d,size:1,type:c,row:a.defaultRow});
a.saveFile(d);return false}else return false},addFileRow:function(a){var d=this.uploadForm.find("tr.template");d=d.clone().css("display","").addClass("filechosen").removeClass("template");a.row=d;this.files[a.id]=a;a.row.find(".js-waiting").hide();a.row.find(".js-filename").text(a.name.substr(0,12)).attr("title",a.name).tipsy();a.row.find(".js-filesize").text(Math.round(a.size/1048576*10)/10+"MB");a.row.find(".js-start-upload").click(function(){if(a.row.hasClass("error"))return false;GitHub.Uploader.saveFile(a);
return false});this.defaultRow.before(d)},showUploadStarted:function(a){a.row.find(".js-label").text("Uploading\u20260%")},showProgress:function(a,d){a.row.find(".description label").text("Upload in progress\u2026 "+d+"%")},showSuccess:function(a){a.row.addClass("succeeded");a.row.find(".js-label").text("Upload complete!");a.row.find("button").remove();$.get(document.location.href,function(d){$(".nodownloads").fadeOut();$("#uploaded_downloads").hide().html(d).fadeIn()})},saveFile:function(a){a.row.addClass("uploading");
a.row.find(".js-label").text("Preparing upload");a.row.find(".js-description").attr("disabled","disabled");a.row.find("button").attr("disabled","disabled").find("span").text("Uploading\u2026");this.uploadForm.find(".js-not-waiting").hide();this.uploadForm.find(".js-waiting").show();var d=this.uploadForm.attr("prepare_action");$.ajax({type:"POST",url:d,data:{file_size:a.size,file_name:a.name,content_type:a.type,description:a.row.find(".js-description").val(),redirect:this.fallbackEnabled},datatype:"json",
success:function(c){GitHub.Uploader.fileSaveSucceeded(a,c)},error:function(c){c.status==422?GitHub.Uploader.fileSaveFailed(a,c.responseText):GitHub.Uploader.fileSaveFailed(a)},complete:function(){GitHub.Uploader.uploadForm.find(".js-not-waiting").show();GitHub.Uploader.uploadForm.find(".js-waiting").hide()}})},fileSaveSucceeded:function(a,d){a.params.key=d.path;a.params.acl=d.acl;a.params.Filename=a.name;a.params.policy=d.policy;a.params.AWSAccessKeyId=d.accesskeyid;a.params.signature=d.signature;
a.params["Content-Type"]=d.mime_type;if(a.uploader=="flash"){a.params.success_action_status="201";GitHub.Uploader.Flash.upload(a)}if(this.fallbackEnabled){a.params.redirect=d.redirect;this.fallbackFileSaved=true;$("#s3_redirect").val(a.params.redirect);$("#s3_key").val(a.params.key);$("#s3_acl").val(a.params.acl);$("#s3_filename").val(a.params.Filename);$("#s3_policy").val(a.params.policy);$("#s3_accesskeyid").val(a.params.AWSAccessKeyId);$("#s3_signature").val(a.params.signature);$("#s3_mime_type").val(a.params["Content-Type"]);
this.uploadForm.submit()}},fileSaveFailed:function(a,d){if(d==null)d="Something went wrong that shouldn't have. Please try again or contact support if the problem persists.";a.row.addClass("error");a.row.find(".js-label").text(d);a.row.find("button").attr("disabled","").addClass("danger").find("span").text("Remove");a.row.find("button").click(function(){a.row.remove();return false})}};
GitHub.UploadFile=function(a){this.id=a.id;this.name=a.name;this.row=a.row;this.size=a.size;this.type=a.type;this.uploader=a.uploader;this.params={}};
GitHub.Uploader.Flash={swfupload:null,init:function(){if(typeof SWFUpload=="undefined")return false;this.swfupload=new SWFUpload({upload_url:GitHub.Uploader.uploadForm.attr("action"),file_post_name:"file",flash_url:"/flash/swfupload.swf",button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_placeholder_id:"flash_choose_file_btn",swfupload_loaded_handler:this.flashLoaded,file_queued_handler:this.fileQueued,upload_start_handler:this.uploadStarted,upload_progress_handler:this.uploadProgress,
upload_error_handler:this.uploadFailure,upload_success_handler:this.uploadSuccess})},upload:function(a){this.swfupload.setPostParams(a.params);this.swfupload.startUpload(a.id)},flashLoaded:function(){GitHub.Uploader.hasFlash=true;GitHub.Uploader.disableFallback();GitHub.Uploader.uploadForm.addClass("swfupload-ready")},fileQueued:function(a){a=new GitHub.UploadFile({id:a.id,name:a.name,size:a.size,type:a.type,uploader:"flash"});GitHub.Uploader.addFileRow(a)},uploadStarted:function(a){a=GitHub.Uploader.files[a.id];
GitHub.Uploader.showUploadStarted(a)},uploadProgress:function(a,d,c){a=GitHub.Uploader.files[a.id];d=Math.round(d/c*100);GitHub.Uploader.showProgress(a,d)},uploadSuccess:function(a){a=GitHub.Uploader.files[a.id];GitHub.Uploader.showSuccess(a)},uploadFailure:function(a){a=GitHub.Uploader.files[a.id];GitHub.Uploader.fileSaveFailed(a,null)}};
GitHub.Uploader.File={init:function(){if(typeof DataTransfer=="undefined")return false;if(!("files"in DataTransfer.prototype))return false;var a=false,d=document.createElement("div");if("ondragenter"in d&&"ondragover"in d&&"ondrop"in d)a=true;if(!a){d.setAttribute("ondragenter","");d.setAttribute("ondragover","");d.setAttribute("ondrop","");if(typeof d.ondragenter=="function"&&typeof d.ondragover=="function"&&typeof d.ondrop=="function")a=true}if(!a)return false;GitHub.Uploader.hasFileAPI=true}};
$(function(){GitHub.Uploader.init();$(".page-downloads .manage-button").live("click",function(){$("#manual_downloads").toggleClass("managing");return false})});GitHub.editableGenerator=function(a){return function(d,c){var b={id:"field",tooltip:"Click to edit!",indicator:"Saving...",data:function(e){return $(c).attr("data")||e},style:"display: inline",onblur:"submit",callback:function(){(function(){$(c).attr("data")&&$(c).attr("data",$(c).text());$(c).trigger("truncate").next().show();$(c).trigger("afterSave.editableGenerator")}).delay(20)}};return $(this).editable($(this).attr("rel"),$.extend({},b,a))}};
$(function(){$(".edit_link").click(function(){$(this).prev().trigger("click");return false})});$(function(){$(".git_url_facebox").click(function(){$.facebox($($(this).attr("rel")).html(),"tip");return false});$(".repo span.edit").each(GitHub.editableGenerator({width:"350px"}));$(".repo span.editarea").each(GitHub.editableGenerator({type:"textarea",width:"550px",height:"100px",cancel:"Cancel",submit:"OK"}));$("span.edit, span.editarea").click(function(){$(this).next().hide()});$("#run_postreceive_test").click(function(){$.post(location.href+"/test_postreceive",{});$.facebox($("#postreceive_test").text());
return false});$("#repository_postreceive_url").bind("afterSave.editableGenerator",function(){$("#repository_postreceive_url").text().slice(0,4)=="http"?$("#run_postreceive_test").show():$("#run_postreceive_test").hide()});$(".toggle_watch").click(function(){if(!github_user)return true;$("#watch_button, #unwatch_button").toggle();$.post($(this).attr("href"),{});return false});$(".watch_button, .unwatch_button").click(function(){if(!github_user)return true;$.post($(this).attr("href"),{});$(this).parent().find(".watch_button, .unwatch_button").toggle();
return false});$("#donation_creation_in_progress").length>0&&$("#activate_pledgie_button").attr("title","We're creating your Pledgie account. We'll PM you when it's ready!").find("span").text("Creating account...");$(".pagehead .nspr .btn-pull-request").click(function(){GitHub.metric("Hit Pull Request Button",{"Pull Request Type":"New School",Action:GitHub.currentAction,"Ref Type":GitHub.revType});return true});$(".test_hook").click(function(){var f=$(this),g=f.prev(".test_hook_message");g.text("Sending payload...");
var h=f.attr("href");$.post(h,{name:f.attr("rel")||""},function(){g.text("Payload deployed")});return false});$(".add_postreceive_url").click(function(){var f=$(this).prev("dl.form").clone();console.log(f);f.find("input").val("");$(this).before(f);return false});$(".remove_postreceive_url").live("click",function(){if($(this).closest(".fields").find("dl.form").length<2){alert("You cannot remove the last post-receive URL");return false}$(this).closest("dl.form").remove();return false});$(".unlock_branch").click(function(){var f=
location.pathname.split("/");f="/"+f[1]+"/"+f[2]+"/unlock_branch/"+f[4];var g=$(this).parents(".notification");$(this).spin().remove();$.post(f,function(){g.hide()});return false});if($("#edit_repo").length>0){var a=$("#change_default_branch"),d=a.find("select"),c=d.val();d.change(function(){a.removeClass("success").removeClass("error").addClass("loading");$.put(a.closest("form").attr("action"),{field:"repository_master_branch",value:d.val()},{success:function(){a.removeClass("loading").addClass("success");
c=d.val()},error:function(){d.val(c);a.removeClass("loading").addClass("error")}})});$(".addon.feature").each(function(){var f=$(this);f.find(":checkbox").change(function(){var g=this;f.removeClass("success").removeClass("error").addClass("loading");$.put(f.closest("form").attr("action"),{field:g.name,value:g.checked?1:0},{success:function(){f.removeClass("loading").addClass("success")},error:function(){g.checked=!g.checked;f.removeClass("loading").addClass("error")}})})});$("#pages_toggle :checkbox").change(function(){$.facebox({div:"#pages_box"});
this.checked=!this.checked});$("#autoresponse_toggle :checkbox").change(function(){if(this.checked){$.facebox({div:"#auto_response_editor"});this.checked=!this.checked}else{var f=$(this).closest(".addon");f.removeClass("success").removeClass("error").addClass("loading");$.put(window.location.pathname.replace("edit","update_pull_request_auto_response"),{success:function(){f.removeClass("loading").addClass("success");f.find(".editlink").remove()}})}});var b=function(){debug("Setting data.completed to %s",
$(this).val());$(this).data("completed",$(this).val())};$("#push_pull_collabs input.ac-add-user-input").userAutocomplete().result(b);$("#push_pull_collabs form").submit(function(){var f=$(this).find(":text"),g=f.val();debug("Trying to add %s...",g);if(!g||!f.data("completed"))return false;function h(j){j!=null?$("#push_pull_collabs .error").text(j).show():$("#push_pull_collabs .error").hide()}h();$.ajax({url:this.action,data:{member:g},type:"POST",dataType:"json",success:function(j){f.val("").removeClass("ac-accept");
j.error?h(j.error):$("#push_pull_collabs ul.usernames").append(j.html)},error:function(){h("An unidentfied error occurred, try again?")}});return false});$("#push_pull_collabs .remove-user").live("click",function(){$.del(this.href);$(this).closest("li").remove();return false});$("#teams form").submit(function(){var f=$(this).find("select"),g=f.val();function h(j){j!=null?$("#push_pull_collabs .error").text(j).show():$("#push_pull_collabs .error").hide()}if(g==""){h("You must select a team");return false}h();
$.ajax({url:this.action,data:{team:g},type:"POST",dataType:"json",success:function(j){f.val("");j.error?h(j.error):$("#teams ul.teams").append(j.html)},error:function(){h("An unidentfied error occurred, try again?")}});return false});$("#teams .remove-team").live("click",function(){$.del(this.href);$(this).closest("li").remove();return false});$(".repohead").is(".vis-public")?$(".private-only").hide():$(".public-only").hide();b=$("#toggle_visibility");b.find("input[type=radio]").change(function(f){if($(this).attr("value")==
"public"){f.preventDefault();$("input[value=private]").attr("checked","checked");$.facebox({div:"#gopublic_confirm"});$("#facebox .gopublic_button").click(function(){var g=$("#toggle_visibility input[value=public]");g.attr("checked","checked");e(g);$.facebox.close()});$("#facebox .footer").hide();return false}if($(this).attr("value")=="private")if(confirm("Are you POSITIVE you want to make this public repository private?  All public watchers will be removed."))e($(this));else{$("input[value=public]").attr("checked",
"checked");return false}});var e=function(f){var g=$("#toggle_visibility");g.removeClass("success").removeClass("error").addClass("loading");$.ajax({type:"POST",url:g.closest("form").attr("action"),success:function(){if($(".repohead").is(".vis-public")){$(".repohead").removeClass("vis-public").addClass("vis-private");$(".private-only").show();$(".public-only").hide()}else{$(".repohead").removeClass("vis-private").addClass("vis-public");$(".private-only").hide();$(".public-only").show()}g.removeClass("loading").addClass("success")},
error:function(){f.checked=false;g.removeClass("loading").addClass("error")}})};$("#copy_permissions ul li a").click(function(){$(this).parents("form").submit();return false});$("#delete_repo").click(function(){var f="Are you sure you want to delete this repository?  There is no going back.";return confirm(f)});$("#reveal_delete_repo_info").click(function(){$(this).toggle();$("#delete_repo_info").toggle();return false});$(document).bind("reveal.facebox",function(){$("#facebox .renaming_to_field").val($("#rename_field").val());
$("#facebox .transfer_to_field").val($("#transfer_field").val())})}});Gollum={encloseStrategy:function(a,d,c){return{type:"enclose",content:d,prefix:a,suffix:c}},prefixStrategy:function(a,d,c){return{type:"prefixLine",prefix:a,content:d,newline:c}},enclose:function(a,d,c){d=Gollum.Formats[d][c];c=a.getSelectionRange();if(c.start==c.end){a.insertText(d.prefix+d.content+d.suffix,c.start,c.start,false);a.setSelectionRange(c.start+d.prefix.length,c.start+d.prefix.length+d.content.length)}else a.insertText(d.prefix+a.getSelectedText()+d.suffix,c.start,c.end,false)},prefix:function(a,
d,c){d=Gollum.Formats[d][c];c=a.getSelectionRange();var b=a.getSelectedText(),e=d.prefix;if(d.newline){a.setSelectionRange(c.start-1,c.start);var f=a.getSelectedText();if(f!="\n")e="\n"+e}if(c.start==c.end){a.insertText(e+d.content,c.start,c.start,false);a.setSelectionRange(c.start+e.length,c.start+e.length+d.content.length)}else a.insertText(e+b+"\n",c.start,c.end,false)}};
Gollum.Formats={asciidoc:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy(". ","Numbered list item",true)},creole:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("//","italic text","//"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)},gollum:{link:Gollum.encloseStrategy("[[",
"Page Name","]]"),image:Gollum.encloseStrategy("[[","/path/to/image.png","]]")},markdown:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},org:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("/","italic text","/"),ul:Gollum.prefixStrategy("- ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ",
"Numbered list item",true)},pod:{bold:Gollum.encloseStrategy("B<","bold text",">"),italic:Gollum.encloseStrategy("I<","italic text",">"),ul:Gollum.prefixStrategy("=item * ","Bullet list item",true),ol:Gollum.prefixStrategy("=item 1. ","Numbered list item",true)},rest:{bold:Gollum.encloseStrategy("**","bold text","**"),italic:Gollum.encloseStrategy("*","italic text","*"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},rdoc:{bold:Gollum.encloseStrategy("*",
"bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("1. ","Numbered list item",true)},textile:{bold:Gollum.encloseStrategy("*","bold text","*"),italic:Gollum.encloseStrategy("_","italic text","_"),ul:Gollum.prefixStrategy("* ","Bullet list item",true),ol:Gollum.prefixStrategy("# ","Numbered list item",true)}};
$(function(){$("#editbar .link").click(function(){var c=$("#guides .write textarea");d();Gollum.enclose(c,"gollum","link")});$("#editbar .image").click(function(){var c=$("#guides .write textarea");d();Gollum.enclose(c,"gollum","image")});$("#editbar .bold").click(function(){var c=$("#guides .write textarea"),b=$("#guides .write select#wiki_format option:selected").attr("value");Gollum.enclose(c,b,"bold")});$("#editbar .italic").click(function(){var c=$("#guides .write textarea"),b=d();Gollum.enclose(c,
b,"italic")});$("#editbar .ul").click(function(){var c=$("#guides .write textarea"),b=d();Gollum.prefix(c,b,"ul")});$("#editbar .ol").click(function(){var c=$("#guides .write textarea"),b=d();Gollum.prefix(c,b,"ol")});$("#editbar .tab.help a").click(function(){if($(this).hasClass("open")){$(this).removeClass("open");$("#editbar .sections").slideUp()}else{$(this).addClass("open");if(!$("#editbar .sections .toc .current").get(0)){var c=$("#editbar .sections .toc .headers").get(0);a.call(c)}$("#editbar .sections").slideDown()}return false});
$("#guides .write select#wiki_format").change(function(){var c=$("#editbar .sections .toc div.current").get(0);a.call(c)});function a(){$("#editbar .sections .toc div").removeClass("current");$(this).addClass("current");$("#editbar .sections .page").removeClass("current");var c=$(this).attr("class").split(" ");c=c[0];var b=d();$(this).hasClass("gollum")?$("#editbar .sections .page."+c).addClass("current"):$("#editbar .sections .page."+c+"."+b).addClass("current");return false}function d(){return $("#guides .write select#wiki_format option:selected").val()}
$("#editbar .sections .toc div").click(a)});$(function(){$(".ejection").each(function(){var a=$(this),d=a.find(".confirming"),c=a.find(".ejecting").hide();d.find("button, .button").click(function(){d.hide();c.show();return false});c.find(".cancel").click(function(){c.hide();d.show();return false})})});$(function(){$(".trending-repositories .times a").live("click",function(a){$(".trending-repositories .ranked-repositories").fadeTo(200,0.5);$(".trending-repositories .trending-heading").contextLoader(28);a.preventDefault()}).pjax(".trending-repositories",{data:{trending:true},timeout:null,error:function(a,d){$(".trending-repositories .context-loader").remove();$(".trending-repositories .ranked-repositories").fadeTo(0,1);$(".trending-repositories ol").empty().append("<li>Something went wrong: "+d+
"</li>")}})});$(function(){var a=$(".community .bigcount");function d(){var g=a.width()+parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"));a.css("margin-left","-"+g/2+"px");a.fadeIn()}a.length>0&&setTimeout(d,500);var c=$(".js-slidy-highlight");if(c.length>0){var b=c.find("li.highlight"),e=b.width()/2;e+=-1;var f=function(g){g=g.closest("li");var h=g.position();h=h.left+g.width()/2-e;h+=parseInt(g.css("margin-left"));return h};c.bind("tabChanged",function(g,h){g=f(h.link);b.animate({left:g},300)});
c=f(c.find(".selected"));b.css({left:c})}});GitHub||(GitHub={});GitHub.FileEditForkPoller=function(a,d){var c=$(d||document).find(".check-for-fork");if(c.length!=0){var b=$(d||document).find("#submit-file");b.attr("disabled","disabled");c.show();var e="/"+github_user+"/"+GitHub.repoName+"/check";$.smartPoller(a||2000,function(f){$.ajax({url:e,error:function(g){g.status==404?f():c.html('<img src="/images/modules/ajax/error.png"> Something went wrong. Please fork the project, then edit this file.')},success:function(){c.hide();b.removeAttr("disabled")}})})}};
$(function(){GitHub.FileEditForkPoller()});$(function(){$("#forkqueue #head-sha").text();$("#forkqueue .untested:first").each(function(){a()});function a(){var b=$("#forkqueue .untested").length,e=$("#head-sha").text();if(b>0){var f=$("#forkqueue .untested:first");b=f.attr("name");$(".icons",f).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');$.get("forkqueue/applies/"+e+"/"+b,function(g){f.removeClass("untested");if(g=="NOPE"){f.addClass("unclean");$(".icons",f).html("")}else if(g=="YUP"){f.addClass("clean");$(".icons",
f).html("")}else $(".icons",f).html("err");a()})}}$(".action-choice").change(function(){var b=$(this).attr("value");if(b=="ignore"){b=$(this).parents("form");var e=b.find("tr:not(:first)"),f=b.find("input:checked");f.each(function(g,h){g=$(h).attr("ref");$(h).parents("tr").children(".icons").html("ignoring...");$.post("forkqueue/ignore/"+g,{})});b=e.length==f.length?b:f.parents("tr");b.fadeOut("normal",function(){$(this).remove()})}else if(b=="apply"){b=$(this).parents("form");b.submit()}$(this).children(".default").attr("selected",
1)});var d=[];$("#forkqueue input[type=checkbox]").click(function(b){var e=$(this).attr("class").match(/^r-(\d+)-(\d+)$/),f=parseInt(e[1]);e=parseInt(e[2]);if(b.shiftKey&&d.length>0){b=d[d.length-1];var g=b.match(/^r-(\d+)-(\d+)$/);b=parseInt(g[1]);g=parseInt(g[2]);if(f==b){b=$(this).attr("checked")==true;g=[e,g].sort();e=g[0];g=g[1];for(e=e;e<g;e++)b==true?$("#forkqueue input.r-"+f+"-"+e).attr("checked","true"):$("#forkqueue input.r-"+f+"-"+e).removeAttr("checked")}}d.push($(this).attr("class"))});
$("#forkqueue a.select_all").click(function(){$(this).removeClass("select_all");var b=$(this).attr("class");$(this).addClass("select_all");$("#forkqueue tr."+b+" input[type=checkbox]").attr("checked","true");d=[];return false});$("#forkqueue a.select_none").click(function(){$(this).removeClass("select_none");var b=$(this).attr("class");$(this).addClass("select_none");$("#forkqueue tr."+b+" input[type=checkbox]").removeAttr("checked");d=[];return false});$("table#queue tr.not-applied:first").each(function(){c()});
$("#change-branch").click(function(){$("#int-info").hide();$("#int-change").show();return false});$("#change-branch-nevermind").click(function(){$("#int-change").hide();$("#int-info").show();return false});function c(){var b=$("table#queue tr.not-applied").length,e=$("#head-sha").text();if(b>0){var f=$("#total-commits").text();$("#current-commit").text(f-b+1);var g=$("table#queue tr.not-applied:first");b=g.attr("name");$(".date",g).html("applying");$(".icons",g).html('<img src="/images/modules/ajax/indicator.gif" alt="Processing" />');
$.post("patch/"+e+"/"+b,function(h){g.removeClass("not-applied");if(h=="NOPE"){g.addClass("unclean_failure");$(".date",g).html("failed");$(".icons",g).html('<img src="/images/icons/exclamation.png" alt="Failed" />')}else{$("#head-sha").text(h);g.addClass("clean");$(".date",g).html("applied");$(".apply-status",g).attr("value","1");$(".icons",g).html('<img src="/images/modules/dashboard/news/commit.png" alt="Applied" />')}c()})}else{$("#new-head-sha").attr("value",e);$("#finalize").show()}}$(".js-fq-new-version").each(function(){var b=
$("#fq-repo").text();console.log("repo:",b);var e=$(this).hasClass("reload");$.smartPoller(function(f){$.getJSON("/cache/network_current/"+b,function(g){if(g&&g.current){e&&window.location.reload(true);$(".js-fq-polling").hide();$(".js-fq-new-version").show()}else f()})})})});$(function(){if($(".business .logos").length>0){var a=[["Shopify","shopify.png","http://shopify.com/"],["CustomInk","customink.png","http://customink.com/"],["Pivotal Labs","pivotallabs.png","http://pivotallabs.com/"],["FiveRuns","fiveruns.png","http://fiveruns.com/"],["PeepCode","peepcode.png","http://peepcode.com/"],["Frogmetrics","frogmetrics.png","http://frogmetrics.com/"],["Upstream","upstream.png","http://upstream-berlin.com/"],["Terralien","terralien.png","http://terralien.com/"],["Planet Argon",
"planetargon.png","http://planetargon.com/"],["Tightrope Media Systems","tightropemediasystems.png","http://trms.com/"],["Rubaidh","rubaidh.png","http://rubaidh.com/"],["Iterative Design","iterativedesigns.png","http://iterativedesigns.com/"],["GiraffeSoft","giraffesoft.png","http://giraffesoft.com/"],["Evil Martians","evilmartians.png","http://evilmartians.com/"],["Crimson Jet","crimsonjet.png","http://crimsonjet.com/"],["Alonetone","alonetone.png","http://alonetone.com/"],["EntryWay","entryway.png",
"http://entryway.net/"],["Fingertips","fingertips.png","http://fngtps.com/"],["Run Code Run","runcoderun.png","http://runcoderun.com/"],["Be a Magpie","beamagpie.png","http://be-a-magpie.com/"],["Rocket Rentals","rocketrentals.png","http://rocket-rentals.de/"],["Connected Flow","connectedflow.png","http://connectedflow.com/"],["Dwellicious","dwellicious.png","http://dwellicious.com/"],["Assay Depot","assaydepot.png","http://www.assaydepot.com/"],["Centro","centro.png","http://www.centro.net/"],["Debuggable Ltd.",
"debuggable.png","http://debuggable.com/"],["Blogage.de","blogage.png","http://blogage.de/"],["ThoughtBot","thoughtbot.png","http://www.thoughtbot.com/"],["Viget Labs","vigetlabs.png","http://www.viget.com/"],["RateMyArea","ratemyarea.png","http://www.ratemyarea.com/"],["Abloom","abloom.png","http://abloom.at/"],["LinkingPaths","linkingpaths.png","http://www.linkingpaths.com/"],["MIKAMAI","mikamai.png","http://mikamai.com/"],["BEKK","bekk.png","http://www.bekk.no/"],["Reductive Labs","reductivelabs.png",
"http://www.reductivelabs.com/"],["Sexbyfood","sexbyfood.png","http://www.sexbyfood.com/"],["Factorial, LLC","yfactorial.png","http://yfactorial.com/"],["SnapMyLife","snapmylife.png","http://www.snapmylife.com/"],["Scrumy","scrumy.png","http://scrumy.com/"],["TinyMassive","tinymassive.png","http://www.tinymassive.com/"],["SOCIALTEXT","socialtext.png","http://www.socialtext.com/"],["All-Seeing Interactive","allseeinginteractive.png","http://allseeing-i.com/"],["Howcast","howcast.png","http://www.howcast.com/"],
["Relevance Inc","relevance.png","http://thinkrelevance.com/"],["Nitobi Software Inc","nitobi.png","http://www.nitobi.com/"],["99designs","99designs.png","http://99designs.com/"],["EdgeCase, LLC","edgecase.png","http://edgecase.com"],["Plinky","plinky.png","http://www.plinky.com/"],["One Design Company","onedesigncompany.png","http://onedesigncompany.com/"],["CollectiveIdea","collectiveidea.png","http://collectiveidea.com/"],["Stateful Labs","statefullabs.png","http://stateful.net/"],["High Groove Studios",
"highgroove.png","http://highgroove.com/"],["Exceptional","exceptional.png","http://www.getexceptional.com/"],["DealBase","dealbase.png","http://www.dealbase.com/"],["Silver Needle","silverneedle.png","http://silverneedlesoft.com/"],["No Kahuna","nokahuna.png","http://nokahuna.com/"],["Double Encore","doubleencore.png","http://www.doubleencore.com/"],["Yahoo","yahoo.gif","http://yahoo.com/"],["EMI Group Limited","emi.png","http://emi.com/"],["TechCrunch","techcrunch.png","http://techcrunch.com/"],
["WePlay","weplay.png","http://weplay.com/"]],d=function(){var c=$(".business .logos table");$.each(a,function(g,h){c.append('<tr><td><a href="'+h[2]+'" rel="nofollow"><img src="http://assets'+g%4+".github.com/images/modules/home/customers/"+h[1]+'" alt="'+h[0]+'" /></a></td></tr>')});parseInt($(".business .slide").css("top"));var b=$(".business .logos td").length-4,e=0;function f(){e+=1;var g=parseInt($(".business .slide").css("top"));if(Math.abs(g+b*75)<25){$(".business .slide").css("top",0);e=
0}else $(".business .slide").animate({top:"-"+e*75+"px"},1500)}setInterval(f,3000)};setTimeout(d,1000)}});$(function(){var a={success:function(){$.smartPoller(3000,function(d){$.getJSON($("#new_import").attr("action")+"/grab_authors",{},function(c){if(c==false)return d();if(c.length==0){$("#new_import input[type=submit]").attr("disabled","").val("Import SVN Authors").show();alert("No authors were returned, please try a different URL")}else{$.each(c,function(b,e){b=$('<tr><td><input type="text" readonly="readonly" value="'+e+'" name="svn_authors[]" /></td><td><input type="text" class="git_author" name="git_authors[]"/></td></tr>');
b.appendTo("#authors-list")});$("#import-submit").show()}$("#wait").slideUp();$("#import_repo").show();$("#author_entry").slideDown()})})},beforeSubmit:function(d,c){d=$("#svn_url").val();if(!d.match(/^https?:\/\//)&&!d.match(/^svn:\/\//)){alert("Please enter a valid subversion url");return false}c.find("input[type=submit]").hide();$("#authors").slideDown()}};$("#new_import").ajaxForm(a);$("#import-submit").click(function(){$(this).attr("disabled","disabled");var d=false,c=$("#authors-list input.git_author[value=]").size(),
b=$("#authors-list input.git_author").size()-c;if(c>0&&b>0){alert("You must either fill in all author names or none.");d=true}$("#authors-list input.git_author").each(function(){var e=$(this).val();if(!d&&e!=""&&!/^[^<]+<[^>]+>$/.test(e)){alert("'"+e+"' is not a valid git author.  Authors must match the format 'User Name <user@domain>'");d=true}});if(d){$("#import-submit").attr("disabled","");return false}else $("form#new_repository").submit()})});$(function(){$(".cancel-compose").click(function(){window.location="/inbox";return false});$("#inbox .del a").click(function(){var a=$(this),d=a.parents(".item"),c=d.attr("data-type")=="message"?"inbox":"notification",b=".js-"+c+"-count";a.find("img").attr("src",GitHub.Ajax.spinner);$.ajax({type:"DELETE",url:a.attr("rel"),error:function(){a.find("img").attr("src",GitHub.Ajax.error)},success:function(){if(d.is(".unread")){var e=parseInt($(b+":first").text());if(e>0)$(b).text(e-=1);e==0&&$(b).each(function(){var f=
$(this);if(f.is(".new"))f.removeClass("new");else f.parent().is(".new")&&f.parent().removeClass("new")})}d.remove()}});return false});$("#reveal_deleted").click(function(){$(this).parent().hide();$(".hidden_message").show();return false})});$(function(){$("#impact_graph").length>0&&GitHub.ImpactGraph.drawImpactGraph()});
GitHub.ImpactGraph={colors:null,data:null,chunkVerticalSpace:2,initColors:function(a){seedColors=[[222,0,0],[255,141,0],[255,227,0],[38,198,0],[0,224,226],[0,33,226],[218,0,226]];this.colors=[];var d=0;for(var c in a){var b=seedColors[d%7];if(d>6)b=[this.randColorValue(b[0]),this.randColorValue(b[1]),this.randColorValue(b[2])];this.colors.push(b);d+=1}},drawImpactGraph:function(){var a={},d=$("#impact_graph").attr("rel"),c=this;$.smartPoller(function(b){$.getJSON("/"+d+"/graphs/impact_data",function(e){if(e&&
e.authors){c.initColors(e.authors);var f=c.createCanvas(e);e=c.padChunks(e);c.data=e;$.each(e.buckets,function(g,h){c.drawBucket(a,h,g)});c.drawAll(f,e,a);c.authorHint()}else b()})})},createCanvas:function(a){var d=a.buckets.length*50*2-50,c=0;for(var b in a.buckets){var e=a.buckets[b],f=0;for(var g in e.i){var h=e.i[g];f+=this.normalizeImpact(h[1])+this.chunkVerticalSpace}if(f>c)c=f}$("#impact_graph div").remove();a=$("#impact_graph");a.height(c+50).css("border","1px solid #aaa");$("#caption").show();
a.append('<canvas width="'+d+'" height="'+(c+30)+'"></canvas>');d=$("#impact_graph canvas")[0];return d.getContext("2d")},padChunks:function(a){for(var d in a.authors){var c=this.findFirst(d,a),b=this.findLast(d,a);for(c=c+1;c<b;c++)this.bucketHasAuthor(a.buckets[c],d)||a.buckets[c].i.push([d,0])}return a},bucketHasAuthor:function(a,d){for(var c=0;c<a.i.length;c++)if(a.i[c][0]==parseInt(d))return true;return false},findFirst:function(a,d){for(var c=0;c<d.buckets.length;c++)if(this.bucketHasAuthor(d.buckets[c],
a))return c},findLast:function(a,d){for(var c=d.buckets.length-1;c>=0;c--)if(this.bucketHasAuthor(d.buckets[c],a))return c},colorFor:function(a){a=this.colors[a];return"rgb("+a[0]+","+a[1]+","+a[2]+")"},randColorValue:function(a){var d=Math.round(Math.random()*100)-50;a=a+d;if(a>255)a=255;if(a<0)a=0;return a},drawBucket:function(a,d,c){var b=0,e=this;$.each(d.i,function(f,g){f=g[0];var h=e.normalizeImpact(g[1]);a[f]||(a[f]=[]);a[f].push([c*100,b,50,h,g[1]]);b=b+h+e.chunkVerticalSpace})},normalizeImpact:function(a){return a<=
9?a+1:a<=5000?Math.round(10+a/50):Math.round(100+Math.log(a)*10)},drawAll:function(a,d,c){this.drawStreams(a,c,null);this.drawDates(d)},drawStreams:function(a,d,c){a.clearRect(0,0,10000,500);$(".activator").remove();for(var b in d)b!=c&&this.drawStream(b,d,a,true);c!=null&&this.drawStream(c,d,a,false)},drawStream:function(a,d,c,b){c.fillStyle=this.colorFor(a);chunks=d[a];for(var e=0;e<chunks.length;e++){var f=chunks[e];c.fillRect(f[0],f[1],f[2],f[3]);b&&this.placeActivator(a,d,c,f[0],f[1],f[2],f[3],
f[4]);if(e!=0){c.beginPath();c.moveTo(previousChunk[0]+50,previousChunk[1]);c.bezierCurveTo(previousChunk[0]+75,previousChunk[1],f[0]-25,f[1],f[0],f[1]);c.lineTo(f[0],f[1]+f[3]);c.bezierCurveTo(f[0]-25,f[1]+f[3],previousChunk[0]+75,previousChunk[1]+previousChunk[3],previousChunk[0]+50,previousChunk[1]+previousChunk[3]);c.fill()}previousChunk=f}},drawStats:function(a,d){chunks=d[a];for(a=0;a<chunks.length;a++){d=chunks[a];var c=d[4];c>10&&this.drawStat(c,d[0],d[1]+d[3]/2)}},drawStat:function(a,d,c){var b=
"";b+="position: absolute;";b+="left: "+d+"px;";b+="top: "+c+"px;";b+="width: 50px;";b+="text-align: center;";b+="color: #fff;";b+="font-size: 9px;";b+="z-index: 0;";$("#impact_graph").append('<p class="stat" style="'+b+'">'+a+"</p>")},drawDate:function(a,d,c){c+=3;var b="";b+="position: absolute;";b+="left: "+d+"px;";b+="top: "+c+"px;";b+="width: 50px;";b+="text-align: center;";b+="color: #888;";b+="font-size: 9px;";$("#impact_graph").append('<p style="'+b+'">'+a+"</p>")},placeActivator:function(a,
d,c,b,e,f,g){e+=5;var h="";h+="position: absolute;";h+="left: "+b+"px;";h+="top: "+e+"px;";h+="width: "+f+"px;";h+="height: "+g+"px;";h+="z-index: 100;";h+="cursor: pointer;";b="a"+b+"-"+e;$("#impact_graph").append('<div class="activator" id="'+b+'" style="'+h+'">&nbsp;</div>');var j=this;$("#"+b).mouseover(function(l){$(l.target).css("background-color","black").css("opacity","0.08");j.drawAuthor(a)}).mouseout(function(l){$(l.target).css("background-color","transparent");j.clearAuthor();j.authorHint()}).mousedown(function(){$(".stat").remove();
j.clearAuthor();j.drawStreams(c,d,a);j.drawStats(a,d);j.drawSelectedAuthor(a);j.authorHint()})},drawDates:function(a){var d=this;$.each(a.buckets,function(c,b){var e=0;$.each(b.i,function(h,j){e+=d.normalizeImpact(j[1])+1});var f=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],g=new Date;g.setTime(b.d*1000);b=""+g.getDate()+" "+f[g.getMonth()]+" "+g.getFullYear();d.drawDate(b,c*100,e+7)})},authorText:function(a,d,c){var b=null;b=c<25?"selected_author_text":"author_text";
var e="";e+="position: absolute;";e+="left: "+d+"px;";e+="top: "+c+"px;";e+="width: 920px;";e+="color: #444;";e+="font-size: 18px;";$("#impact_legend").append('<p id="'+b+'" style="'+e+'">'+a+"</p>")},authorHint:function(){this.authorText('<span style="color: #aaa;">mouse over the graph for more details</span>',0,30)},drawAuthor:function(a){this.clearAuthor();var d=$("#impact_legend canvas")[0].getContext("2d");d.fillStyle=this.colorFor(a);d.strokeStyle="#888888";d.fillRect(0,30,20,20);d.strokeRect(0.5,
30.5,19,19);a=this.data.authors[a].n;this.authorText(a+' <span style="color: #aaa;">(click for more info)</span>',25,30)},drawSelectedAuthor:function(a){this.clearSelectedAuthor();var d=$("#impact_legend canvas")[0].getContext("2d");d.fillStyle=this.colorFor(a);d.strokeStyle="#000000";d.fillRect(0,0,20,20);d.strokeRect(0.5,0.5,19,19);var c=this.data.authors[a];a=c.n;d=c.c;var b=c.a;c=c.d;this.authorText(a+" ("+d+" commits, "+b+" additions, "+c+" deletions)",25,0)},clearAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");
a.clearRect(0,30,920,20);$("#author_text").remove()},clearSelectedAuthor:function(){var a=$("#impact_legend canvas")[0].getContext("2d");a.clearRect(0,0,920,20);$("#selected_author_text").remove()}};GitHub.BaseBrowser={pagingLimit:99,showingClosed:false,showingOpen:true,showingRead:true,activeSort:["created","desc"],currentPage:1,initialized:false,errored:false,lastUrl:null,lastPage:1,listings:$(),openListings:$(),closedListings:$(),unreadListings:$(),filteredListings:$(),activeIssue:$(),listingsElement:null,noneShownElement:null,errorElement:null,loaderElement:null,titleElement:null,footerElement:null,sortElements:null,pagingElement:null,init:function(a){var d=this;this.wrapper=$(a);if(this.initialized)return alert("Only one IssueBrowser per page can exist");
if(this.wrapper.length==0)return false;this.listingsElement=this.wrapper.find(".listings");this.noneShownElement=this.wrapper.find(".none");this.errorElement=this.wrapper.find(".error");this.loaderElement=this.wrapper.find(".context-loader");this.titleElement=this.wrapper.find("h2");this.footerElement=this.wrapper.find(".footerbar-text");this.pagingElement=this.wrapper.find(".paging");$.hotkeys({j:function(){d.cursorDown()},k:function(){d.cursorUp()},o:function(){d.showIssue()},enter:function(){d.showIssue()}});
a=this.wrapper.find("ul.filters li");a.each(function(){var b=$(this);switch(b.attr("data-filter")){case "open":d.showingOpen&&b.addClass("selected");b.click(function(){b.toggleClass("selected");d.showOpen(b.hasClass("selected"))});break;case "closed":d.showingClosed&&b.addClass("selected");b.click(function(){b.toggleClass("selected");d.showClosed(b.hasClass("selected"))});break;case "read":d.showingRead&&b.addClass("selected");b.click(function(){b.toggleClass("selected");d.showRead(b.hasClass("selected"))});
break}});this.sortElements=this.wrapper.find("ul.sorts li");var c=null;this.sortElements.each(function(){var b=$(this);if(b.attr("data-sort")==d.activeSort[0])c=b.addClass(d.activeSort[1]);b.click(function(){var e=$(this);c&&c.attr("data-sort")!=e.attr("data-sort")&&c.removeClass("asc").removeClass("desc");if(e.hasClass("desc")){d.sortBy(e.attr("data-sort"),"asc");e.removeClass("desc").addClass("asc")}else{d.sortBy(e.attr("data-sort"),"desc");e.removeClass("asc").addClass("desc")}c=e})});this.pagingElement.find(".button-pager").click(function(){d.showMore();
return false});this.setupMouseActions();this.initNavigation();this.initialized=true;a=this.listingsElement.find(".preloaded-content");if(a.length>0){this.selectedLink=$(this.wrapper.find('a[href="'+a.attr("data-url")+'"]').get(0));this.selectedLink.addClass("selected");this.lastUrl=this.selectedLink.attr("href");this.render(this.listingsElement.innerHTML)}},setupMouseActions:function(){var a=this;this.listingsElement.delegate(".listing","mouseover",function(){a.activeIssue.removeClass("active");a.activeIssue=
$(this).addClass("active")})},initNavigation:function(){var a=this;this.selectedLink=null;this.wrapper.find("ul.bignav a, ul.smallnav a").click(function(g){var h=$(this);if(g.which==2||g.metaKey)return true;"replaceState"in window.history&&!h.hasClass("js-stateless")&&window.history.replaceState(null,document.title,h.attr("href"));if(a.selectedLink&&h.attr("href")==a.selectedLink.attr("href")&&!a.errored)return false;a.getPulls(h.attr("href"));a.selectedLink&&a.selectedLink.removeClass("selected");
a.selectedLink=$(this).addClass("selected");return false});var d=this.wrapper.find(".filterbox input"),c=this.wrapper.find("ul.smallnav"),b=c.find("li");function e(){b.show();d.val()!=""&&b.filter(":not(:Contains('"+d.val()+"'))").hide()}var f=d.val();d.bind("keyup blur click",function(){if(this.value!=f){f=this.value;e()}})},getPulls:function(a,d){var c=this;if(d==undefined)d={};if(a!=this.lastUrl)this.currentPage=1;this.startLoading();$.ajax({url:a,data:d,success:function(b){c.errored=false;c.cancelLoading();
c.errorElement.hide();c.lastPage==d.page||d.page==1||d.page==undefined?c.render(b):c.render(b,true);c.lastUrl=a;if(d.page)c.lastPage=d.page},error:function(){c.errored=true;c.showError()}})},startLoading:function(){this.listingsElement.fadeTo(200,0.5);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,0.5);this.loaderElement.show()},cancelLoading:function(){this.listingsElement.fadeTo(200,1);this.noneShownElement.is(":visible")&&this.noneShownElement.fadeTo(200,1);this.loaderElement.hide()},
showError:function(){this.cancelLoading();this.listings&&this.listings.hide();this.noneShownElement.hide();this.errorElement.show()},render:function(a,d){if(d==undefined)d=false;d?this.listingsElement.append(a):this.listingsElement.html(a);this.listings=this.listingsElement.find(".listing");this.listings.trigger("pageUpdate");if(this.currentPage==1)if(this.listings.length>=this.pagingLimit){this.pagingElement.show();$(this.listings[this.listings.length-1]).remove();this.listings=this.listingsElement.find(".listing")}if(d){this.pagingElement.hide();
a=$("<div>").append(a).find(".listing");if(a>this.pagingLimit){this.pagingElement.show();$(this.listings[this.listings.length-1]).remove();this.listings=this.listingsElement.find(".listing")}}this.closedListings=this.listings.filter("[data-state=closed]");this.openListings=this.listings.filter("[data-state=open]");this.readListings=this.listings.filter("[data-read=1]");this.setCounts(this.openListings.length,this.closedListings.length);this.update()},plural:function(a){return a==1?"request":"requests"},
setCounts:function(a,d){var c=a+" open "+this.plural(a);a=a+" open "+this.plural(a)+" and "+d+" closed "+this.plural(d);this.titleElement.text(c);this.footerElement.text(a)},showOpen:function(a){this.currentPage=1;this.showingOpen=a?true:false;this.remoteUpdate()},showRead:function(a){this.showingRead=a?true:false;this.update()},showClosed:function(a){this.currentPage=1;this.showingClosed=a?true:false;this.remoteUpdate()},showMore:function(){this.currentPage++;this.remoteUpdate();return true},sortBy:function(a,
d){this.activeSort=[a,d];this.currentPage=1;return this.remoteUpdate()},cursorToDefault:function(){this.activeIssue.removeClass("active");this.activeIssue=$(this.listings.filter(":visible").get(0)).addClass("active");this.adjustViewForCursor()},cursorUp:function(){for(var a=this.activeIssue.prev(".listing");!a.is(":visible")&&a.length!=0;)a=a.prev(".listing");if(a.length!=0){this.activeIssue.removeClass("active");this.activeIssue=a.addClass("active");this.adjustViewForCursor()}},cursorDown:function(){for(var a=
this.activeIssue.next(".listing");!a.is(":visible")&&a.length!=0;)a=a.next(".listing");if(a.length!=0){this.activeIssue.removeClass("active");this.activeIssue=a.addClass("active");this.adjustViewForCursor()}},adjustViewForCursor:function(){var a=this.activeIssue;if(a.offset())if(a.offset().top-$(window).scrollTop()+20>$(window).height())a.scrollTo(10);else a.offset().top-$(window).scrollTop()<0&&$("html,body").animate({scrollTop:a.offset().top-$(window).height()},200)},showIssue:function(){document.location=
this.activeIssue.find("h3 a").attr("href")},update:function(){if(this.listings!=null){this.listings.show();this.showingClosed||this.closedListings.hide();this.showingOpen||this.openListings.hide();this.showingRead||this.readListings.hide();this.filteredListings.hide();var a=this.listings.filter(":visible").length;a==0?this.noneShownElement.show():this.noneShownElement.hide();this.cursorToDefault()}},remoteUpdate:function(){var a={sort:this.activeSort[0],direction:this.activeSort[1],page:this.currentPage,
exclude:["none"]};if(!this.showingClosed||!this.showingOpen){this.showingOpen||a.exclude.push("open");this.showingClosed||a.exclude.push("closed");a.exclude=a.exclude.join(",")}this.getPulls(this.lastUrl,a)}};GitHub.PullRequestBrowser={};jQuery.extend(true,GitHub.PullRequestBrowser,GitHub.BaseBrowser);$(function(){$("#js-issue-list").length>0&&GitHub.PullRequestBrowser.init("#js-issue-list")});$(function(){var a=$("#issues_next");if(a.length!=0){var d=function(n,s){if(window.history&&window.history.pushState)$.pjax({container:n,timeout:null,url:s});else{if($.isFunction(s))s=s();window.location=s}};$(".js-editable-labels-container .js-manage-labels").live("click",function(){var n=$(this),s=n.closest(".js-editable-labels-container"),t=s.find(".js-editable-labels-show");s=s.find(".js-editable-labels-edit");if(t.is(":visible")){t.hide();s.show();n.addClass("selected");$(document).bind("keydown.manage-labels",
function(x){x.keyCode==27&&n.click()})}else{s.hide();t.show();n.removeClass("selected");$(document).unbind("keydown.manage-labels")}return false});$(".js-custom-color-field a").live("click",function(){var n=$(this).closest(".js-custom-color-field");n.find(".field").show();return false});$(".js-custom-color-field input[type=text]").live("keyup",function(){var n=$(this).closest(".js-custom-color-field"),s=$(this).val();if(s.length==6){n.find(".field").find("input[type=radio]").val(s).attr("checked",
"checked");n.find("a").html("Custom color: <strong>#"+s+"</strong>")}});$(".js-new-label-form .js-label-field").live("focus",function(){$(this).closest(".js-new-label-form").find(".js-color-chooser-fade-in").fadeIn(300)});var c=function(){var n=/page=([^&#]+)/.exec(window.location.search);return n?parseInt(n[1]):1},b=a.find("#issues_list");if(b.length>0){var e=b.attr("data-params");e&&!location.search&&"replaceState"in window.history&&window.history.replaceState(null,document.title,location.pathname+
"?"+e);b.bind("start.pjax",function(){b.find(".context-loader").show();b.find(".issues").fadeTo(200,0.5)}).bind("end.pjax",function(){b.find(".issues").fadeTo(200,1);b.find(".context-loader").hide()});var f=function(n){n||(n={});var s={labels:[],sort:"",direction:"",state:"",page:n.preservePage?c():1};n=b.find(".milestone-context").attr("data-selected-milestone");if(n!=""&&n!=null)s.milestone=n;b.find(".sidebar ul.labels").find(".selected").each(function(t,x){s.labels.push($(x).attr("data-label"))});
s.labels=s.labels.join(",");s.labels==""&&delete s.labels;n=b.find(".main .filterbar ul.sorts").find(".asc, .desc");s.sort=n.attr("data-sort");s.direction=n.attr("class");s.state=b.find(".main .filterbar ul.filters").find(".selected").attr("data-filter");n=b.find("ul.bignav").find(".selected").attr("href");return n+"?"+$.param(s)};e=[".sidebar ul.bignav a",".sidebar ul.labels a",".main .filterbar ul.filters li",".main .filterbar ul.sorts li",".milestone-context .pane-selector .milestone"];b.find(e.join(",")).pjax(b.selector,
{timeout:null,url:f});b.delegate(".pagination a, #clear-active-filters","click",function(n){n.preventDefault();d(b.selector,$(this).attr("href"))});b.selectableList(".sidebar ul.bignav",{mutuallyExclusive:true});b.selectableList(".sidebar ul.labels");b.selectableList(".main .filterbar ul.filters",{wrapperSelector:"",mutuallyExclusive:true});b.selectableList(".js-selectable-issues",{wrapperSelector:"",itemParentSelector:".issue",enableShiftSelect:true,ignoreLinks:true});b.sortableHeader(".main .filterbar ul.sorts");
b.contextButton(".sidebar .milestone .js-milestone-context",{contextPaneSelector:".milestone-context"});b.delegate(".milestone-context .pane-selector .milestone","click",function(){var n=$(this);n.closest(".milestone-context").attr("data-selected-milestone",n.attr("data-milestone"));n.closest(".milestone-context").trigger("close")});b.delegate(".issues table","click",function(n){var s=$(n.target);if(n.which>1||n.metaKey||s.closest("a").length)return true;n=$(this);var t=n.find(".issue.selected"),
x=b.find(".issues .actions .buttons");if(t.length>0){x.addClass("activated");x.removeClass("deactivated")}else{x.removeClass("activated");x.addClass("deactivated")}n.find(".issue.active").removeClass("active");s.closest(".issue").addClass("active")});b.find(":checked").removeAttr("checked");var g="active",h=function(n){var s={issues:[]};b.find(".issues :checked").each(function(t,x){s.issues.push($(x).val())});$.ajax({url:n||b.find(".issues .btn-close").attr("data-url"),method:"put",data:$.param(s),
success:function(){d(b.selector,f({preservePage:true}))}})},j=function(){var n=b.find(".issues ."+g),s=b.find(".issues .issue:first"),t=b.find(".issues .issue:last");if(n.length>0)if(n[0]==t[0]){n.removeClass(g);s.addClass(g)}else n.removeClass(g).next().addClass(g);else b.find(".issues .issue:first").addClass("active")},l=function(){var n=b.find(".issues ."+g),s=b.find(".issues .issue:first"),t=b.find(".issues .issue:last");if(n.length>0)if(n[0]==s[0]){n.removeClass(g);t.addClass(g)}else n.removeClass(g).prev().addClass(g);
else b.find(".issues .issue:last").addClass(g)},k=function(){var n=b.find(".issues ."+g);if(n.length>0)window.location=n.find(".info h3 a").attr("href")},m=function(){var n=b.find(".issues ."+g);n.length>0&&n.click()},o=function(){window.location=a.find(".btn-new-issue").attr("href")},p=function(n){n.preventDefault();$("#new_label_form .namefield").focus()};$.hotkeys({e:h,j:j,k:l,o:k,enter:k,x:m,c:o,l:p});var q="#issues_list .label-context";b.delegate(".label-context button.update-labels","click",
function(){$(this);var n={labels:[],issues:[]};b.find(".label-context ul.labels :checked").each(function(s,t){n.labels.push($(t).val())});b.find(".issues :checked").each(function(s,t){n.issues.push($(t).val())});$(this).closest(".label-context").trigger("close");$.ajax({url:b.find(".label-context ul.labels").attr("data-url"),method:"put",data:n,complete:function(){d(b.selector,f({preservePage:true}))}})});b.selectableList(".label-context ul.labels");b.delegate(".issues .btn-close, .issues .btn-reopen",
"click",function(){h($(this).attr("data-url"))});b.delegate(".issues .btn-label","click",function(){var n=b.find(".issues :checked").closest(".issue").find(".label");a.find(q+" .label a.selected").removeClass("selected");a.find(q+" :checked").attr("checked",false);n.each(function(s,t){s=$(t).attr("data-name");a.find(q+" .label[data-name="+s+"] a").addClass("selected");a.find(q+" .label[data-name="+s+"] :checkbox").attr("checked",true)})});b.contextButton(".issues .btn-label",{contextPaneSelector:q});
b.contextButton(".issues .btn-assignee",{contextPaneSelector:".assignee-assignment-context"});b.contextButton(".issues .btn-milestone",{contextPaneSelector:".milestone-assignment-context"});var v=function(n){n=$(n.target).closest(".assignee-assignment-context").find(":checked");var s={issues:[],assignee:n.val()};b.find(".issues :checked").each(function(t,x){s.issues.push($(x).val())});$.ajax({url:n.attr("data-url"),method:"put",data:$.param(s),success:function(){d(b.selector,f({preservePage:true}))}})};
b.delegate(".issues .btn-assignee","click",function(){var n=$(".assignee-assignment-context");if(n.data("applied")!=true){n.data("applied",true);n.assigneeFilter(v)}});b.delegate(".assignee-assignment-context :radio","change",v);b.delegate(".milestone-assignment-context input[type=radio]","change",function(){var n=$(this),s={issues:[],milestone:n.val()};b.find(".issues :checked").each(function(t,x){s.issues.push($(x).val())});$.ajax({url:n.attr("data-url"),method:"put",data:$.param(s),success:function(){d(b.selector,
f({preservePage:true}))}})});b.selectableList("ul.color-chooser",{wrapperSelector:"li.color",mutuallyExclusive:true});b.delegate("ul.color-chooser li.color","click",function(){$(this).find("input[type=radio]").val();var n=$("#custom_label_text");n.text(n.attr("data-orig"))});b.delegate(e.join(","),"click",function(n){if(!window.history||!window.history.pushState){n.preventDefault();window.location=f()}})}var r=a.find("#milestone_list");if(r.length>0){r.bind("start.pjax",function(){if(!jQuery.pjax.firstLoad){r.find(".context-loader").show();
r.find(".milestones").fadeTo(200,0.5)}}).bind("end.pjax",function(){if(!jQuery.pjax.firstLoad){r.find(".milestones").fadeTo(200,1);r.find(".context-loader").hide()}});e=[".sidebar ul.bignav a",".main .filterbar ul.filters li",".main .filterbar ul.sorts li"];r.delegate(e.join(","),"click",function(n){if(n.which==1&&!n.metaKey){n.preventDefault();n=$(this).attr("href")||$(this).attr("data-href");d(r.selector,n)}});r.selectableList(".sidebar ul.bignav",{mutuallyExclusive:true});r.selectableList(".main .filterbar ul.filters",
{wrapperSelector:"",mutuallyExclusive:true});r.sortableHeader(".main .filterbar ul.sorts")}}});$(function(){var a=$("#issues_next #js-new-issue-form");if(a.length!=0){a.selectableList("ul.labels");var d=function(){var g=a.find("input.title");if(g.val().length>0){g.addClass("valid");$(".js-title-missing-error").hide()}else{g.removeClass("valid");$(".js-title-missing-error").show()}};a.bind("submit",function(){d();if($(".js-title-missing-error").is(":visible"))return false});a.find("input.title").keyup(d).change(d);a.contextButton(".js-milestone-context-button",{contextPaneSelector:".js-milestone-context",
anchorTo:"right"});var c=a.find(".js-milestone-context"),b=a.find(".infobar .milestone .text");c.find("label").click(function(){var g=$(this).find("input[type=radio]");g.val()==""?b.html("No milestone"):b.html("Milestone: <strong>"+$(this).find("h4").text())});a.contextButton(".js-assignee-context-button",{contextPaneSelector:".js-assignee-context",anchorTo:"left"}).bind("show.context-button",function(){$(".context-pane:visible :text").focus()});var e=a.find(".js-assignee-context"),f=a.find(".infobar .assignee .text");
e.assigneeFilter(function(){e.find(".current").click()});e.find(".selector-item").click(function(){var g=$(this).find("input[type=radio]");g.val()==""?f.html("No one is assigned"):f.html("Assignee: <strong>"+$(this).find("h4").html())});a.find(".js-pane-radio-selector").each(function(){var g=$(this),h=g.closest(".context-pane");g.find("label").click(function(){var j=$(this);g.find(".selected").removeClass("selected");j.addClass("selected");h.trigger("close")})})}});$(function(){var a=$("#issues_next #issues_search");if(a.length!=0){var d=$("#js-issues-quicksearch").val();a.find("input[type=radio], select").change(function(){var c=$(this).closest("form");c.find("#search_q").val(d);c.submit()})}});$(function(){var a=$("#issues_next #show_issue");if(a.length!=0){var d=function(){window.location=$("#to_isssues_list").attr("href")};$.hotkeys({u:d});a.contextButton(".js-assignee-context",{contextPaneSelector:".assignee-context"}).bind("show.context-button",function(){$(".context-pane:visible :text").focus()});a.find(".assignee-context").assigneeFilter(function(){a.find(".assignee-context form").submit()});a.contextButton(".js-milestone-context",{contextPaneSelector:".milestone-context",anchorTo:"right"});
a.contextButton(".js-label-context",{contextPaneSelector:".label-context",anchorTo:"right"});a.selectableList(".js-selectable-labels");var c=a.find(".js-filterable-labels li");d=a.find(".js-label-filter");d.keyup(function(){var g=$(this).val();g!=""&&g!=null?c.each(function(){var h=$(this),j=h.text().toLowerCase();j.score(g)>0?h.show():h.hide()}):c.each(function(){$(this).show()})});var b=a.find(".js-autosubmitting-labels");b.find("input[type=checkbox]").change(function(){$.post(b.attr("action"),
b.serialize(),function(g){$(".discussion-stats .labels").html(g.labels)},"json")});d=$(".js-pane-selector-autosubmit");d.delegate("input[type=radio]","change",function(){var g=$(this);g.closest("form").submit()});$(".pull-participation a").click(function(){$("#issue_comment_form *[tabindex=1]").focus()});var e=function(g){g.discussionStats&&$(".discussion-stats").html(g.discussionStats);g.discussion&&$(".discussion-timeline > .new-comments").append(g.discussion);g.formActionBar&&$("#issue_comment_form .action-bar").html(g.formActionBar);
g.formActions&&$("#issue_comment_form .form-actions").html(g.formActions)};$("#issue_comment_form .action-bar .minibutton").live("click",function(){$("#issue_comment_form");$(this).addClass("disabled");$.ajax({type:"POST",url:$(this).attr("href")+".json",dataType:"json",success:e});return false});var f;$("#issue_comment_form button").live("click",function(){f=$(this).attr("name")=="comment_and_close"?"1":""});$("#issue_comment_form").live("submit",function(){var g=$(this),h=g.serialize()+"&comment_and_close="+
f;if($.trim(g.find('textarea[name="comment[body]"]').val())=="")return false;g.find(".form-actions button").attr("disabled","true");$.ajax({type:"POST",url:g.attr("action")+".json",data:h,dataType:"json",success:function(j){e(j);g.find("textarea").val("").blur();g.find(".form-actions button").attr("disabled","")}});return false})}});var location_with_hash=location.pathname+location.hash,matches=location_with_hash.match(/#issue\/(\d+)(\/comment\/(\d+))?/);if(matches){var issue_number=matches[1],comment_id=matches[3];if(issue_number)window.location=comment_id?location_with_hash.replace(/\/?#issue\/\d+\/comment\/\d+/,"/"+issue_number+"#comment_"+comment_id):location_with_hash.replace(/\/?#issue\/\d+/,"/"+issue_number)}
jQuery(function(a){var d=a("#issues_next");if(d.length!=0){var c=function(f){f.preventDefault();a("#js-issues-quicksearch").focus()};a.hotkeys({"/":c});var b=a("#js-issues-quicksearch");if(b.length>0){c=d.find(".btn-new-issue");var e=b.offset();d.find(".search .autocomplete-results").css({left:b.position().left,top:b.outerHeight(true)+5,width:c.offset().left-e.left+c.outerWidth(true)});b.quicksearch({results:d.find(".search .autocomplete-results"),insertSpinner:function(f){b.closest("form").prepend(f)}}).bind("focus",
function(){a(this).closest(".fieldwrap").addClass("focused")}).bind("blur",function(){a(this).closest(".fieldwrap").removeClass("focused")}).css({outline:"none"})}}});$(function(){var a=$(".github-jobs-promotion");if(a.get(0)!=null){a.css({visibility:"hidden"});window.jobsWidgetCallback=function(d){var c=Math.floor(Math.random()*d.jobs.length);d=d.jobs[c];a.find(".job-link").attr("href",d.url);a.find(".job-company").text(d.company);a.find(".job-position").text(d.position);a.find(".job-location").text(d.location);a.css({visibility:"visible"})};$.getScript(a.attr("url"))}});$(function(){$("#add_key_action").click(function(){$(this).toggle();$("#new_key_form_wrap").toggle().find(":text").focus();return false});$(".edit_key_action").live("click",function(){$.gitbox($(this).attr("href"));return false});$("#cancel_add_key").click(function(){$("#add_key_action").toggle();$("#new_key_form_wrap").toggle().find("textarea").val("");$("#new_key").find(":text").val("");$("#new_key .error_box").remove();return false});$(".cancel_edit_key").live("click",function(){$.facebox.close();
$("#new_key .error_box").remove();return false});$(".delete_key").live("click",function(){if(confirm("Are you sure you want to delete this key?")){$.ajax({type:"POST",data:{_method:"delete"},url:$(this).attr("href")});$(this).parents("ul");$(this).parent().remove()}return false});$(".key_editing").live("submit",function(){var a=this;$(a).find(".error_box").remove();$(a).find(":submit").attr("disabled",true).spin();$(a).ajaxSubmit(function(d){if(d.substring(0,3)=="<li"){if($(a).attr("id").substring(0,
4)=="edit"){$("#"+$(a).attr("id").substring(5)).replaceWith(d);$.facebox.close()}else{$("ul.public_keys").append(d);$("#add_key_action").toggle();$("#new_key_form_wrap").toggle()}$(a).find("textarea").val("");$(a).find(":text").val("")}else $(a).append(d);$(a).find(":submit").attr("disabled",false).stopSpin()});return false})});GitHub=GitHub||{};GitHub.metric=function(a,d){if(!window.mpq)return GitHub.metric=$.noop;d?mpq.push([d.type||"track",a,d]):mpq.push(["track",a])};GitHub.trackClick=function(a,d,c){if(!window.mpq)return GitHub.trackClick=$.noop;$(a).click(function(){c=$.isFunction(c)?c.call(this):c;GitHub.metric(d,c);return true})};
$(function(){var a=GitHub.trackClick;a("#entice-signup-button","Entice banner clicked");a("#coupon-redeem-link","Clicked Dec 2010 Sale Notice");a("#watch_button","Watched Repo",{repo:GitHub.nameWithRepo});a("#unwatch_button","Unwatched Repo",{repo:GitHub.nameWithRepo});a(".btn-follow","Followed User",function(){return{user:$(this).attr("data-user")}});a(".btn-unfollow","Unfollowed User",function(){return{user:$(this).attr("data-user")}})});DateInput.prototype.resetDate=function(){$(".date_selector .selected").removeClass("selected");this.changeInput("")};$(function(){$("input.js-date-input").each(function(){var a=new DateInput(this);a.hide=$.noop;a.show();$(this).hide();$(".date_selector").addClass("no_shadow")});$("label.js-date-input a").click(function(){var a=$("input.js-date-input").data("datePicker");a.resetDate()})});function defineNetwork(a){function d(c,b,e){this.container=c;this.width=b;this.height=e;this.loaderInterval=null;this.loaderOffset=0;this.ctx=this.initCanvas(c,b,e);this.startLoader("Loading graph data");this.loadMeta()}d.prototype={initCanvas:function(c){c=a(c).find("canvas")[0];c.style.zIndex="0";return c.getContext("2d")},startLoader:function(c){this.ctx.save();this.ctx.font="14px Monaco, monospace";this.ctx.fillStyle="#99b2cc";this.ctx.textAlign="center";this.ctx.fillText(c,this.width/2,85);this.ctx.restore();
var b=this;this.loaderInterval=setInterval(function(){b.displayLoader()},75)},stopLoader:function(){clearInterval(this.loaderInterval)},displayLoader:function(){colors=["#36689a","#4a77a4","#5e86ae","#9cb4cd"];this.ctx.save();this.ctx.translate(this.width/2+0.5,50);this.ctx.clearRect(-16,-16,32,32);this.ctx.rotate(this.loaderOffset*(Math.PI/6));for(var c=0;c<12;c++){this.ctx.fillStyle=colors[c]||"#c4d2e1";this.ctx.beginPath();this.ctx.moveTo(-1.5,-8);this.ctx.lineTo(-1.5,-15);this.ctx.lineTo(0,-16);
this.ctx.lineTo(1.5,-15);this.ctx.lineTo(1.5,-8);this.ctx.lineTo(-1.5,-8);this.ctx.fill();this.ctx.rotate(-Math.PI/6)}this.ctx.restore();this.loaderOffset=(this.loaderOffset+1)%12},waitForCurrent:function(c){var b=this;b.current?c({current:true}):a(".js-network-poll").each(function(){var e=a(this).attr("rel");a.smartPoller(function(f){a.getJSON("/cache/network_current/"+e,function(g){if(g&&g.current){b.current=true;c(g)}else f()})})})},loadMeta:function(){var c=this;c.loaded=false;a.smartPoller(function(b){a.ajax({url:"network_meta",
dataType:"json",success:function(e){if(e&&e.nethash){c.loaded=true;c.init(e)}else c.waitForCurrent(function(){a(".js-network-poll").hide();a(".js-network-current").show();c.loaded||b()})},error:function(){b()}})})},init:function(c){this.focus=c.focus;this.nethash=c.nethash;this.spaceMap=c.spacemap;this.userBlocks=c.blocks;this.commits=[];for(var b=0;b<c.dates.length;b++)this.commits.push(new d.Commit(b,c.dates[b]));this.users={};for(b=0;b<c.users.length;b++){var e=c.users[b];this.users[e.name]=e}this.chrome=
new d.Chrome(this,this.ctx,this.width,this.height,this.focus,this.commits,this.userBlocks,this.users);this.graph=new d.Graph(this,this.ctx,this.width,this.height,this.focus,this.commits,this.users,this.spaceMap,this.userBlocks,this.nethash);this.mouseDriver=new d.MouseDriver(this.container,this.chrome,this.graph);this.keyDriver=new d.KeyDriver(this.container,this.chrome,this.graph);this.stopLoader();this.graph.drawBackground();this.chrome.draw();this.graph.requestInitialChunk()},initError:function(){this.stopLoader();
this.ctx.clearRect(0,0,this.width,this.height);this.startLoader("Graph could not be drawn due to a network IO problem.")}};d.Commit=function(c,b){this.time=c;this.date=Date.parseISO8601(b);this.populated=this.requested=null};d.Commit.prototype={populate:function(c,b,e){this.user=b;this.author=c.author;this.date=Date.parseISO8601(c.date);this.gravatar=c.gravatar;this.id=c.id;this.login=c.login;this.message=c.message;this.space=c.space;this.time=c.time;this.parents=this.populateParents(c.parents,e);
this.requested=true;this.populated=new Date},populateParents:function(c,b){for(var e=[],f=0;f<c.length;f++){var g=c[f],h=b[g[1]];h.id=g[0];h.space=g[2];e.push(h)}return e}};d.Chrome=function(c,b,e,f,g,h,j,l){this.namesWidth=100;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.userBgColors=["#EBEBFF","#E0E0FF"];this.network=c;this.ctx=b;this.width=e;this.height=f;this.commits=h;this.userBlocks=j;this.users=l;this.offsetX=this.namesWidth+(e-this.namesWidth)/
2-g*20;this.offsetY=0;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(e-this.namesWidth)/2;this.activeUser=null};d.Chrome.prototype={moveX:function(c){this.offsetX+=c;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-this.commits.length*20},moveY:function(c){this.offsetY+=c;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<
-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},calcContentHeight:function(){for(var c=0,b=0;b<this.userBlocks.length;b++){var e=this.userBlocks[b];c+=e.count}return c*20},hover:function(c,b){for(var e=0;e<this.userBlocks.length;e++){var f=this.userBlocks[e];if(c>0&&c<this.namesWidth)if(b>40+this.offsetY+f.start*20)if(b<40+this.offsetY+(f.start+f.count)*20)return this.users[f.name]}return null},draw:function(){this.drawTimeline(this.ctx);this.drawUsers(this.ctx);
this.drawFooter(this.ctx)},drawTimeline:function(c){c.fillStyle="#111111";c.fillRect(0,0,this.width,20);c.fillStyle="#333333";c.fillRect(0,20,this.width,20);var b=parseInt((0-this.offsetX)/20);if(b<0)b=0;var e=b+parseInt(this.width/20);if(e>this.commits.length)e=this.commits.length;c.save();c.translate(this.offsetX,0);c.font="10px Helvetica, sans-serif";var f=null,g=null;for(b=b;b<e;b++){var h=this.commits[b],j=this.months[h.date.getMonth()];if(j!=f){c.fillStyle="#ffffff";c.fillText(j,b*20-3,14);
f=j}h=parseInt(h.date.getDate());if(h!=g){c.fillStyle="#ffffff";c.fillText(h,b*20-3,33);g=h}}c.restore()},drawUsers:function(c){c.fillStyle="#FFFFFF";c.fillRect(0,0,this.namesWidth,this.height);c.save();c.translate(0,40+this.offsetY);for(var b=0;b<this.userBlocks.length;b++){var e=this.userBlocks[b];c.fillStyle=this.userBgColors[b%2];c.fillRect(0,e.start*20,this.namesWidth,e.count*20);if(this.activeUser&&this.activeUser.name==e.name){c.fillStyle="rgba(0, 0, 0, 0.05)";c.fillRect(0,e.start*20,this.namesWidth,
e.count*20)}c.fillStyle="#DDDDDD";c.fillRect(0,e.start*20,1,e.count*20);c.fillRect(this.namesWidth-1,e.start*20,1,e.count*20);c.fillRect(this.width-1,e.start*20,1,e.count*20);c.fillRect(0,(e.start+e.count)*20-1,this.namesWidth,1);c.measureText(e.name);var f=(e.start+e.count/2)*20+3;c.fillStyle="#000000";c.font="12px Monaco, monospace";c.textAlign="center";c.fillText(e.name,this.namesWidth/2,f,96)}c.restore();c.fillStyle="#111111";c.fillRect(0,0,this.namesWidth,20);c.fillStyle="#333333";c.fillRect(0,
20,this.namesWidth,20)},drawFooter:function(c){c.fillStyle="#F4F4F4";c.fillRect(0,this.height-20,this.width,20);c.fillStyle="#CCCCCC";c.fillRect(0,this.height-20,this.width,1);c.fillStyle="#000000";c.font="11px Monaco, monospace";c.fillText("GitHub Network Graph Viewer v4.0.0",5,this.height-5)}};d.Graph=function(c,b,e,f,g,h,j,l,k,m){this.namesWidth=100;this.spaceColors=[];this.bgColors=["#F5F5FF","#F0F0FF"];this.spaceColors.push("#FF0000");this.spaceColors.push("#0000FF");this.spaceColors.push("#00FF00");
this.spaceColors.push("#FF00FF");this.spaceColors.push("#E2EB00");this.spaceColors.push("#FFA600");this.spaceColors.push("#00FFFC");this.spaceColors.push("#DD458E");this.spaceColors.push("#AD7331");this.spaceColors.push("#97AD31");this.spaceColors.push("#51829D");this.spaceColors.push("#70387F");this.spaceColors.push("#740000");this.spaceColors.push("#745C00");this.spaceColors.push("#419411");this.spaceColors.push("#37BE8C");this.spaceColors.push("#6C5BBD");this.spaceColors.push("#F300AA");this.spaceColors.push("#586D41");
this.spaceColors.push("#3B4E31");this.network=c;this.ctx=b;this.width=e;this.height=f;this.focus=g;this.commits=h;this.users=j;this.spaceMap=l;this.userBlocks=k;this.nethash=m;this.offsetX=this.namesWidth+(e-this.namesWidth)/2-g*20;this.bgCycle=this.offsetY=0;this.marginMap={};this.gravatars={};this.activeCommit=null;this.contentHeight=this.calcContentHeight();this.graphMidpoint=this.namesWidth+(e-this.namesWidth)/2;this.showRefs=true;this.lastHotLoadCenterIndex=null;this.connectionMap={};this.spaceUserMap=
{};for(c=0;c<k.length;c++){e=k[c];for(b=e.start;b<e.start+e.count;b++)this.spaceUserMap[b]=j[e.name]}this.headsMap={};for(c=0;c<k.length;c++){e=k[c];e=j[e.name];for(b=0;b<e.heads.length;b++){f=e.heads[b];this.headsMap[f.id]||(this.headsMap[f.id]=[]);g={name:e.name,head:f};this.headsMap[f.id].push(g)}}};d.Graph.prototype={moveX:function(c){this.offsetX+=c;if(this.offsetX>this.graphMidpoint)this.offsetX=this.graphMidpoint;else if(this.offsetX<this.graphMidpoint-this.commits.length*20)this.offsetX=this.graphMidpoint-
this.commits.length*20;this.hotLoadCommits()},moveY:function(c){this.offsetY+=c;if(this.offsetY>0||this.contentHeight<this.height-40)this.offsetY=0;else if(this.offsetY<-this.contentHeight+this.height/2)this.offsetY=-this.contentHeight+this.height/2},toggleRefs:function(){this.showRefs=!this.showRefs},calcContentHeight:function(){for(var c=0,b=0;b<this.userBlocks.length;b++){var e=this.userBlocks[b];c+=e.count}return c*20},hover:function(c,b){for(var e=this.timeWindow(),f=e.min;f<=e.max;f++){var g=
this.commits[f],h=this.offsetX+g.time*20,j=this.offsetY+50+g.space*20;if(c>h-5&&c<h+5&&b>j-5&&b<j+5)return g}return null},hotLoadCommits:function(){var c=200,b=parseInt((-this.offsetX+this.graphMidpoint)/20);if(b<0)b=0;if(b>this.commits.length-1)b=this.commits.length-1;if(!(this.lastHotLoadCenterIndex&&Math.abs(this.lastHotLoadCenterIndex-b)<10)){this.lastHotLoadCenterIndex=b;var e=this.backSpan(b,c);b=this.frontSpan(b,c);if(e||b){c=e?e[0]:b[0];e=b?b[1]:e[1];this.requestChunk(c,e)}}},backSpan:function(c,
b){for(var e=null,f=c;f>=0&&f>c-b;f--)if(!this.commits[f].requested){e=f;break}if(e!=null){f=c=null;for(f=e;f>=0&&f>e-b;f--)if(this.commits[f].requested){c=f;break}if(c)f=c+1;else{f=e-b;if(f<0)f=0}return[f,e]}else return null},frontSpan:function(c,b){for(var e=null,f=c;f<this.commits.length&&f<c+b;f++)if(!this.commits[f].requested){e=f;break}if(e!=null){f=c=null;for(f=e;f<this.commits.length&&f<e+b;f++)if(this.commits[f].requested){c=f;break}f=c?c-1:e+b>=this.commits.length?this.commits.length-1:
e+b;return[e,f]}else return null},requestInitialChunk:function(){var c=this;a.getJSON("network_data_chunk?nethash="+this.nethash,function(b){c.importChunk(b);c.draw();c.network.chrome.draw()})},requestChunk:function(c,b){for(var e=c;e<=b;e++)this.commits[e].requested=new Date;var f=this;c="network_data_chunk?nethash="+this.nethash+"&start="+c+"&end="+b;a.getJSON(c,function(g){f.importChunk(g);f.draw();f.network.chrome.draw();f.lastHotLoadCenterIndex=this.focus})},importChunk:function(c){for(var b=
0;b<c.commits.length;b++){var e=c.commits[b],f=this.spaceUserMap[e.space],g=this.commits[e.time];g.populate(e,f,this.commits);for(e=0;e<g.parents.length;e++){f=g.parents[e];for(f=f.time+1;f<g.time;f++){this.connectionMap[f]=this.connectionMap[f]||[];this.connectionMap[f].push(g)}}}},timeWindow:function(){var c=parseInt((this.namesWidth-this.offsetX+20)/20);if(c<0)c=0;var b=c+parseInt((this.width-this.namesWidth)/20);if(b>this.commits.length-1)b=this.commits.length-1;return{min:c,max:b}},draw:function(){this.drawBackground();
var c=this.timeWindow(),b=c.min;c=c.max;this.ctx.save();this.ctx.translate(this.offsetX,this.offsetY+50);for(var e={},f=0;f<this.spaceMap.length;f++)for(var g=this.spaceMap.length-f-1,h=b;h<=c;h++){var j=this.commits[h];if(j.populated&&j.space==g){this.drawConnection(j);e[j.id]=true}}for(f=b;f<=c;f++)if(g=this.connectionMap[f])for(h=0;h<g.length;h++){j=g[h];if(!e[j.id]){this.drawConnection(j);e[j.id]=true}}for(f=0;f<this.spaceMap.length;f++){g=this.spaceMap.length-f-1;for(h=b;h<=c;h++){j=this.commits[h];
if(j.populated&&j.space==g)j==this.activeCommit?this.drawActiveCommit(j):this.drawCommit(j)}}if(this.showRefs)for(h=b;h<=c;h++){j=this.commits[h];if(j.populated)if(b=this.headsMap[j.id])for(f=e=0;f<b.length;f++){g=b[f];if(this.spaceUserMap[j.space].name==g.name){g=this.drawHead(j,g.head,e);e+=g}}}this.ctx.restore();this.activeCommit&&this.drawCommitInfo(this.activeCommit)},drawBackground:function(){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.save();this.ctx.translate(0,this.offsetY+50);
this.ctx.clearRect(0,-10,this.width,this.height);for(var c=0;c<this.userBlocks.length;c++){var b=this.userBlocks[c];this.ctx.fillStyle=this.bgColors[c%2];this.ctx.fillRect(0,b.start*20-10,this.width,b.count*20);this.ctx.fillStyle="#DDDDDD";this.ctx.fillRect(0,(b.start+b.count)*20-11,this.width,1)}this.ctx.restore()},drawCommit:function(c){var b=c.time*20,e=c.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(c.space);this.ctx.beginPath();this.ctx.arc(b,
e,4,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawActiveCommit:function(c){var b=c.time*20,e=c.space*20;this.ctx.strokeStyle="#F7F7FF";this.ctx.lineWidth=1.5;this.ctx.fillStyle=this.spaceColor(c.space);this.ctx.beginPath();this.ctx.arc(b,e,6,0,Math.PI*2,false);this.ctx.fill();this.ctx.stroke()},drawCommitInfo:function(c){var b=this.splitLines(c.message,54),e=80+15*b.length,f=this.offsetX+c.time*20,g=50+this.offsetY+c.space*20,h=0,j=0;h=f<this.graphMidpoint?f+10:f-410;j=g<40+(this.height-
40)/2?g+10:g-e-10;this.ctx.save();this.ctx.translate(h,j);this.ctx.fillStyle="#FFFFFF";this.ctx.strokeStyle="#000000";this.ctx.lineWidth="2";this.ctx.beginPath();this.ctx.moveTo(0,5);this.ctx.quadraticCurveTo(0,0,5,0);this.ctx.lineTo(395,0);this.ctx.quadraticCurveTo(400,0,400,5);this.ctx.lineTo(400,e-5);this.ctx.quadraticCurveTo(400,e,395,e);this.ctx.lineTo(5,e);this.ctx.quadraticCurveTo(0,e,0,e-5);this.ctx.lineTo(0,5);this.ctx.fill();this.ctx.stroke();var l=this.gravatars[c.gravatar];if(l)this.drawGravatar(l,
10,10);else{var k=this;l=new Image;l.src="https://secure.gravatar.com/avatar/"+c.gravatar+"?s=32&d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-32.png";l.onload=function(){if(k.activeCommit==c){k.drawGravatar(l,h+10,j+10);k.gravatars[c.gravatar]=l}}}this.ctx.fillStyle="#000000";this.ctx.font="bold 14px Helvetica, sans-serif";this.ctx.fillText(c.author,55,32);this.ctx.fillStyle="#888888";this.ctx.font="12px Monaco, monospace";this.ctx.fillText(c.id,12,65);this.drawMessage(b,12,85);this.ctx.restore()},
drawGravatar:function(c,b,e){this.ctx.strokeStyle="#AAAAAA";this.ctx.lineWidth=1;this.ctx.beginPath();this.ctx.strokeRect(b+0.5,e+0.5,35,35);this.ctx.drawImage(c,b+2,e+2)},drawMessage:function(c,b,e){this.ctx.font="12px Monaco, monospace";this.ctx.fillStyle="#000000";for(var f=0;f<c.length;f++){var g=c[f];this.ctx.fillText(g,b,e+f*15)}},splitLines:function(c,b){c=c.split(" ");for(var e=[],f="",g=0;g<c.length;g++){var h=c[g];if(f.length+1+h.length<b)f=f==""?h:f+" "+h;else{e.push(f);f=h}}e.push(f);
return e},drawHead:function(c,b,e){this.ctx.font="10.25px Monaco, monospace";this.ctx.save();var f=this.ctx.measureText(b.name).width;this.ctx.restore();var g=c.time*20;c=c.space*20+5+e;this.ctx.save();this.ctx.translate(g,c);this.ctx.fillStyle="rgba(0, 0, 0, 0.8)";this.ctx.beginPath();this.ctx.moveTo(0,0);this.ctx.lineTo(-4,10);this.ctx.quadraticCurveTo(-9,10,-9,15);this.ctx.lineTo(-9,15+f);this.ctx.quadraticCurveTo(-9,15+f+5,-4,15+f+5);this.ctx.lineTo(4,15+f+5);this.ctx.quadraticCurveTo(9,15+f+
5,9,15+f);this.ctx.lineTo(9,15);this.ctx.quadraticCurveTo(9,10,4,10);this.ctx.lineTo(0,0);this.ctx.fill();this.ctx.fillStyle="#FFFFFF";this.ctx.font="12px Monaco, monospace";this.ctx.textBaseline="middle";this.ctx.scale(0.85,0.85);this.ctx.rotate(Math.PI/2);this.ctx.fillText(b.name,17,-1);this.ctx.restore();return f+20},drawConnection:function(c){for(var b=0;b<c.parents.length;b++){var e=c.parents[b];if(b==0)e.space==c.space?this.drawBasicConnection(e,c):this.drawBranchConnection(e,c);else this.drawMergeConnection(e,
c)}},drawBasicConnection:function(c,b){var e=this.spaceColor(b.space);this.ctx.strokeStyle=e;this.ctx.lineWidth=2;this.ctx.beginPath();this.ctx.moveTo(c.time*20,b.space*20);this.ctx.lineTo(b.time*20,b.space*20);this.ctx.stroke()},drawBranchConnection:function(c,b){var e=this.spaceColor(b.space);this.ctx.strokeStyle=e;this.ctx.lineWidth=2;this.ctx.beginPath();this.ctx.moveTo(c.time*20,c.space*20);this.ctx.lineTo(c.time*20,b.space*20);this.ctx.lineTo(b.time*20-14,b.space*20);this.ctx.stroke();this.threeClockArrow(e,
b.time*20,b.space*20)},drawMergeConnection:function(c,b){var e=this.spaceColor(c.space);this.ctx.strokeStyle=e;this.ctx.lineWidth=2;this.ctx.beginPath();if(c.space>b.space){this.ctx.moveTo(c.time*20,c.space*20);var f=this.safePath(c.time,b.time,c.space);if(f){this.ctx.lineTo(b.time*20-10,c.space*20);this.ctx.lineTo(b.time*20-10,b.space*20+15);this.ctx.lineTo(b.time*20-7.7,b.space*20+9.5);this.ctx.stroke();this.oneClockArrow(e,b.time*20,b.space*20)}else{f=this.closestMargin(c.time,b.time,c.space,-1);
if(c.space==b.space+1&&c.space==f+1){this.ctx.lineTo(c.time*20,f*20+10);this.ctx.lineTo(b.time*20-15,f*20+10);this.ctx.lineTo(b.time*20-9.5,f*20+7.7);this.ctx.stroke();this.twoClockArrow(e,b.time*20,f*20)}else if(c.time+1==b.time){f=this.closestMargin(c.time,b.time,b.space,0);this.ctx.lineTo(c.time*20,f*20+10);this.ctx.lineTo(b.time*20-15,f*20+10);this.ctx.lineTo(b.time*20-15,b.space*20+10);this.ctx.lineTo(b.time*20-9.5,b.space*20+7.7);this.ctx.stroke();this.twoClockArrow(e,b.time*20,b.space*20)}else{this.ctx.lineTo(c.time*
20+10,c.space*20-10);this.ctx.lineTo(c.time*20+10,f*20+10);this.ctx.lineTo(b.time*20-10,f*20+10);this.ctx.lineTo(b.time*20-10,b.space*20+15);this.ctx.lineTo(b.time*20-7.7,b.space*20+9.5);this.ctx.stroke();this.oneClockArrow(e,b.time*20,b.space*20)}this.addMargin(c.time,b.time,f)}}else{f=this.closestMargin(c.time,b.time,b.space,-1);if(f<b.space){this.ctx.moveTo(c.time*20,c.space*20);this.ctx.lineTo(c.time*20,f*20+10);this.ctx.lineTo(b.time*20-12.7,f*20+10);this.ctx.lineTo(b.time*20-12.7,b.space*20-
10);this.ctx.lineTo(b.time*20-9.4,b.space*20-7.7);this.ctx.stroke();this.fourClockArrow(e,b.time*20,b.space*20)}else{this.ctx.moveTo(c.time*20,c.space*20);this.ctx.lineTo(c.time*20,f*20+10);this.ctx.lineTo(b.time*20-12.7,f*20+10);this.ctx.lineTo(b.time*20-12.7,b.space*20+10);this.ctx.lineTo(b.time*20-9.4,b.space*20+7.7);this.ctx.stroke();this.twoClockArrow(e,b.time*20,b.space*20)}this.addMargin(c.time,b.time,f)}},addMargin:function(c,b,e){e=e;this.marginMap[e]||(this.marginMap[e]=[]);this.marginMap[e].push([c,
b])},oneClockArrow:function(c,b,e){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-6.3,e+13.1);this.ctx.lineTo(b-10.8,e+9.7);this.ctx.lineTo(b-2.6,e+3.5);this.ctx.fill()},twoClockArrow:function(c,b,e){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-12.4,e+6.6);this.ctx.lineTo(b-9.3,e+10.6);this.ctx.lineTo(b-3.2,e+2.4);this.ctx.fill()},threeClockArrow:function(c,b,e){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-14,e-2.5);this.ctx.lineTo(b-14,e+2.5);this.ctx.lineTo(b-
4,e);this.ctx.fill()},fourClockArrow:function(c,b,e){this.ctx.fillStyle=c;this.ctx.beginPath();this.ctx.moveTo(b-12.4,e-6.6);this.ctx.lineTo(b-9.3,e-10.6);this.ctx.lineTo(b-3.2,e-2.4);this.ctx.fill()},safePath:function(c,b,e){for(var f=0;f<this.spaceMap[e].length;f++){var g=this.spaceMap[e][f];if(this.timeInPath(c,g))return g[1]==b}return false},closestMargin:function(c,b,e,f){var g=this.spaceMap.length;f=f;for(var h=false,j=false,l=false;!(j&&h);){if(e+f>=0&&this.safeMargin(c,b,e+f))return e+f;if(e+
f<0)h=true;if(e+f>g)j=true;if(l==false&&f==0){f=-1;l=true}else f=f<0?-f-1:-f-2}return e>0?e-1:0},safeMargin:function(c,b,e){e=e;if(!this.marginMap[e])return true;e=this.marginMap[e];for(var f=0;f<e.length;f++){var g=e[f];if(this.pathsCollide([c,b],g))return false}return true},pathsCollide:function(c,b){return this.timeWithinPath(c[0],b)||this.timeWithinPath(c[1],b)||this.timeWithinPath(b[0],c)||this.timeWithinPath(b[1],c)},timeInPath:function(c,b){return c>=b[0]&&c<=b[1]},timeWithinPath:function(c,
b){return c>b[0]&&c<b[1]},spaceColor:function(c){return c==0?"#000000":this.spaceColors[c%this.spaceColors.length]}};d.MouseDriver=function(c,b,e){this.container=c;this.chrome=b;this.graph=e;this.dragging=false;this.lastPoint={x:0,y:0};this.pressedUser=this.pressedCommit=this.lastHoverUser=this.lastHoverCommit=null;c=a(c).eq(0);var f=a("canvas",c)[0];f.style.cursor="move";var g=this;this.up=function(){g.dragging=false;if(g.pressedCommit&&g.graph.activeCommit==g.pressedCommit)window.open("/"+g.graph.activeCommit.user.name+
"/"+g.graph.activeCommit.user.repo+"/commit/"+g.graph.activeCommit.id);else if(g.pressedUser&&g.chrome.activeUser==g.pressedUser)window.location="/"+g.chrome.activeUser.name+"/"+g.chrome.activeUser.repo+"/network";g.pressedCommit=null;g.pressedUser=null};this.down=function(){if(g.graph.activeCommit)g.pressedCommit=g.graph.activeCommit;else if(g.chrome.activeUser)g.pressedUser=g.chrome.activeUser;else g.dragging=true};this.docmove=function(h){var j=h.pageX;h=h.pageY;if(g.dragging){g.graph.moveX(j-
g.lastPoint.x);g.graph.moveY(h-g.lastPoint.y);g.graph.draw();g.chrome.moveX(j-g.lastPoint.x);g.chrome.moveY(h-g.lastPoint.y);g.chrome.draw()}g.lastPoint.x=j;g.lastPoint.y=h};this.move=function(h){var j=h.pageX,l=h.pageY;if(g.dragging){g.graph.moveX(j-g.lastPoint.x);g.graph.moveY(l-g.lastPoint.y);g.graph.draw();g.chrome.moveX(j-g.lastPoint.x);g.chrome.moveY(l-g.lastPoint.y);g.chrome.draw()}else{var k=g.chrome.hover(j-h.target.offsetLeft,l-h.target.offsetTop);if(k!=g.lastHoverUser){f.style.cursor=k?
"pointer":"move";g.chrome.activeUser=k;g.chrome.draw();g.lastHoverUser=k}else{h=g.graph.hover(j-h.target.offsetLeft,l-h.target.offsetTop);if(h!=g.lastHoverCommit){f.style.cursor=h?"pointer":"move";g.graph.activeCommit=h;g.graph.draw();g.chrome.draw();g.lastHoverCommit=h}}}g.lastPoint.x=j;g.lastPoint.y=l};this.out=function(){g.graph.activeCommit=null;g.chrome.activeUser=null;g.graph.draw();g.chrome.draw();g.lastHoverCommit=null;g.lastHoverUser=null};a("body")[0].onmouseup=this.up;a("body")[0].onmousemove=
this.docmove;f.onmousedown=this.down;f.onmousemove=this.move;f.onmouseout=this.out};d.KeyDriver=function(c,b,e){this.container=c;this.chrome=b;this.graph=e;this.dirty=false;this.moveBothX=function(g){this.graph.moveX(g);this.chrome.moveX(g);this.graph.activeCommit=null;this.dirty=true};this.moveBothY=function(g){this.graph.moveY(g);this.chrome.moveY(g);this.graph.activeCommit=null;this.dirty=true};this.toggleRefs=function(){this.graph.toggleRefs();this.dirty=true};this.redraw=function(){if(this.dirty){this.graph.draw();
this.chrome.draw()}this.dirty=false};var f=this;this.down=function(g){var h=false;if(g.shiftKey)switch(g.which){case 37:case 72:f.moveBothX(999999);h=true;break;case 38:case 75:f.moveBothY(999999);h=true;break;case 39:case 76:f.moveBothX(-999999);h=true;break;case 40:case 74:f.moveBothY(-999999);h=true;break}else switch(g.which){case 37:case 72:f.moveBothX(100);h=true;break;case 38:case 75:f.moveBothY(20);h=true;break;case 39:case 76:f.moveBothX(-100);h=true;break;case 40:case 74:f.moveBothY(-20);
h=true;break;case 84:f.toggleRefs();h=true;break}h&&f.redraw()};this.press=function(g){if(a.browser.mozilla||a.browser.opera)f.down({shiftKey:false,which:g.keyCode})};a(document).keydown(this.down);a(document).keypress(this.press)};return d}var Network=defineNetwork(window.jQuery);$(function(){$("#organization-transforming").redirector({url:"/organizations/transforming?user="+github_user,to:"/login"});$("#members_bucket .remove-user").click(function(){var a,d=$(this),c=d.parents("li:first").find(".login").text();c="Are you POSITIVE you want to remove "+c+" from your organization?";if(!confirm(c))return false;d.spin().remove();a=$("#spinner").addClass("remove");$.del(d.attr("href"),function(){a.parent().remove()});return false})});$(function(){if(!$("body").hasClass("page-account"))return false;var a=$("#add_email_action a"),d=$("#cancel_add_email"),c=$("#add_email_form_wrap"),b=$(".add-emails-form .error_box");a.click(function(){$(this).toggle();c.fadeIn(200).find(":text").focus();return false});d.click(function(){a.toggle();c.hide().find(":text").val("");b.hide();return false});$(".delete_email").live("click",function(){if($("ul.user_emails li.email").length==1){$.facebox("You must always have at least one email address.  If you want to delete this address, add a new one first.");
return false}$.post($(this).attr("href"),{email:$(this).prev().text()});$(this).parent().remove();return false});$(".delete_connection").live("click",function(){$.post($(this).attr("href"),{_method:"delete"});$(this).parent().remove();return false});$("ul.user_emails li.email").length>0&&$("#add_email_form").submit(function(){$("#add_email_form :submit").attr("disabled",true).spin();var e=this;$(this).ajaxSubmit(function(f){f?$("ul.user_emails").append(f):b.show();$("#add_email_form :submit").attr("disabled",
false).stopSpin();$(e).find(":text").val("").focus()});return false});$(".user_toggle").click(function(){var e={};e[this.name]=this.checked?"1":"0";e._method="put";$.post("/account",e);$("#notify_save").show();setTimeout("$('#notify_save').fadeOut()",1000)});$("dl.form.autosave").autosaveField();$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".js-preview-job-profile").click(function(){$.get("/preview",{text:$("#user_profile_bio").val()},function(e){$.facebox(e,
"job-profile-preview")});return false});$(".js-leave-collaborated-repo",$("#facebox")[0]).live("click",function(e){var f=$(this).parents("form").attr("data-repo"),g=$("ul.repositories li[data-repo="+f+"]"),h=$(this).parents("div.full-button");h.addClass("no-bg");h.html('<img src="/images/modules/ajax/indicator.gif">');$.ajax({url:"/account/leave_repo/"+f,type:"POST",success:function(){$.facebox.close();g.fadeOut()},error:function(){h.html('<img src="/images/modules/ajax/error.png">')}});e.preventDefault();
return false});$(".change-gravatar-email form").live("submit",function(){var e=$(this),f=e.find("button").attr("disabled",true),g=e.find(".spinner").html('<img src="/images/modules/ajax/indicator.gif"/>');$.ajax({url:e.attr("action"),type:"PUT",data:{email:e.find("input").val()},success:function(h){g.html('<img src="/images/modules/ajax/success.png"/>');e.find(".error").text("");var j=$(".change-gravatar-email .gravatar img").attr("src");$(".change-gravatar-email .gravatar img").attr("src",j.replace(/[a-f0-9]{32}/,
h));$(document).unbind("close.facebox").bind("close.facebox",function(){window.location=window.location})},error:function(h){g.html('<img src="/images/modules/ajax/error.png"/>');e.find(".error").text(h.responseText)},complete:function(){f.attr("disabled",false)}});return false})});$(function(){if($(".page-billing, .page-account").length==0)return false;$(".js-coupon-click-onload").click();$(".js-add-cc").click(function(){$(document).one("reveal.facebox",function(){$("#facebox .js-thanks, #facebox .rule:first").hide()});$.facebox({div:this.href});return false});$(".js-close-facebox").live("click",function(){$(document).trigger("close.facebox")});$(".js-edit-org-select-billing").click(function(){$("a[href=#billing_bucket]").click();return false});var a=$("table.upgrades");if(a.length==
0)return false;a.find(".choose_plan").click(function(){var d=$(this).closest("tr").attr("data-name");$(".js-new-plan-name-val").val(d);$(".js-new-plan-name").text(d);d=="free"?$(".js-new-plan-card-on-file").hide():$(".js-new-plan-card-on-file").show()});$(".js-coupon-form").live("submit",function(){$(this).find("button").attr("disabled",true).after(' <img src="/images/modules/ajax/indicator.gif">');$.ajax({url:this.action,type:this.method,data:{code:$(this).find(":text").val()},error:function(d){$("#facebox .content").html(d.responseText)},
success:function(d){$("#facebox .content").html(d);$(document).unbind("close.facebox").bind("close.facebox",function(){var c=window.location.pathname;window.location=/organizations/.test(c)?c:"/account/billing"})}});return false});$(".selected .choose_plan").click()});$(function(){if(!$("body").hasClass("page-compare"))return false;var a=null;$(".compare-range .commit-ref.to").click(function(){a="end";$.facebox({div:"#compare_chooser"});return false});$(".compare-range .commit-ref.from").click(function(){a="start";$.facebox({div:"#compare_chooser"});return false});function d(){var f=$("#facebox .ref-autocompleter"),g=$("#facebox button.choose-end");$("#facebox button.refresh");f.val(a=="start"?comparisonBase:comparisonHead);$("#facebox .mode-upper").text(e(a));
$("#facebox .mode-lower").text(a);a=="start"?g.show():g.hide()}function c(){var f=$("#facebox .ref-autocompleter");if(f.length!=0){var g=$("#facebox .commit-preview-holder"),h=$("#facebox button.refresh"),j=$(".compare-range").attr("url-base");d();h.click(function(){if(a=="start")comparisonBase=f.val();else comparisonHead=f.val();$(document).trigger("close.facebox");document.location=j+comparisonBase+"..."+comparisonHead;return false});f.click(function(){this.focus();this.select();return false});
var l=false,k=null,m=function(){l&&k.abort();l=true;k=$.get(g.attr("url_base")+f.val(),null,function(v){if(v.length>0){g.html(v);g.find("a").attr("target","_blank");g.trigger("pageUpdate")}l=false})};m();var o=f.val(),p=null,q=function(){if(o!=f.val()||p==f.val())o=f.val();else{m();p=f.val()}};f.keyup(function(){o=this.value;setTimeout(q,1000)});f.click()}}$(document).bind("reveal.facebox",c);var b=window.location.hash.substr(1);if(/^diff-/.test(b)||/^L\d+/.test(b))$("li a[href='#files_bucket']").click();
function e(f){return f.charAt(0).toUpperCase()+f.slice(1)}});$(function(){if(!$("body").hasClass("page-newpullrequest"))return false;$(".pull-form a[action=preview]").click(function(){var b=$(".pull-form .content-body"),e=$(".pull-form").attr("data-preview-url"),f=$(this).closest("form");b.html("<p>Loading preview ...</p>");$.post(e,f.serialize(),function(g){b.html(g)})});var a=$(".btn-change");a.data("expand-text",a.text());a.data("collapse-text",a.attr("data-collapse-text"));a.data("state","collapsed");$(".editor-expander").click(function(){if(a.data("state")==
"collapsed"){a.find("span").text(a.data("collapse-text"));a.data("state","expanded");$(".range-editor").slideDown("fast");$(".pull-form-main .form-actions button").hide();$(".pull-tabs, .tab-content").css({opacity:0.45})}else{a.find("span").text(a.data("expand-text"));a.data("state","collapsed");$(".range-editor").slideUp("fast");$(".pull-form-main .form-actions button").show();$(".pull-tabs, .tab-content").css({opacity:1})}return false});var d=$(".new-pull-request form");function c(){var b=d.find("input.title");
if(b.val().length>0){b.addClass("valid");d.find(".js-title-missing-error").hide()}else{b.removeClass("valid");d.find(".js-title-missing-error").show()}}d.submit(function(){if(!d.attr("data-update")){c();if($(".js-title-missing-error").is(":visible"))return false;GitHub.metric("Sent Pull Request",{"Pull Request Type":"New School",Action:GitHub.currentAction,"Ref Type":GitHub.revType})}});$("button#update_commit_range").click(function(){d.attr("data-update","yes");d.attr("action","/"+GitHub.nameWithOwner+
"/pull/new");d.submit()});$(".range-editor").find("input, select").keypress(function(b){b.keyCode==13&&b.preventDefault()});$(".js-refchooser").each(function(){$(this).refChooser({change:function(){$(this).attr("data-ref-valid",false);$("button#update_commit_range").attr("disabled",true)},found:function(){$(this).attr("data-ref-valid",true);$(".js-refchooser[data-ref-valid=false]").length==0&&$("button#update_commit_range").removeAttr("disabled")}});var b=$(this).find(".js-ref"),e=$(this).find("select"),
f=b.branchesAutocomplete({extraParams:{repository:e.val()}});e.change(function(){f.flushCache();f.setOptions({extraParams:{repository:$(this).val()}});f.click()});b.focus(function(){window.setTimeout(function(){b.selection(0,b.val().length)},1)})})});
(function(a){a.fn.refChooser=function(d){var c=a.extend({},a.fn.refChooser.defaults,d);return this.each(function(){var b=this,e=a(this),f=e.find(".js-source"),g=e.find(".js-ref"),h=e.find(".js-commit-preview"),j=e.attr("data-preview-url-base"),l={repo:e.attr("data-error-repoo")},k=false,m=null;function o(){if(f.val()==""){h.html('<p class="error">'+l.repo+"</p>");c.missing.call(e)}else{var v=j+f.val().split("/")[0]+":"+g.val();k&&m.abort();k=true;m=a.get(v,null,function(r){if(r.length>0){h.html(r);
h.trigger("pageUpdate");h.find(".error").length==0?c.found.call(b):c.missing.call(b)}k=false})}}var p=g.val();g.keyup(function(){if(this.value!=p){c.change.call(b);p=this.value;o()}});var q=f.val();f.change(function(){if(this.value!=q){c.change.call(b);q=this.value;o()}})})};a.fn.refChooser.defaults={found:function(){},change:function(){},missing:function(){}}})(jQuery);$(function(){if(!$("body").hasClass("page-notifications"))return false;$("table.notifications input[type=checkbox]").change(function(){$.post("/account/toggle_notification",{_method:"put",enable:this.checked?"true":"false",notification_action:this.value})});$("button.dummy").click(function(){$(this).prev(".success").show().fadeOut(5000);return false});$(".user_toggle").click(function(){var a=this.checked,d={};d[this.name]=this.checked?"1":"0";d._method="put";$.post("/account",d,function(){a?$("#notifications_global_wrapper").removeClass("ignored"):
$("#notifications_global_wrapper").addClass("ignored")})})});$(function(){if(!$("body").hasClass("page-profile"))return false;var a=$("ul.repositories>li"),d=$(".repo-filter input").enhancedField().val(""),c=d.val();function b(){a.show();d.val()!=""&&a.filter(":not(:Contains('"+d.val()+"'))").hide()}d.bind("keyup blur click",function(){if(this.value!=c){c=this.value;b()}});$("ul.repositories>li.simple").each(function(){var f=$(this),g=f.find("p.description").html();$.trim(g)!=""&&f.find("h3").attr("title",g).tipsy({gravity:"w"})});var e=$("ul#placeholder-members li").remove();
e.length>0&&$("ul.org-members").prepend(e)});$(function(){if(!$("body").hasClass("page-pullrequest"))return false;$(".js-hard-tabs").live("tabChanged",Comment.enhanceAll);$(".file, .file-box").live("commentChange",function(f){$(f.target).closest("#discussion_bucket").length>0?$("#files_bucket").remove():$("#discussion_bucket").remove()});$("#reply-to-pr").click(function(){$("#comment_body").focus()});$("#pull_closed_warning a").click(function(){$("#pull_closed_warning").hide();$("#pull_comment_form").show();return false});$(".pull-participation a").click(function(){$("#pull_comment_form *[tabindex=1]").focus()});
var a=$(".js-toggle-merging");if(a.length>0){var d=$(".js-shown-merging"),c=$(".js-shown-notmerging");a.click(function(){if(d.is(":visible")){d.hide();c.show()}else{d.show();c.hide()}return false})}$(".mergeable").contextButton(".js-merge-help",{contextPaneSelector:".merge-help-context",anchorTo:"left"});var b=$("#js-mergeable-unknown");if(b.length>0&&b.is(":visible")){var e=b.attr("data-pull-num");$.smartPoller(function(f){$.getJSON("/"+GitHub.nameWithOwner+"/pull/"+e+"/mergeable",function(g){if(g===
true){b.hide();$("#js-mergeable-clean").show()}else if(g===false){b.hide();$("#js-mergeable-dirty").show()}else f()})})}});$(function(){var a=false;$(".ajax_paginate a").live("click",function(){if(a)return false;a=true;var d=$(this).parent(),c=d.parent();$(this).html('<img src="/images/modules/ajax/indicator.gif"/>');$.get(this.href,function(b){d.replaceWith(b);c.trigger("pageUpdate");a=false});return false})});$(function(){$(".graph .bars").each(function(){var a=this;if($(a).is(":visible")){var d=function(b){new ParticipationGraph(a,b)},c=$(this).attr("rel");$.get(c,null,d,"text")}})});ParticipationGraph=function(a,d){this.BAR_WIDTH=7;this.ownerCommits=this.allCommits=null;this.primer=new Primer(a,416,20);this.data=d;this.readData();this.draw()};
ParticipationGraph.prototype={readData:function(){var a=this.data.split("\n");this.allCommits=a[0]?this.base64BytesToIntArray(a[0]):"";this.ownerCommits=a[1]?this.base64BytesToIntArray(a[1]):""},max:function(a){for(var d=a[0],c=1;c<a.length;c++)if(a[c]>d)d=a[c];return d},integerize:function(a){for(var d=[],c=0;c<a.length;c++)d.push(parseInt(a[c]));return d},base64ByteToInt:function(a){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!-";return d.indexOf(a)},base64BytesToIntArray:function(a){for(var d=
[],c,b=0;b<a.length;b++)if(b%2==0)c=64*this.base64ByteToInt(a.charAt(b));else{c+=this.base64ByteToInt(a.charAt(b));d.push(c)}return d},draw:function(){var a=this.max(this.allCommits);a=a>=20?19/a:1;var d=new Primer.Layer;d.bind(this.primer);for(var c=0;c<this.allCommits.length;c++){var b=new Primer.Layer;b.bind(this.primer);b.setFillStyle("#CACACA");var e=this.allCommits[c]*a;b.fillRect(c*(this.BAR_WIDTH+1),20-e,this.BAR_WIDTH,e);d.addChild(b)}var f=new Primer.Layer;f.bind(this.primer);for(c=0;c<
this.ownerCommits.length;c++){b=new Primer.Layer;b.bind(this.primer);b.setFillStyle("#336699");e=this.ownerCommits[c]*a;b.fillRect(c*(this.BAR_WIDTH+1),20-e,this.BAR_WIDTH,e);f.addChild(b)}this.primer.addChild(d);this.primer.addChild(f)}};$(function(){var a=$("table.upgrades");if(a.length==0)return false;a.find("tr.current");var d=$("#plan"),c=$("#credit_card_fields");function b(e){newPlan=e;a.find("tr.selected").removeClass("selected");e.addClass("selected");a.addClass("selected");d.val(newPlan.attr("data-name"));newPlan.attr("data-cost")==0?c.hide():c.show()}a.find(".choose_plan").click(function(){b($(this).closest("tr"));return false});$(".selected .choose_plan").click()});$(function(){$(".plan").dblclick(function(){var a=$(this).find("a.classy");if(a.length>0)document.location=a.attr("href")});$("#signup_form").show();$("#signup_button").removeAttr("disabled");$("#signup_form").submit(function(){$("#signup_button").attr("disabled",true).find("span").text("Creating your GitHub account...")});$("dl.form.autocheck").each(function(){var a=$(this);a.find("input").blur(function(){var d=$(this);if($.trim(d.val()))if(d.attr("check-url")){d.css("background-image",'url("/images/modules/ajax/indicator.gif")');
$.ajax({type:"POST",url:d.attr("check-url"),data:{value:d.val()},success:function(){d.next().is(".note")&&d.next().find("strong").text(d.val());a.unErrorify();d.css("background-image",'url("/images/modules/ajax/success.png")')},error:function(c){a.errorify(c.responseText);d.css("background-image",'url("/images/modules/ajax/error.png")')}})}})})});GitHub.spy=function(a){var d={path:"/",expires:1};a=a.repo;if(a!=""){$.cookie("spy_repo",a,d);$.cookie("spy_repo_at",new Date,d)}};GitHub.Team=function(a){this.url=window.location.pathname;this.orgUrl=this.url.split(/\/(teams|invite)/)[0];if(a)this.url=this.orgUrl+"/teams/"+a};
GitHub.Team.prototype={name:function(){return $("#team-name").val()},newRecord:function(){return!/\/invite/.test(location.pathname)&&!/\d/.test(location.pathname)},addMember:function(a){return/\//.test(a)?this.addRepo(a):this.addUser(a)},repos:function(){return $.makeArray($(".repositories li:visible a span").map(function(){return $(this).text()}))},addRepo:function(a){debug("Adding repo %s",a);if(!a||$.inArray(a,this.repos())>-1)return false;this.addRepoAjax(a);var d=$(".repositories").find("li:first").clone(),
c=d.find("input[type=hidden]");d.find("a").attr("href","/"+a).text(a);d.find(".remove-repository").attr("data-repo",a);GitHub.Autocomplete.visibilities[a]=="private"&&d.addClass("private");c.length>0&&c.val(a).attr("disabled",false);$(".repositories").append(d.show());return true},addRepoAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/repo/"+a)}},removeRepo:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.repos())==-1)return false;var d=$(".repositories li:visible a").filter(function(){return $(this).find("span").text()==
a});function c(){d.parents("li:first").remove()}function b(){d.parent().find(".remove-repository").show().removeClass("remove").html('<img class="dingus" src="/images/modules/ajax/error.png">').end().find(".spinner").hide()}if(this.newRecord())c();else{d.parent().find(".remove-repository").after('<img class="dingus spinner" src="/images/modules/ajax/indicator.gif"/>').hide();this.removeRepoAjax(a,c,b)}return true},removeRepoAjax:function(a,d,c){if(!this.newRecord()){debug("Ajaxily removing %s",a);
$.del(this.url+"/repo/"+a,{},{success:d,error:c})}},users:function(){return $.makeArray($(".usernames li:visible").map(function(){return $(this).find("a:first").text()}))},addUser:function(a){debug("Adding %s",a);if(!a||$.inArray(a,this.users())>-1)return false;this.addUserAjax(a);var d=$(".usernames").find("li:first").clone(),c=GitHub.Autocomplete.gravatars[a],b=d.find("input[type=hidden]");c&&d.find("img").replaceWith(c);d.find("a").attr("href","/"+a).text(a);b.length>0&&b.val(a).attr("disabled",
false);$(".usernames").append(d.show());return true},removeUser:function(a){debug("Removing %s",a);if(!a||$.inArray(a,this.users())==-1)return false;var d=$(".usernames li:visible a:contains("+a+")");function c(){d.parents("li:first").remove()}if(this.newRecord())c();else{d.parent().find(".remove-user").spin().remove();$("#spinner").addClass("remove");this.removeUserAjax(a,c)}return true},addUserAjax:function(a){if(!this.newRecord()){debug("Ajaxily adding %s",a);$.post(this.url+"/member/"+a)}},removeUserAjax:function(a,
d){if(!this.newRecord()){debug("Ajaxily removing %s",a);$.del(this.url+"/member/"+a,d)}}};
$(function(){if(GitHub.currentTeam){var a=function(){debug("Setting data.completed to %s",$(this).val());$(this).data("completed",$(this).val())},d=GitHub.currentTeam,c=new GitHub.Autocomplete;c.settings.selectFirst=true;c.reposURL=d.orgUrl+"/autocomplete/repos";c.repos($(".add-repository-form input")).result(a);$(".remove-repository").live("click",function(){d.removeRepo($(this).attr("data-repo"));return false});$(".add-username-form input").userAutocomplete().result(a);$(".remove-user").live("click",
function(){d.removeUser($(this).prev().text());return false});$(".add-username-form button, .add-repository-form button").click(function(){var b=$(this).parent();b=b.find(":text");var e=b.val();debug("Trying to add %s...",e);if(!e||!b.data("completed"))return false;b.val("").removeClass("ac-accept");d.addMember(e);return false});$(".add-username-form :text, .add-repository-form :text").keypress(function(b){if(b.keyCode==$.keys.enter){$(this).next("button").click();return false}if(b.keyCode!=$.keys.tab){debug("Clearing data.completed (was %s)",
$(this).data("completed")||"null");$(this).data("completed",null)}})}});$(function(){$(".remove-team").click(function(){if(!confirm("Are you POSITIVE you want to remove this team?"))return false;var a=$(this).parents("li.team");$.del(this.href,function(){a.remove()});$(this).spin().remove();return false})});$(function(){var a=$.cookie("tracker"),d=null;if(a==null)d=document.referrer?document.referrer:"direct";a=getParams();if(a.utm_campaign&&$.trim(a.utm_campaign)!="")d=a.utm_campaign;if(a.referral_code&&$.trim(a.referral_code)!="")d=a.referral_code;d!=null&&$.cookie("tracker",d,{expires:7,path:"/"})});
function getParams(a,d){if(arguments.length<2)d=location.href;if(arguments.length>0&&a!=""){var c=a=="#"?/[#]([^$]*)/:a=="?"?/[?]([^#$]*)/:new RegExp("[?&]"+a+"=([^&#]*)"),b=c.exec(d);return b==null?"":b[1]}else{d=d.split("?");b={};if(d.length>1){d=d[1].split("#");if(d.length>1)b.hash=d[1];$.each(d[0].split("&"),function(e,f){f=f.split("=");b[f[0]]=f[1]})}return b}};GitHub||(GitHub={});if(!GitHub.Tree)GitHub.Tree={};GitHub.Tree.rewriteSHAsInLinksWithRef=function(a){if(GitHub.currentRef)$(a||".breadcrumb a, .tree-browser .content a").each(function(){if(!/skiptree/.test(this.className)){this.href=this.href.replace(/[0-9a-f]{40}/,GitHub.currentRef);var d="/"+GitHub.nameWithOwner+"/tree/"+GitHub.masterBranch;if((new RegExp(d+"$")).test(this.href))this.href="/"+GitHub.nameWithOwner}})};
GitHub.CachedCommitDataPoller=function(a,d){var c=$(d||document).find(".js-loading-commit-data");if(c.length!=0){var b,e,f="/"+GitHub.nameWithOwner+"/commit/",g="/"+GitHub.nameWithOwner+"/cache/commits/"+GitHub.currentTreeSHA+"?path="+encodeURIComponent(GitHub.currentPath)+"&commit_sha="+GitHub.commitSHA;$.smartPoller(a||2000,function(h){$.ajax({url:g,dataType:"json",error:function(j){j.status==201?h():c.html('<img src="/images/modules/ajax/error.png"> Something went wrong.')},success:function(j){debug("success: %s",
g);for(var l in j)if($("#"+l).length!=0){var k=$("#"+l).parents("tr:first");k.find(".age").html('<span class="relatize">'+j[l].date+"</span>");b=k.find(".message");b.html(j[l].message);b.html().length>50&&b.html(b.html().slice(0,47)+"...");b.html('<a href="'+f+j[l].commit+'" class="message">'+b.html()+"</a>");e=j[l].login?'<a href="/'+j[l].login+'">'+j[l].login+"</a>":j[l].author;b.html(b.html()+" ["+e+"]")}$(d||document.body).trigger("pageUpdate")}})})}};
$(function(){$("#readme").length>0?$("#read_more").show():$("#missing-readme").show();$("#download_button").click(function(){$.gitbox($(this).attr("href"));return false});$(".archive_link a").live("click",function(){$(".popup .inner").hide();$(".popup .wait").show();var a=$(this).attr("rel"),d=0;$.smartPoller(function(c){$.getJSON(a,function(b){if(d>60)return false;else if(b.ready)$(document).trigger("close.facebox");else{d+=1;c()}})})});$(".other_archive_link").live("click",function(){$.gitbox($(this).attr("href"));
return false});$(".pagehead .subnav-bar")[0]&&$(".pagehead .subnav-bar a[data-name]").live("mousedown",function(){var a=$(this).attr("data-name");a="/"+GitHub.nameWithOwner+"/"+GitHub.controllerName+"/"+a;if(GitHub.currentPath!="")a+="/"+GitHub.currentPath;a!=$(this).attr("href")&&$(this).attr("href",a)});GitHub.CachedCommitDataPoller();GitHub.Tree.rewriteSHAsInLinksWithRef()});GitHub||(GitHub={});GitHub.TreeFinder=function(){if($("#slider").length!=0){var a=this;$.hotkeys({t:function(){a.show()}});var d=new Image;d.src=GitHub.assetHost?GitHub.assetHost+"/images/modules/ajax/spinner.gif":"/images/modules/ajax/spinner.gif"}};
GitHub.TreeFinder.prototype={fileList:null,recentFiles:[],currentFinder:null,currentInput:null,show:function(){if(!this.currentFinder){var a=this,d;a.currentFinder=$(".tree-finder").clone().show();a.currentInput=a.currentFinder.find("input");slider.slideForwardToLoading();d=a.currentFinder.find(".breadcrumb").detach().addClass("js-tree-finder-breadcrumb");$("#slider .breadcrumb:visible").hide().after(d);$("#slider").bind("slid",function(){$("#slider .frame-center").is(":not(.tree-finder)")&&a.hide()});
a.attachBehaviors()}},hide:function(){if(this.currentFinder){var a=this;a.currentInput.blur();a.currentFinder.remove();$(".js-tree-finder-breadcrumb").remove();a.currentFinder=a.currentInput=null;$("#slider").unbind("slid")}},attachBehaviors:function(){var a=this,d=true,c=null,b=null;a.loadFileList();$(".js-dismiss-tree-list-help").live("click",function(){$.post(this.getAttribute("href"));$(this).closest(".octotip").fadeOut(function(){$(".tree-finder .octotip").remove()});a.currentInput.focus();return false});
$("tbody.js-results-list tr",a.currentFinder).live("mouseover",function(){if(d){a.currentFinder&&a.currentFinder.find("tr.current").removeClass("current");$(this).addClass("current")}});a.currentFinder.find(".js-results-list").delegate("a","click",function(){var e=$(this).text(),f=$.inArray(e,a.recentFiles);f>-1&&a.recentFiles.splice(f,1);a.recentFiles.unshift(e);a.currentInput.blur();$(document).unbind("keydown.treeFinder");if(slider.enabled)return true;else document.location=$(this).attr("href")});
$("tr td.icon",a.currentFinder).live("click",function(){$(this).parents("tr:first").find("td a").click()});$(document).bind("keydown.treeFinder",function(e){if(e.keyCode==27){if(!slider.sliding&&$("#slider .frame-center").is(".tree-finder")){slider.slideBackTo(location.pathname);$(document).unbind("keydown.treeFinder")}return false}});a.currentInput.focus().keyup(function(){c&&clearTimeout(c);c=setTimeout(function(){c=null;d=true},250)}).keydown(function(e){var f=a.currentFinder.find("tr.current"),
g=null;function h(j){if(f.length==0)return false;g=j=="up"?f.prev("tr"):f.next("tr");if(g.length){d=false;f.removeClass("current");g.addClass("current");j=100;var l=$(window),k=l.height(),m=g.offset().top-j,o=g.offset().top+g.outerHeight()+j;if(m<l.scrollTop())l.scrollTop()>j&&l.scrollTop(m);else o>l.scrollTop()+k&&l.scrollTop(o-k)}return false}switch(e.which){case 9:case 16:case 17:case 18:case 91:case 93:return false;case 78:if(e.ctrlKey)return h("down");return;case 80:if(e.ctrlKey)return h("up");
return;case 38:return h("up");case 40:return h("down");case 13:if(f.length==0)return false;f.find("a").click();return false}b&&clearTimeout(b);b=setTimeout(function(){b=null;a.updateResults()},100)})},loadFileList:function(){var a=this;function d(){a.loadedFileList()}a.fileList?d():$.ajax({url:"/"+GitHub.nameWithOwner+"/tree-list/"+GitHub.commitSHA,error:function(){if(a.currentFinder){a.fileList=[];a.currentFinder.find(".js-no-results th").text("Something went wrong");d()}},success:function(c){a.fileList=
c?$.trim(c).split("\n"):[];d()}})},loadedFileList:function(){var a=this;if(a.currentFinder){$("#slider .frame-center").replaceWith(a.currentFinder);a.updateResults()}},updateResults:function(){var a=this;if(a.currentFinder&&a.fileList){var d=a.currentInput.val(),c=[],b=a.currentFinder.find(".js-results-list"),e="",f=0;if(d)c=a.findMatchingFiles(d);else if(a.recentFiles.length){c=a.recentFiles.slice(1,6);if(c.length<20)c=c.concat(a.fileList.slice(0,20-c.length))}else c=a.fileList;if(c.length<=0){b[0].innerHTML=
"";a.currentFinder.find(".js-no-results").show();a.currentFinder.find(".js-header").hide()}else{a.currentFinder.find(".js-no-results").hide();a.currentFinder.find(".js-header").show();c=c.slice(0,50);d=this.regexpForQuery(d);var g=function(h,j){return j%2==1?"<b>"+h+"</b>":h};for(f=0;f<c.length;f++){a=(c[f].match(d)||[]).slice(1).map(g).join("");e+='<tr><td class="icon"><img src="/images/icons/txt.png"></td><td><a class="js-slide-to" href="/'+GitHub.nameWithOwner+"/blob/"+(GitHub.currentRef||GitHub.commitSHA)+
"/"+c[f]+'">'+a+"</a></td></tr>"}b[0].innerHTML=e;b.find("tr:first").addClass("current")}}},findMatchingFiles:function(a){if(!a)return[];var d=this,c=[],b=0,e,f,g,h;a=a.toLowerCase();e=this.regexpForQuery(a);for(b=0;b<d.fileList.length;b++){f=d.fileList[b];g=f.toLowerCase();if(!f.match(/^vendor\/(cache|rails|gems)/))if(!f.match(/(dot_git|\.git\/)/))if(!f.match(/MathJax/))if(g.match(e)){h=g.score(a);if(h>0){if(!a.match("/"))if(g.match("/"))h+=g.replace(/^.*\//,"").score(a);else h*=2;c.push([h,f])}}}return $.map(c.sort(function(j,
l){return l[0]-j[0]}),function(j){return j[1]})},regexpForQuery:function(a){var d="+.*?[]{}()^$|\\".replace(/(.)/g,"\\$1");d=new RegExp("\\((["+d+"])\\)","g");return new RegExp("(.*)"+a.toLowerCase().replace(/(.)/g,"($1)(.*?)").replace(d,"(\\$1)")+"$","i")}};$(function(){window.treeFinder=new GitHub.TreeFinder});GitHub||(GitHub={});GitHub.TreeSlider=function(){if(window.history&&window.history.pushState)if($("#slider").length!=0)if(!navigator.userAgent.match(/(iPod|iPhone|iPad)/)){var a=this;a.enabled=true;$("#slider a.js-slide-to, .breadcrumb a").live("click",function(d){return a.clickHandler(d)});$(window).bind("popstate",function(d){a.popStateHandler(d.originalEvent)})}};
GitHub.TreeSlider.prototype={enabled:false,sliding:false,slideSpeed:400,frameForPath:function(a){return $(".frame[data-path="+a+"]")},frameForURL:function(a){return this.frameForPath(this.pathFromURL(a))},pathFromURL:function(a){var d=/\/(tree|blob)\/[^\/]+\//;a=a.split(d)[2]||"/";if(a.slice(a.length-1,a.length)!="/")a+="/";return unescape(a)},scrollToBreadcrumb:function(){this.visibleInBrowser(".breadcrumb:visible")||$(".breadcrumb:visible").scrollTo(50)},visibleInBrowser:function(a){var d=$(window).scrollTop(),
c=d+$(window).height(),b=$(a).offset().top;a=b+$(a).height();return a>=d&&b<=c},clickHandler:function(a){if(a.which==2||a.metaKey||a.ctrlKey)return true;if(this.sliding)return false;a=a.target.href;var d=this.pathFromURL(a);window.history.pushState({path:d},"",a);typeof _gaq!="undefined"&&_gaq.push(["_trackPageview"]);this.slideTo(a);return false},popStateHandler:function(){this.slideTo(location.pathname)},doneSliding:function(){if(this.sliding){this.sliding=false;$("#slider .frame-center").nextAll(".frame").hide();
$("#slider .frame-center").prevAll(".frame").css("visibility","hidden");var a=$(".frame-loading:visible");a.length?a.removeClass("frame-loading"):$("#slider").trigger("slid")}},slideTo:function(a){var d=this.pathFromURL(a),c=this.frameForPath(d),b=$("#slider .frame-center").attr("data-path")||"";c.is(".frame-center")||(b=="/"||d.split("/").length>b.split("/").length?this.slideForwardTo(a):this.slideBackTo(a))},slideForwardTo:function(a){debug("Sliding forward to %s",a);var d=this.frameForURL(a);if(d.length)this.slideForwardToFrame(d);
else{var c=this.slideForwardToLoading();this.loadFrame(a,function(b){c.replaceWith($(b).find(".frame-center"))})}},slideForwardToFrame:function(a){if(!this.sliding){this.sliding=true;var d=this;$("#slider .frame-center").after(a.css("marginLeft",0)).addClass("frame").removeClass("frame-center").animate({marginLeft:"-1200px"},this.slideSpeed,function(){d.doneSliding()});this.makeCenterFrame(a);this.setFrameTitle(a);this.setFrameCanonicalURL(a)}},slideForwardToLoading:function(){var a=$(".frame-loading").clone();
a.find("img").hide();setTimeout(function(){a.find("img").show()},500);$(".frames").append(a);this.slideForwardToFrame(a);return a},slideBackTo:function(a){debug("Sliding back to %s",a);var d=this.frameForURL(a);if(d.length)this.slideBackToFrame(d);else{var c=this.slideBackToLoading(),b=this.pathFromURL(a);this.loadFrame(a,function(e){c.removeClass("frame-loading").empty().append($(e).find(".frame-center").contents()).attr("data-path",b)})}},slideBackToFrame:function(a){if(!this.sliding){this.sliding=
true;$("#slider .frame-center").before(a.css("marginLeft","-1200px")).addClass("frame").removeClass("frame-center");var d=this;a.animate({marginLeft:"0"},this.slideSpeed,function(){d.doneSliding()});this.makeCenterFrame(a);this.setFrameTitle(a);this.setFrameCanonicalURL(a)}},slideBackToLoading:function(){var a=$(".frame-loading").clone();a.find("img").hide();setTimeout(function(){a.find("img").show()},350);$(".frames").prepend(a.show());slider.slideBackToFrame(a);return a},makeCenterFrame:function(a){a.css("visibility",
"visible").show().addClass("frame-center");this.scrollToBreadcrumb();var d=$(".breadcrumb[data-path="+a.attr("data-path")+"]");if(d.length>0){$(".breadcrumb:visible").hide();d.show()}a=$(".announce[data-path="+a.attr("data-path")+"]");$(".announce").fadeOut();a.length>0&&a.fadeIn();GitHub.currentPath=this.pathFromURL(location.pathname).replace(/\/$/,"")},setFrameTitle:function(a){a=a.attr("data-path");if(!(!a||a.length==0)){var d=unescape(unescape(GitHub.currentRef));a=unescape(a.slice(0,a.length-
1));document.title=a.length>0?a+" at "+d+" from "+GitHub.nameWithOwner+" - GitHub":GitHub.nameWithOwner+" at "+d+" - GitHub"}},setFrameCanonicalURL:function(a){(a=a.attr("data-canonical-url"))&&$("link[rel=canonical]").attr("href",a)},loadFrame:function(a,d){debug("Loading "+a+"?slide=1");var c=this;$.ajax({url:a+"?slide=1",cache:false,success:function(b){d.call(this,b);$("#slider").trigger("slid");$("#slider .breadcrumb").hide().last().after($(b).find(".breadcrumb"));$("#slider").after($(b).find(".announce").hide().fadeIn());
b=c.frameForURL(a);b.trigger("pageUpdate");GitHub.Tree.rewriteSHAsInLinksWithRef();GitHub.CachedCommitDataPoller(50,b);GitHub.Blob.show();c.setFrameTitle(b);c.setFrameCanonicalURL(b)},error:function(){$("#slider .frame-center").html("<h3>Something went wrong.</h3>")},complete:function(){c.sliding=false}})}};$(function(){window.slider=new GitHub.TreeSlider});$(function(){GitHub.UFO={drawFont:function(){var a=document.getElementById("ufo");a=a.getContext("2d");for(var d=0;d<glifs.length;d++){a.save();var c=d%9*100,b=Math.floor(d/9)*100;a.translate(c+10,b+80);a.scale(0.1,-0.1);c=new GitHub.UFO.Glif(a,glifs[d]);c.draw();a.restore()}}};GitHub.UFO.Glif=function(a,d){this.ctx=a;this.contours=d};GitHub.UFO.Glif.prototype={draw:function(){this.ctx.beginPath();for(var a=0;a<this.contours.length;a++)this.drawContour(this.contours[a]);this.ctx.fillStyle="black";
this.ctx.fill()},drawContour:function(a){for(var d=0;d<a.length;d++)d==0?this.moveVertex(a[d]):this.drawVertex(a[d]);this.drawVertex(a[0])},moveVertex:function(a){this.ctx.moveTo(a[0],a[1])},drawVertex:function(a){if(a.length==2)this.ctx.lineTo(a[0],a[1]);else if(a.length==4)this.ctx.quadraticCurveTo(a[2],a[3],a[0],a[1]);else a.length==6&&this.ctx.bezierCurveTo(a[2],a[3],a[4],a[5],a[0],a[1])}};$("#ufo").length>0&&GitHub.UFO.drawFont();$(".glif_diff").each(function(){var a=$(this).attr("rel"),d=this.getContext("2d");
a=eval("glif_"+a);a=new GitHub.UFO.Glif(d,a);d.translate(0,240);d.scale(0.333,-0.333);a.draw()})});$(function(){$("a.follow").click(function(){$.post(this.href,{});$(this).parent().find(".follow").toggle();return false});$("#inline_visible_repos").click(function(){var a=$(this).spin(),d=window.location+"/ajax_public_repos";$(".projects").load(d,function(){a.stopSpin();$(".repositories").trigger("pageUpdate")});a.hide();return false});GitHub.editableGenerator&&$("#dashboard span.edit").each(GitHub.editableGenerator({width:"200px",submittype:"put"}));$("#edit_user .info .rename").click(function(){$("#edit_user .username").toggle();
$("#user_rename").toggle();return false});$("#user_rename > input[type=submit]").click(function(){if(!confirm(GitHub.rename_confirmation()))return false});$("#reveal_cancel_info").click(function(){$(this).toggle();$("#cancel_info").toggle();return false});$("#cancel_plan").submit(function(){var a="Are you POSITIVE you want to delete this account? There is absolutely NO going back. All repositories, comments, wiki pages - everything will be gone. Please consider downgrading the account's plan.";return confirm(a)});
window.location.href.match(/account\/upgrade$/)&&$("#change_plan_toggle").click()});$(function(){$("#see-more-elsewhere").click(function(){$(".seen-elsewhere").show();$(this).remove();return false});var a=false;function d(){var b=$("#current-version").val();b&&$.get("_current",function(e){if(b==e)setTimeout(d,5000);else if(!a){$("#gollum-error-message").text("Someone has edited the wiki since you started. Please reload this page and re-apply your changes.");$("#gollum-error-message").show();$("#gollum-editor-submit").attr("disabled","disabled");$("#gollum-editor-submit").attr("value",
"Cannot Save, Someone Else Has Edited")}})}$("#gollum-editor-body").each(d);$("#gollum-editor-submit").click(function(){a=true});var c=[];$("form#history input[type=submit]").attr("disabled",true);$("form#history input[type=checkbox]").change(function(){var b=$(this).val(),e=$.inArray(b,c);if(e>-1)c.splice(e,1);else{c.push(b);if(c.length>2){b=c.shift();$("input[value="+b+"]").attr("checked",false)}}$("form#history tr.commit").removeClass("selected");$("form#history input[type=submit]").attr("disabled",
true);if(c.length==2){$("form#history input[type=submit]").attr("disabled",false);var f=false;$("form#history tr.commit").each(function(){f&&$(this).addClass("selected");if($(this).find("input:checked").length>0)f=!f;f&&$(this).addClass("selected")})}})});
